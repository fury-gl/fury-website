<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>fury.actor &#8212; FURY 0.10.0.dev22+gc2e5151e documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../../_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom_github.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/vendor/fonts.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_modules/fury/actor';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = '/_static/versions_switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'latest';
        </script>
    <link rel="icon" href="../../_static/logo.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">

<link
  rel="alternate"
  type="application/atom+xml"
  href="../../blog/atom.xml"
  title="Blog"
/>



  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="light">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    <div id="navbar-start">
    <a class="navbar-brand" href="../../index.html">
        <img src="../../_static/images/logo.svg" class="logo" alt="logo" style="padding-right: 1rem;">
        <!-- <img src="../../_static/images/text-logo.png" class="logo" alt="logo"> -->
        <div id="navbar-logo-text" style="color: #990000;">FURY</div>
    </a>
</div>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
    </div>

    <div id="navbar-end">
      
        <div class="navbar-end-item navbar-persistent--container">
          
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
      
      
      <div class="navbar-end-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="nav-item">
        <a class="nav-link" href="../../installation.html">Installation</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link" href="../../introduction.html">About</a>
    </li>

    <li class="nav-item ">
        <a class="nav-link" href="../../reference/index.html">API reference</a>
    </li>

    <li class="nav-item ">
        <a class="nav-link" href="../../blog.html">Blog</a>
    </li>

    <li class="nav-item ">
        <a class="nav-link" href="../../community.html">Community</a>
    </li>
    
</ul><ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>


  
  
    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>
  

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="nav-item">
        <a class="nav-link" href="../../installation.html">Installation</a>
    </li>
    <li class="nav-item ">
        <a class="nav-link" href="../../introduction.html">About</a>
    </li>

    <li class="nav-item ">
        <a class="nav-link" href="../../reference/index.html">API reference</a>
    </li>

    <li class="nav-item ">
        <a class="nav-link" href="../../blog.html">Blog</a>
    </li>

    <li class="nav-item ">
        <a class="nav-link" href="../../community.html">Community</a>
    </li>
    
</ul><ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item">
<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
    <div class="sidebar-start-items__item">
<h3><a href="../../index.html">Table of Contents</a></h3>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">About FURY</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../symlink/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../blog.html">Blog</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Programming with FURY</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fury-pybullet.html">FURY - pyBullet Integration Guide</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Developers Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../symlink/contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-history.html">Release History</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Join our community!</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../community.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference external" href="https://discord.gg/6btFPPj">Discord Community</a></li>
<li class="toctree-l1"><a class="reference external" href="https://mail.python.org/mailman3/lists/fury.python.org">Mailing list</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/fury-gl/fury">Source Code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/fury-gl/fury/issues/new/choose">File a bug</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/fury-gl/fury/issues/new/choose">Feature Request</a></li>
</ul>

    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

  
  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
<h1>Source code for fury.actor</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Module that provide actors to render.&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">fury.primitive</span> <span class="k">as</span> <span class="nn">fp</span>
<span class="kn">from</span> <span class="nn">fury</span> <span class="kn">import</span> <span class="n">layout</span>
<span class="kn">from</span> <span class="nn">fury.actors.odf_slicer</span> <span class="kn">import</span> <span class="n">OdfSlicerActor</span>
<span class="kn">from</span> <span class="nn">fury.actors.peak</span> <span class="kn">import</span> <span class="n">PeakActor</span>
<span class="kn">from</span> <span class="nn">fury.colormap</span> <span class="kn">import</span> <span class="n">colormap_lookup_table</span>
<span class="kn">from</span> <span class="nn">fury.deprecator</span> <span class="kn">import</span> <span class="n">deprecate_with_version</span><span class="p">,</span> <span class="n">deprecated_params</span>
<span class="kn">from</span> <span class="nn">fury.io</span> <span class="kn">import</span> <span class="n">load_image</span>
<span class="kn">from</span> <span class="nn">fury.lib</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">VTK_UNSIGNED_CHAR</span><span class="p">,</span>
    <span class="n">Actor</span><span class="p">,</span>
    <span class="n">ArrowSource</span><span class="p">,</span>
    <span class="n">Assembly</span><span class="p">,</span>
    <span class="n">ButterflySubdivisionFilter</span><span class="p">,</span>
    <span class="n">CellArray</span><span class="p">,</span>
    <span class="n">CellPicker</span><span class="p">,</span>
    <span class="n">CleanPolyData</span><span class="p">,</span>
    <span class="n">ConeSource</span><span class="p">,</span>
    <span class="n">ContourFilter</span><span class="p">,</span>
    <span class="n">CylinderSource</span><span class="p">,</span>
    <span class="n">DiskSource</span><span class="p">,</span>
    <span class="n">FloatArray</span><span class="p">,</span>
    <span class="n">Follower</span><span class="p">,</span>
    <span class="n">ImageActor</span><span class="p">,</span>
    <span class="n">ImageData</span><span class="p">,</span>
    <span class="n">ImageMapToColors</span><span class="p">,</span>
    <span class="n">ImageReslice</span><span class="p">,</span>
    <span class="n">LinearExtrusionFilter</span><span class="p">,</span>
    <span class="n">LODActor</span><span class="p">,</span>
    <span class="n">LookupTable</span><span class="p">,</span>
    <span class="n">LoopSubdivisionFilter</span><span class="p">,</span>
    <span class="n">Matrix4x4</span><span class="p">,</span>
    <span class="n">OutlineFilter</span><span class="p">,</span>
    <span class="n">Points</span><span class="p">,</span>
    <span class="n">PolyData</span><span class="p">,</span>
    <span class="n">PolyDataMapper</span><span class="p">,</span>
    <span class="n">PolyDataMapper2D</span><span class="p">,</span>
    <span class="n">PolyDataNormals</span><span class="p">,</span>
    <span class="n">ScalarBarActor</span><span class="p">,</span>
    <span class="n">SphereSource</span><span class="p">,</span>
    <span class="n">SplineFilter</span><span class="p">,</span>
    <span class="n">TextActor3D</span><span class="p">,</span>
    <span class="n">Texture</span><span class="p">,</span>
    <span class="n">TexturedActor2D</span><span class="p">,</span>
    <span class="n">TexturedSphereSource</span><span class="p">,</span>
    <span class="n">TextureMapToPlane</span><span class="p">,</span>
    <span class="n">Transform</span><span class="p">,</span>
    <span class="n">TransformPolyDataFilter</span><span class="p">,</span>
    <span class="n">TriangleFilter</span><span class="p">,</span>
    <span class="n">TubeFilter</span><span class="p">,</span>
    <span class="n">VectorText</span><span class="p">,</span>
    <span class="n">numpy_support</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">fury.shaders</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">add_shader_callback</span><span class="p">,</span>
    <span class="n">attribute_to_actor</span><span class="p">,</span>
    <span class="n">compose_shader</span><span class="p">,</span>
    <span class="n">import_fury_shader</span><span class="p">,</span>
    <span class="n">replace_shader_in_actor</span><span class="p">,</span>
    <span class="n">shader_to_actor</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">fury.utils</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">apply_affine</span><span class="p">,</span>
    <span class="n">color_check</span><span class="p">,</span>
    <span class="n">fix_winding_order</span><span class="p">,</span>
    <span class="n">get_actor_from_primitive</span><span class="p">,</span>
    <span class="n">lines_to_vtk_polydata</span><span class="p">,</span>
    <span class="n">numpy_to_vtk_colors</span><span class="p">,</span>
    <span class="n">repeat_sources</span><span class="p">,</span>
    <span class="n">rgb_to_vtk</span><span class="p">,</span>
    <span class="n">set_input</span><span class="p">,</span>
    <span class="n">set_polydata_primitives_count</span><span class="p">,</span>
    <span class="n">set_polydata_triangles</span><span class="p">,</span>
    <span class="n">set_polydata_vertices</span><span class="p">,</span>
    <span class="n">shallow_copy</span><span class="p">,</span>
<span class="p">)</span>


<div class="viewcode-block" id="slicer"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.slicer">[docs]</a><span class="k">def</span> <span class="nf">slicer</span><span class="p">(</span>
    <span class="n">data</span><span class="p">,</span>
    <span class="n">affine</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">value_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">lookup_colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span>
    <span class="n">picking_tol</span><span class="o">=</span><span class="mf">0.025</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cut 3D scalar or rgb volumes into 2D images.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : array, shape (X, Y, Z) or (X, Y, Z, 3)</span>
<span class="sd">        A grayscale or rgb 4D volume as a numpy array. If rgb then values</span>
<span class="sd">        expected on the range [0, 255].</span>
<span class="sd">    affine : array, shape (4, 4)</span>
<span class="sd">        Grid to space (usually RAS 1mm) transformation matrix. Default is None.</span>
<span class="sd">        If None then the identity matrix is used.</span>
<span class="sd">    value_range : None or tuple (2,)</span>
<span class="sd">        If None then the values will be interpolated from (data.min(),</span>
<span class="sd">        data.max()) to (0, 255). Otherwise from (value_range[0],</span>
<span class="sd">        value_range[1]) to (0, 255).</span>
<span class="sd">    opacity : float, optional</span>
<span class="sd">        Opacity of 0 means completely transparent and 1 completely visible.</span>
<span class="sd">    lookup_colormap : vtkLookupTable, optional</span>
<span class="sd">        If None (default) then a grayscale map is created.</span>
<span class="sd">    interpolation : string, optional</span>
<span class="sd">        If &#39;linear&#39; (default) then linear interpolation is used on the final</span>
<span class="sd">        texture mapping. If &#39;nearest&#39; then nearest neighbor interpolation is</span>
<span class="sd">        used on the final texture mapping.</span>
<span class="sd">    picking_tol : float, optional</span>
<span class="sd">        The tolerance for the vtkCellPicker, specified as a fraction of</span>
<span class="sd">        rendering window size.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    image_actor : ImageActor</span>
<span class="sd">        An object that is capable of displaying different parts of the volume</span>
<span class="sd">        as slices. The key method of this object is ``display_extent`` where</span>
<span class="sd">        one can input grid coordinates and display the slice in space (or grid)</span>
<span class="sd">        coordinates as calculated by the affine parameter.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">value_range</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">value_range</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">data</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>

    <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Only RGB 3D arrays are currently supported.&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">nb_components</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Only 3D arrays are currently supported.&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">nb_components</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="n">vol</span> <span class="o">=</span> <span class="n">data</span>

    <span class="n">im</span> <span class="o">=</span> <span class="n">ImageData</span><span class="p">()</span>
    <span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">K</span> <span class="o">=</span> <span class="n">vol</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">im</span><span class="o">.</span><span class="n">SetDimensions</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">K</span><span class="p">)</span>
    <span class="c1"># for now setting up for 1x1x1 but transformation comes later.</span>
    <span class="n">voxsz</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="c1"># im.SetOrigin(0,0,0)</span>
    <span class="n">im</span><span class="o">.</span><span class="n">SetSpacing</span><span class="p">(</span><span class="n">voxsz</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">voxsz</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">voxsz</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

    <span class="n">vtk_type</span> <span class="o">=</span> <span class="n">numpy_support</span><span class="o">.</span><span class="n">get_vtk_array_type</span><span class="p">(</span><span class="n">vol</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
    <span class="n">im</span><span class="o">.</span><span class="n">AllocateScalars</span><span class="p">(</span><span class="n">vtk_type</span><span class="p">,</span> <span class="n">nb_components</span><span class="p">)</span>
    <span class="c1"># im.AllocateScalars(VTK_UNSIGNED_CHAR, nb_components)</span>

    <span class="c1"># copy data</span>
    <span class="c1"># what I do below is the same as what is</span>
    <span class="c1"># commented here but much faster</span>
    <span class="c1"># for index in ndindex(vol.shape):</span>
    <span class="c1">#     i, j, k = index</span>
    <span class="c1">#     im.SetScalarComponentFromFloat(i, j, k, 0, vol[i, j, k])</span>
    <span class="n">vol</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="n">vol</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">vol</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">vol</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">nb_components</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">vol</span> <span class="o">=</span> <span class="n">vol</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">vol</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">vol</span><span class="p">,</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">vol</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">3</span><span class="p">]),</span> <span class="n">vol</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">3</span><span class="p">]])</span>

    <span class="n">uchar_array</span> <span class="o">=</span> <span class="n">numpy_support</span><span class="o">.</span><span class="n">numpy_to_vtk</span><span class="p">(</span><span class="n">vol</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">im</span><span class="o">.</span><span class="n">GetPointData</span><span class="p">()</span><span class="o">.</span><span class="n">SetScalars</span><span class="p">(</span><span class="n">uchar_array</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">affine</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">affine</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

    <span class="c1"># Set the transform (identity if none given)</span>
    <span class="n">transform</span> <span class="o">=</span> <span class="n">Transform</span><span class="p">()</span>
    <span class="n">transform_matrix</span> <span class="o">=</span> <span class="n">Matrix4x4</span><span class="p">()</span>
    <span class="n">transform_matrix</span><span class="o">.</span><span class="n">DeepCopy</span><span class="p">(</span>
        <span class="p">(</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">3</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">3</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">],</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">transform</span><span class="o">.</span><span class="n">SetMatrix</span><span class="p">(</span><span class="n">transform_matrix</span><span class="p">)</span>
    <span class="n">transform</span><span class="o">.</span><span class="n">Inverse</span><span class="p">()</span>

    <span class="c1"># Set the reslicing</span>
    <span class="n">image_resliced</span> <span class="o">=</span> <span class="n">ImageReslice</span><span class="p">()</span>
    <span class="n">set_input</span><span class="p">(</span><span class="n">image_resliced</span><span class="p">,</span> <span class="n">im</span><span class="p">)</span>
    <span class="n">image_resliced</span><span class="o">.</span><span class="n">SetResliceTransform</span><span class="p">(</span><span class="n">transform</span><span class="p">)</span>
    <span class="n">image_resliced</span><span class="o">.</span><span class="n">AutoCropOutputOn</span><span class="p">()</span>

    <span class="c1"># Adding this will allow to support anisotropic voxels</span>
    <span class="c1"># and also gives the opportunity to slice per voxel coordinates</span>
    <span class="n">RZS</span> <span class="o">=</span> <span class="n">affine</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">zooms</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">RZS</span> <span class="o">*</span> <span class="n">RZS</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">image_resliced</span><span class="o">.</span><span class="n">SetOutputSpacing</span><span class="p">(</span><span class="o">*</span><span class="n">zooms</span><span class="p">)</span>

    <span class="n">image_resliced</span><span class="o">.</span><span class="n">SetInterpolationModeToLinear</span><span class="p">()</span>
    <span class="n">image_resliced</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>

    <span class="n">vtk_resliced_data</span> <span class="o">=</span> <span class="n">image_resliced</span><span class="o">.</span><span class="n">GetOutput</span><span class="p">()</span>

    <span class="n">ex1</span><span class="p">,</span> <span class="n">ex2</span><span class="p">,</span> <span class="n">ey1</span><span class="p">,</span> <span class="n">ey2</span><span class="p">,</span> <span class="n">ez1</span><span class="p">,</span> <span class="n">ez2</span> <span class="o">=</span> <span class="n">vtk_resliced_data</span><span class="o">.</span><span class="n">GetExtent</span><span class="p">()</span>

    <span class="n">resliced</span> <span class="o">=</span> <span class="n">numpy_support</span><span class="o">.</span><span class="n">vtk_to_numpy</span><span class="p">(</span><span class="n">vtk_resliced_data</span><span class="o">.</span><span class="n">GetPointData</span><span class="p">()</span><span class="o">.</span><span class="n">GetScalars</span><span class="p">())</span>

    <span class="c1"># swap axes here</span>
    <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">resliced</span> <span class="o">=</span> <span class="n">resliced</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">ez2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ey2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ex2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">resliced</span> <span class="o">=</span> <span class="n">resliced</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">ez2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ey2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ex2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">ImActor</span><span class="p">(</span><span class="n">ImageActor</span><span class="p">):</span>
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">picker</span> <span class="o">=</span> <span class="n">CellPicker</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outline_actor</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">def</span> <span class="nf">input_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>

            <span class="c1"># outline only</span>
            <span class="n">outline</span> <span class="o">=</span> <span class="n">OutlineFilter</span><span class="p">()</span>
            <span class="n">outline</span><span class="o">.</span><span class="n">SetInputData</span><span class="p">(</span><span class="n">vtk_resliced_data</span><span class="p">)</span>
            <span class="n">outline_mapper</span> <span class="o">=</span> <span class="n">PolyDataMapper</span><span class="p">()</span>
            <span class="n">outline_mapper</span><span class="o">.</span><span class="n">SetInputConnection</span><span class="p">(</span><span class="n">outline</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outline_actor</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outline_actor</span><span class="o">.</span><span class="n">SetMapper</span><span class="p">(</span><span class="n">outline_mapper</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outline_actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetColor</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outline_actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetLineWidth</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outline_actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetRenderLinesAsTubes</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="c1"># crucial</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">GetMapper</span><span class="p">()</span><span class="o">.</span><span class="n">SetInputConnection</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="n">output</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="n">ex2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ey2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ez2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">display_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z1</span><span class="p">,</span> <span class="n">z2</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SetDisplayExtent</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z1</span><span class="p">,</span> <span class="n">z2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>
            <span class="c1"># bounds = self.GetBounds()</span>
            <span class="c1"># xmin, xmax, ymin, ymax, zmin, zmax = bounds</span>
            <span class="c1"># line = np.array([[xmin, ymin, zmin]])</span>
            <span class="c1"># self.outline_actor = actor.line()</span>

        <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">z</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">display_extent</span><span class="p">(</span><span class="n">ex1</span><span class="p">,</span> <span class="n">ex2</span><span class="p">,</span> <span class="n">ey1</span><span class="p">,</span> <span class="n">ey2</span><span class="p">,</span> <span class="n">ez2</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ez2</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">display_extent</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">ey1</span><span class="p">,</span> <span class="n">ey2</span><span class="p">,</span> <span class="n">ez1</span><span class="p">,</span> <span class="n">ez2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">display_extent</span><span class="p">(</span><span class="n">ex1</span><span class="p">,</span> <span class="n">ex2</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">ez1</span><span class="p">,</span> <span class="n">ez2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">z</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">display_extent</span><span class="p">(</span><span class="n">ex1</span><span class="p">,</span> <span class="n">ex2</span><span class="p">,</span> <span class="n">ey1</span><span class="p">,</span> <span class="n">ey2</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">resliced_array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Return resliced array as numpy array.&quot;&quot;&quot;</span>
            <span class="n">resliced</span> <span class="o">=</span> <span class="n">numpy_support</span><span class="o">.</span><span class="n">vtk_to_numpy</span><span class="p">(</span>
                <span class="n">vtk_resliced_data</span><span class="o">.</span><span class="n">GetPointData</span><span class="p">()</span><span class="o">.</span><span class="n">GetScalars</span><span class="p">()</span>
            <span class="p">)</span>

            <span class="c1"># swap axes here</span>
            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">resliced</span> <span class="o">=</span> <span class="n">resliced</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">ez2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ey2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ex2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">resliced</span> <span class="o">=</span> <span class="n">resliced</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">ez2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ey2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ex2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">resliced</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="n">resliced</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">resliced</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">resliced</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">resliced</span>

        <span class="k">def</span> <span class="nf">opacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetOpacity</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">tolerance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">picker</span><span class="o">.</span><span class="n">SetTolerance</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">im_actor</span> <span class="o">=</span> <span class="n">ImActor</span><span class="p">()</span>
            <span class="n">im_actor</span><span class="o">.</span><span class="n">input_connection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
            <span class="n">im_actor</span><span class="o">.</span><span class="n">SetDisplayExtent</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">GetDisplayExtent</span><span class="p">())</span>
            <span class="n">im_actor</span><span class="o">.</span><span class="n">opacity</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOpacity</span><span class="p">())</span>
            <span class="n">im_actor</span><span class="o">.</span><span class="n">tolerance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">picker</span><span class="o">.</span><span class="n">GetTolerance</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">interpolation</span> <span class="o">==</span> <span class="s1">&#39;nearest&#39;</span><span class="p">:</span>
                <span class="n">im_actor</span><span class="o">.</span><span class="n">SetInterpolate</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">im_actor</span><span class="o">.</span><span class="n">SetInterpolate</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">im_actor</span><span class="o">.</span><span class="n">GetMapper</span><span class="p">()</span><span class="o">.</span><span class="n">BorderOn</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">im_actor</span>

        <span class="k">def</span> <span class="nf">shallow_copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="c1"># TODO rename copy to shallow_copy</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="n">value_range</span>

    <span class="n">image_actor</span> <span class="o">=</span> <span class="n">ImActor</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">nb_components</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">lut</span> <span class="o">=</span> <span class="n">lookup_colormap</span>
        <span class="k">if</span> <span class="n">lookup_colormap</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Create a black/white lookup table.</span>
            <span class="n">lut</span> <span class="o">=</span> <span class="n">colormap_lookup_table</span><span class="p">((</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

        <span class="n">plane_colors</span> <span class="o">=</span> <span class="n">ImageMapToColors</span><span class="p">()</span>
        <span class="n">plane_colors</span><span class="o">.</span><span class="n">SetOutputFormatToRGB</span><span class="p">()</span>
        <span class="n">plane_colors</span><span class="o">.</span><span class="n">SetLookupTable</span><span class="p">(</span><span class="n">lut</span><span class="p">)</span>
        <span class="n">plane_colors</span><span class="o">.</span><span class="n">SetInputConnection</span><span class="p">(</span><span class="n">image_resliced</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">())</span>
        <span class="n">plane_colors</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>
        <span class="n">image_actor</span><span class="o">.</span><span class="n">input_connection</span><span class="p">(</span><span class="n">plane_colors</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">image_actor</span><span class="o">.</span><span class="n">input_connection</span><span class="p">(</span><span class="n">image_resliced</span><span class="p">)</span>
    <span class="n">image_actor</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
    <span class="n">image_actor</span><span class="o">.</span><span class="n">opacity</span><span class="p">(</span><span class="n">opacity</span><span class="p">)</span>
    <span class="n">image_actor</span><span class="o">.</span><span class="n">tolerance</span><span class="p">(</span><span class="n">picking_tol</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">interpolation</span> <span class="o">==</span> <span class="s1">&#39;nearest&#39;</span><span class="p">:</span>
        <span class="n">image_actor</span><span class="o">.</span><span class="n">SetInterpolate</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">image_actor</span><span class="o">.</span><span class="n">SetInterpolate</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">image_actor</span><span class="o">.</span><span class="n">GetMapper</span><span class="p">()</span><span class="o">.</span><span class="n">BorderOn</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">image_actor</span></div>


<div class="viewcode-block" id="surface"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.surface">[docs]</a><span class="k">def</span> <span class="nf">surface</span><span class="p">(</span><span class="n">vertices</span><span class="p">,</span> <span class="n">faces</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">smooth</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">subdivision</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate a surface actor from an array of vertices.</span>

<span class="sd">    The color and smoothness of the surface can be customized by specifying</span>
<span class="sd">    the type of subdivision algorithm and the number of subdivisions.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    vertices : array, shape (X, Y, Z)</span>
<span class="sd">        The point cloud defining the surface.</span>
<span class="sd">    faces : array</span>
<span class="sd">        An array of precomputed triangulation for the point cloud.</span>
<span class="sd">        It is an optional parameter, it is computed locally if None.</span>
<span class="sd">    colors : (N, 3) array</span>
<span class="sd">        Specifies the colors associated with each vertex in the</span>
<span class="sd">        vertices array. Range should be 0 to 1.</span>
<span class="sd">        Optional parameter, if not passed, all vertices</span>
<span class="sd">        are colored white.</span>
<span class="sd">    smooth : string - &quot;loop&quot; or &quot;butterfly&quot;</span>
<span class="sd">        Defines the type of subdivision to be used</span>
<span class="sd">        for smoothing the surface.</span>
<span class="sd">    subdivision : integer, default = 3</span>
<span class="sd">        Defines the number of subdivisions to do for</span>
<span class="sd">        each triangulation of the point cloud.</span>
<span class="sd">        The higher the value, smoother the surface</span>
<span class="sd">        but at the cost of higher computation.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    surface_actor : Actor</span>
<span class="sd">        An Actor visualizing the final surface</span>
<span class="sd">        computed from the point cloud is returned.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">scipy.spatial</span> <span class="kn">import</span> <span class="n">Delaunay</span>

    <span class="n">points</span> <span class="o">=</span> <span class="n">Points</span><span class="p">()</span>
    <span class="n">points</span><span class="o">.</span><span class="n">SetData</span><span class="p">(</span><span class="n">numpy_support</span><span class="o">.</span><span class="n">numpy_to_vtk</span><span class="p">(</span><span class="n">vertices</span><span class="p">))</span>
    <span class="n">triangle_poly_data</span> <span class="o">=</span> <span class="n">PolyData</span><span class="p">()</span>
    <span class="n">triangle_poly_data</span><span class="o">.</span><span class="n">SetPoints</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">triangle_poly_data</span><span class="o">.</span><span class="n">GetPointData</span><span class="p">()</span><span class="o">.</span><span class="n">SetScalars</span><span class="p">(</span><span class="n">numpy_to_vtk_colors</span><span class="p">(</span><span class="mi">255</span> <span class="o">*</span> <span class="n">colors</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">faces</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">tri</span> <span class="o">=</span> <span class="n">Delaunay</span><span class="p">(</span><span class="n">vertices</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
        <span class="n">faces</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">tri</span><span class="o">.</span><span class="n">simplices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;i8&#39;</span><span class="p">)</span>

    <span class="n">set_polydata_triangles</span><span class="p">(</span><span class="n">triangle_poly_data</span><span class="p">,</span> <span class="n">faces</span><span class="p">)</span>

    <span class="n">clean_poly_data</span> <span class="o">=</span> <span class="n">CleanPolyData</span><span class="p">()</span>
    <span class="n">clean_poly_data</span><span class="o">.</span><span class="n">SetInputData</span><span class="p">(</span><span class="n">triangle_poly_data</span><span class="p">)</span>

    <span class="n">mapper</span> <span class="o">=</span> <span class="n">PolyDataMapper</span><span class="p">()</span>
    <span class="n">surface_actor</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">smooth</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">mapper</span><span class="o">.</span><span class="n">SetInputData</span><span class="p">(</span><span class="n">triangle_poly_data</span><span class="p">)</span>
        <span class="n">surface_actor</span><span class="o">.</span><span class="n">SetMapper</span><span class="p">(</span><span class="n">mapper</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">smooth</span> <span class="o">==</span> <span class="s1">&#39;loop&#39;</span><span class="p">:</span>
        <span class="n">smooth_loop</span> <span class="o">=</span> <span class="n">LoopSubdivisionFilter</span><span class="p">()</span>
        <span class="n">smooth_loop</span><span class="o">.</span><span class="n">SetNumberOfSubdivisions</span><span class="p">(</span><span class="n">subdivision</span><span class="p">)</span>
        <span class="n">smooth_loop</span><span class="o">.</span><span class="n">SetInputConnection</span><span class="p">(</span><span class="n">clean_poly_data</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">())</span>
        <span class="n">mapper</span><span class="o">.</span><span class="n">SetInputConnection</span><span class="p">(</span><span class="n">smooth_loop</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">())</span>
        <span class="n">surface_actor</span><span class="o">.</span><span class="n">SetMapper</span><span class="p">(</span><span class="n">mapper</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">smooth</span> <span class="o">==</span> <span class="s1">&#39;butterfly&#39;</span><span class="p">:</span>
        <span class="n">smooth_butterfly</span> <span class="o">=</span> <span class="n">ButterflySubdivisionFilter</span><span class="p">()</span>
        <span class="n">smooth_butterfly</span><span class="o">.</span><span class="n">SetNumberOfSubdivisions</span><span class="p">(</span><span class="n">subdivision</span><span class="p">)</span>
        <span class="n">smooth_butterfly</span><span class="o">.</span><span class="n">SetInputConnection</span><span class="p">(</span><span class="n">clean_poly_data</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">())</span>
        <span class="n">mapper</span><span class="o">.</span><span class="n">SetInputConnection</span><span class="p">(</span><span class="n">smooth_butterfly</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">())</span>
        <span class="n">surface_actor</span><span class="o">.</span><span class="n">SetMapper</span><span class="p">(</span><span class="n">mapper</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">surface_actor</span></div>


<div class="viewcode-block" id="contour_from_roi"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.contour_from_roi">[docs]</a><span class="k">def</span> <span class="nf">contour_from_roi</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">affine</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span> <span class="n">opacity</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate surface actor from a binary ROI.</span>

<span class="sd">    The color and opacity of the surface can be customized.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : array, shape (X, Y, Z)</span>
<span class="sd">        An ROI file that will be binarized and displayed.</span>
<span class="sd">    affine : array, shape (4, 4)</span>
<span class="sd">        Grid to space (usually RAS 1mm) transformation matrix. Default is None.</span>
<span class="sd">        If None then the identity matrix is used.</span>
<span class="sd">    color : (1, 3) ndarray</span>
<span class="sd">        RGB values in [0,1].</span>
<span class="sd">    opacity : float</span>
<span class="sd">        Opacity of surface between 0 and 1.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    contour_assembly : vtkAssembly</span>
<span class="sd">        ROI surface object displayed in space</span>
<span class="sd">        coordinates as calculated by the affine parameter.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Only 3D arrays are currently supported.&#39;</span><span class="p">)</span>

    <span class="n">nb_components</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1</span>
    <span class="n">vol</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">xp</span><span class="o">=</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">data</span><span class="o">.</span><span class="n">max</span><span class="p">()],</span> <span class="n">fp</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">])</span>
    <span class="n">vol</span> <span class="o">=</span> <span class="n">vol</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span>

    <span class="n">im</span> <span class="o">=</span> <span class="n">ImageData</span><span class="p">()</span>
    <span class="n">di</span><span class="p">,</span> <span class="n">dj</span><span class="p">,</span> <span class="n">dk</span> <span class="o">=</span> <span class="n">vol</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">im</span><span class="o">.</span><span class="n">SetDimensions</span><span class="p">(</span><span class="n">di</span><span class="p">,</span> <span class="n">dj</span><span class="p">,</span> <span class="n">dk</span><span class="p">)</span>
    <span class="n">voxsz</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="c1"># im.SetOrigin(0,0,0)</span>
    <span class="n">im</span><span class="o">.</span><span class="n">SetSpacing</span><span class="p">(</span><span class="n">voxsz</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">voxsz</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">voxsz</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">im</span><span class="o">.</span><span class="n">AllocateScalars</span><span class="p">(</span><span class="n">VTK_UNSIGNED_CHAR</span><span class="p">,</span> <span class="n">nb_components</span><span class="p">)</span>

    <span class="c1"># copy data</span>
    <span class="n">vol</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="n">vol</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">vol</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">vol</span><span class="p">)</span>

    <span class="n">vol</span> <span class="o">=</span> <span class="n">vol</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

    <span class="n">uchar_array</span> <span class="o">=</span> <span class="n">numpy_support</span><span class="o">.</span><span class="n">numpy_to_vtk</span><span class="p">(</span><span class="n">vol</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">im</span><span class="o">.</span><span class="n">GetPointData</span><span class="p">()</span><span class="o">.</span><span class="n">SetScalars</span><span class="p">(</span><span class="n">uchar_array</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">affine</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">affine</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

    <span class="c1"># Set the transform (identity if none given)</span>
    <span class="n">transform</span> <span class="o">=</span> <span class="n">Transform</span><span class="p">()</span>
    <span class="n">transform_matrix</span> <span class="o">=</span> <span class="n">Matrix4x4</span><span class="p">()</span>
    <span class="n">transform_matrix</span><span class="o">.</span><span class="n">DeepCopy</span><span class="p">(</span>
        <span class="p">(</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">3</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">3</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span>
            <span class="n">affine</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">],</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">transform</span><span class="o">.</span><span class="n">SetMatrix</span><span class="p">(</span><span class="n">transform_matrix</span><span class="p">)</span>
    <span class="n">transform</span><span class="o">.</span><span class="n">Inverse</span><span class="p">()</span>

    <span class="c1"># Set the reslicing</span>
    <span class="n">image_resliced</span> <span class="o">=</span> <span class="n">ImageReslice</span><span class="p">()</span>
    <span class="n">set_input</span><span class="p">(</span><span class="n">image_resliced</span><span class="p">,</span> <span class="n">im</span><span class="p">)</span>
    <span class="n">image_resliced</span><span class="o">.</span><span class="n">SetResliceTransform</span><span class="p">(</span><span class="n">transform</span><span class="p">)</span>
    <span class="n">image_resliced</span><span class="o">.</span><span class="n">AutoCropOutputOn</span><span class="p">()</span>

    <span class="c1"># Adding this will allow to support anisotropic voxels</span>
    <span class="c1"># and also gives the opportunity to slice per voxel coordinates</span>

    <span class="n">rzs</span> <span class="o">=</span> <span class="n">affine</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">zooms</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">rzs</span> <span class="o">*</span> <span class="n">rzs</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">image_resliced</span><span class="o">.</span><span class="n">SetOutputSpacing</span><span class="p">(</span><span class="o">*</span><span class="n">zooms</span><span class="p">)</span>

    <span class="n">image_resliced</span><span class="o">.</span><span class="n">SetInterpolationModeToLinear</span><span class="p">()</span>
    <span class="n">image_resliced</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>

    <span class="n">skin_extractor</span> <span class="o">=</span> <span class="n">ContourFilter</span><span class="p">()</span>
    <span class="n">skin_extractor</span><span class="o">.</span><span class="n">SetInputData</span><span class="p">(</span><span class="n">image_resliced</span><span class="o">.</span><span class="n">GetOutput</span><span class="p">())</span>

    <span class="n">skin_extractor</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">skin_normals</span> <span class="o">=</span> <span class="n">PolyDataNormals</span><span class="p">()</span>
    <span class="n">skin_normals</span><span class="o">.</span><span class="n">SetInputConnection</span><span class="p">(</span><span class="n">skin_extractor</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">())</span>
    <span class="n">skin_normals</span><span class="o">.</span><span class="n">SetFeatureAngle</span><span class="p">(</span><span class="mf">60.0</span><span class="p">)</span>

    <span class="n">skin_mapper</span> <span class="o">=</span> <span class="n">PolyDataMapper</span><span class="p">()</span>
    <span class="n">skin_mapper</span><span class="o">.</span><span class="n">SetInputConnection</span><span class="p">(</span><span class="n">skin_normals</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">())</span>
    <span class="n">skin_mapper</span><span class="o">.</span><span class="n">ScalarVisibilityOff</span><span class="p">()</span>

    <span class="n">skin_actor</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">()</span>

    <span class="n">skin_actor</span><span class="o">.</span><span class="n">SetMapper</span><span class="p">(</span><span class="n">skin_mapper</span><span class="p">)</span>
    <span class="n">skin_actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetColor</span><span class="p">(</span><span class="n">color</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">skin_actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetOpacity</span><span class="p">(</span><span class="n">opacity</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">skin_actor</span></div>


<div class="viewcode-block" id="contour_from_label"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.contour_from_label">[docs]</a><span class="k">def</span> <span class="nf">contour_from_label</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">affine</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate surface actor from a labeled Array.</span>

<span class="sd">    The color and opacity of individual surfaces can be customized.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : array, shape (X, Y, Z)</span>
<span class="sd">        A labeled array file that will be binarized and displayed.</span>
<span class="sd">    affine : array, shape (4, 4)</span>
<span class="sd">        Grid to space (usually RAS 1mm) transformation matrix. Default is None.</span>
<span class="sd">        If None then the identity matrix is used.</span>
<span class="sd">    color : (N, 3) or (N, 4) ndarray</span>
<span class="sd">        RGB/RGBA values in [0,1]. Default is None.</span>
<span class="sd">        If None then random colors are used.</span>
<span class="sd">        Alpha channel is set to 1 by default.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    contour_assembly : vtkAssembly</span>
<span class="sd">        Array surface object displayed in space</span>
<span class="sd">        coordinates as calculated by the affine parameter</span>
<span class="sd">        in the order of their roi ids.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">unique_roi_id</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>

    <span class="n">nb_surfaces</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_roi_id</span><span class="p">)</span>

    <span class="n">unique_roi_surfaces</span> <span class="o">=</span> <span class="n">Assembly</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">nb_surfaces</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">color</span><span class="o">.</span><span class="n">shape</span> <span class="o">!=</span> <span class="p">(</span><span class="n">nb_surfaces</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="ow">and</span> <span class="n">color</span><span class="o">.</span><span class="n">shape</span> <span class="o">!=</span> <span class="p">(</span><span class="n">nb_surfaces</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Incorrect color array shape&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">color</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">nb_surfaces</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
        <span class="n">opacity</span> <span class="o">=</span> <span class="n">color</span><span class="p">[:,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">color</span><span class="p">[:,</span> <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">opacity</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">nb_surfaces</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">roi_id</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">unique_roi_id</span><span class="p">):</span>
        <span class="n">roi_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">roi_id</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
        <span class="n">roi_surface</span> <span class="o">=</span> <span class="n">contour_from_roi</span><span class="p">(</span>
            <span class="n">roi_data</span><span class="p">,</span> <span class="n">affine</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">unique_roi_surfaces</span><span class="o">.</span><span class="n">AddPart</span><span class="p">(</span><span class="n">roi_surface</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">unique_roi_surfaces</span></div>


<div class="viewcode-block" id="streamtube"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.streamtube">[docs]</a><span class="k">def</span> <span class="nf">streamtube</span><span class="p">(</span>
    <span class="n">lines</span><span class="p">,</span>
    <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
    <span class="n">tube_sides</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span>
    <span class="n">lod</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">lod_points</span><span class="o">=</span><span class="mi">10</span><span class="o">**</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">lod_points_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">spline_subdiv</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">lookup_colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">replace_strips</span><span class="o">=</span><span class="kc">False</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Use streamtubes to visualize polylines.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    lines : list</span>
<span class="sd">        list of N curves represented as 2D ndarrays</span>
<span class="sd">    colors : array (N, 3), list of arrays, tuple (3,), array (K,)</span>
<span class="sd">        If None or False, a standard orientation colormap is used for every</span>
<span class="sd">        line.</span>
<span class="sd">        If one tuple of color is used. Then all streamlines will have the same</span>
<span class="sd">        colour.</span>
<span class="sd">        If an array (N, 3) is given, where N is equal to the number of lines.</span>
<span class="sd">        Then every line is coloured with a different RGB color.</span>
<span class="sd">        If a list of RGB arrays is given then every point of every line takes</span>
<span class="sd">        a different color.</span>
<span class="sd">        If an array (K, 3) is given, where K is the number of points of all</span>
<span class="sd">        lines then every point is colored with a different RGB color.</span>
<span class="sd">        If an array (K,) is given, where K is the number of points of all</span>
<span class="sd">        lines then these are considered as the values to be used by the</span>
<span class="sd">        colormap.</span>
<span class="sd">        If an array (L,) is given, where L is the number of streamlines then</span>
<span class="sd">        these are considered as the values to be used by the colormap per</span>
<span class="sd">        streamline.</span>
<span class="sd">        If an array (X, Y, Z) or (X, Y, Z, 3) is given then the values for the</span>
<span class="sd">        colormap are interpolated automatically using trilinear interpolation.</span>
<span class="sd">    opacity : float, optional</span>
<span class="sd">        Takes values from 0 (fully transparent) to 1 (opaque). Default is 1.</span>
<span class="sd">    linewidth : float, optional</span>
<span class="sd">        Default is 0.01.</span>
<span class="sd">    tube_sides : int, optional</span>
<span class="sd">        Default is 9.</span>
<span class="sd">    lod : bool, optional</span>
<span class="sd">        Use LODActor(level of detail) rather than Actor. Default is True.</span>
<span class="sd">        Level of detail actors do not render the full geometry when the</span>
<span class="sd">        frame rate is low.</span>
<span class="sd">    lod_points : int, optional</span>
<span class="sd">        Number of points to be used when LOD is in effect. Default is 10000.</span>
<span class="sd">    lod_points_size : int, optional</span>
<span class="sd">        Size of points when lod is in effect. Default is 3.</span>
<span class="sd">    spline_subdiv : int, optional</span>
<span class="sd">        Number of splines subdivision to smooth streamtubes. Default is None.</span>
<span class="sd">    lookup_colormap : vtkLookupTable, optional</span>
<span class="sd">        Add a default lookup table to the colormap. Default is None which calls</span>
<span class="sd">        :func:`fury.actor.colormap_lookup_table`.</span>
<span class="sd">    replace_strips : bool, optional</span>
<span class="sd">        If True it changes streamtube representation from triangle strips to</span>
<span class="sd">        triangles. Useful with SelectionManager or PickingManager.</span>
<span class="sd">        Default False.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; import numpy as np</span>
<span class="sd">    &gt;&gt;&gt; from fury import actor, window</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; lines = [np.random.rand(10, 3), np.random.rand(20, 3)]</span>
<span class="sd">    &gt;&gt;&gt; colors = np.random.rand(2, 3)</span>
<span class="sd">    &gt;&gt;&gt; c = actor.streamtube(lines, colors)</span>
<span class="sd">    &gt;&gt;&gt; scene.add(c)</span>
<span class="sd">    &gt;&gt;&gt; #window.show(scene)</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Streamtubes can be heavy on GPU when loading many streamlines and</span>
<span class="sd">    therefore, you may experience slow rendering time depending on system GPU.</span>
<span class="sd">    A solution to this problem is to reduce the number of points in each</span>
<span class="sd">    streamline. In Dipy we provide an algorithm that will reduce the number of</span>
<span class="sd">    points on the straighter parts of the streamline but keep more points on</span>
<span class="sd">    the curvier parts. This can be used in the following way::</span>

<span class="sd">        from dipy.tracking.distances import approx_polygon_track</span>
<span class="sd">        lines = [approx_polygon_track(line, 0.2) for line in lines]</span>

<span class="sd">    Alternatively we suggest using the ``line`` actor which is much more</span>
<span class="sd">    efficient.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    :func:`fury.actor.line`</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Poly data with lines and colors</span>
    <span class="n">poly_data</span><span class="p">,</span> <span class="n">color_is_scalar</span> <span class="o">=</span> <span class="n">lines_to_vtk_polydata</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>
    <span class="n">next_input</span> <span class="o">=</span> <span class="n">poly_data</span>

    <span class="c1"># set primitives count</span>
    <span class="n">prim_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
    <span class="n">set_polydata_primitives_count</span><span class="p">(</span><span class="n">poly_data</span><span class="p">,</span> <span class="n">prim_count</span><span class="p">)</span>

    <span class="c1"># Set Normals</span>
    <span class="n">poly_normals</span> <span class="o">=</span> <span class="n">set_input</span><span class="p">(</span><span class="n">PolyDataNormals</span><span class="p">(),</span> <span class="n">next_input</span><span class="p">)</span>
    <span class="n">poly_normals</span><span class="o">.</span><span class="n">ComputeCellNormalsOn</span><span class="p">()</span>
    <span class="n">poly_normals</span><span class="o">.</span><span class="n">ComputePointNormalsOn</span><span class="p">()</span>
    <span class="n">poly_normals</span><span class="o">.</span><span class="n">ConsistencyOn</span><span class="p">()</span>
    <span class="n">poly_normals</span><span class="o">.</span><span class="n">AutoOrientNormalsOn</span><span class="p">()</span>
    <span class="n">poly_normals</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>
    <span class="n">next_input</span> <span class="o">=</span> <span class="n">poly_normals</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">()</span>

    <span class="c1"># Spline interpolation</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">spline_subdiv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">spline_subdiv</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
        <span class="n">spline_filter</span> <span class="o">=</span> <span class="n">set_input</span><span class="p">(</span><span class="n">SplineFilter</span><span class="p">(),</span> <span class="n">next_input</span><span class="p">)</span>
        <span class="n">spline_filter</span><span class="o">.</span><span class="n">SetSubdivideToSpecified</span><span class="p">()</span>
        <span class="n">spline_filter</span><span class="o">.</span><span class="n">SetNumberOfSubdivisions</span><span class="p">(</span><span class="n">spline_subdiv</span><span class="p">)</span>
        <span class="n">spline_filter</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>
        <span class="n">next_input</span> <span class="o">=</span> <span class="n">spline_filter</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">()</span>

    <span class="c1"># Add thickness to the resulting lines</span>
    <span class="n">tube_filter</span> <span class="o">=</span> <span class="n">set_input</span><span class="p">(</span><span class="n">TubeFilter</span><span class="p">(),</span> <span class="n">next_input</span><span class="p">)</span>
    <span class="n">tube_filter</span><span class="o">.</span><span class="n">SetNumberOfSides</span><span class="p">(</span><span class="n">tube_sides</span><span class="p">)</span>
    <span class="n">tube_filter</span><span class="o">.</span><span class="n">SetRadius</span><span class="p">(</span><span class="n">linewidth</span><span class="p">)</span>
    <span class="c1"># TODO using the line above we will be able to visualize</span>
    <span class="c1"># streamtubes of varying radius</span>
    <span class="c1"># tube_filter.SetVaryRadiusToVaryRadiusByScalar()</span>
    <span class="n">tube_filter</span><span class="o">.</span><span class="n">CappingOn</span><span class="p">()</span>
    <span class="n">tube_filter</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>
    <span class="n">next_input</span> <span class="o">=</span> <span class="n">tube_filter</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">()</span>

    <span class="c1"># Poly mapper</span>
    <span class="n">poly_mapper</span> <span class="o">=</span> <span class="n">set_input</span><span class="p">(</span><span class="n">PolyDataMapper</span><span class="p">(),</span> <span class="n">next_input</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">replace_strips</span><span class="p">:</span>
        <span class="n">triangle_filter</span> <span class="o">=</span> <span class="n">set_input</span><span class="p">(</span><span class="n">TriangleFilter</span><span class="p">(),</span> <span class="n">next_input</span><span class="p">)</span>
        <span class="n">poly_mapper</span> <span class="o">=</span> <span class="n">set_input</span><span class="p">(</span><span class="n">PolyDataMapper</span><span class="p">(),</span> <span class="n">triangle_filter</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">())</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">poly_mapper</span> <span class="o">=</span> <span class="n">set_input</span><span class="p">(</span><span class="n">PolyDataMapper</span><span class="p">(),</span> <span class="n">next_input</span><span class="p">)</span>
    <span class="n">poly_mapper</span><span class="o">.</span><span class="n">ScalarVisibilityOn</span><span class="p">()</span>
    <span class="n">poly_mapper</span><span class="o">.</span><span class="n">SetScalarModeToUsePointFieldData</span><span class="p">()</span>
    <span class="n">poly_mapper</span><span class="o">.</span><span class="n">SelectColorArray</span><span class="p">(</span><span class="s1">&#39;colors&#39;</span><span class="p">)</span>
    <span class="n">poly_mapper</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>

    <span class="c1"># Color Scale with a lookup table</span>
    <span class="k">if</span> <span class="n">color_is_scalar</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">lookup_colormap</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">lookup_colormap</span> <span class="o">=</span> <span class="n">colormap_lookup_table</span><span class="p">()</span>
        <span class="n">poly_mapper</span><span class="o">.</span><span class="n">SetLookupTable</span><span class="p">(</span><span class="n">lookup_colormap</span><span class="p">)</span>
        <span class="n">poly_mapper</span><span class="o">.</span><span class="n">UseLookupTableScalarRangeOn</span><span class="p">()</span>
        <span class="n">poly_mapper</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>

    <span class="c1"># Set Actor</span>
    <span class="k">if</span> <span class="n">lod</span><span class="p">:</span>
        <span class="n">actor</span> <span class="o">=</span> <span class="n">LODActor</span><span class="p">()</span>
        <span class="n">actor</span><span class="o">.</span><span class="n">SetNumberOfCloudPoints</span><span class="p">(</span><span class="n">lod_points</span><span class="p">)</span>
        <span class="n">actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetPointSize</span><span class="p">(</span><span class="n">lod_points_size</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">actor</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">()</span>

    <span class="n">actor</span><span class="o">.</span><span class="n">SetMapper</span><span class="p">(</span><span class="n">poly_mapper</span><span class="p">)</span>

    <span class="n">actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetInterpolationToPhong</span><span class="p">()</span>
    <span class="n">actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">BackfaceCullingOn</span><span class="p">()</span>
    <span class="n">actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetOpacity</span><span class="p">(</span><span class="n">opacity</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">actor</span></div>


<div class="viewcode-block" id="line"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.line">[docs]</a><span class="k">def</span> <span class="nf">line</span><span class="p">(</span>
    <span class="n">lines</span><span class="p">,</span>
    <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">spline_subdiv</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">lod</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">lod_points</span><span class="o">=</span><span class="mi">10</span><span class="o">**</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">lod_points_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">lookup_colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">depth_cue</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">fake_tube</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create an actor for one or more lines.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    lines :  list of arrays</span>
<span class="sd">    colors : array (N, 3), list of arrays, tuple (3,), array (K,)</span>
<span class="sd">        If None or False, a standard orientation colormap is used for every</span>
<span class="sd">        line.</span>
<span class="sd">        If one tuple of color is used. Then all streamlines will have the same</span>
<span class="sd">        colour.</span>
<span class="sd">        If an array (N, 3) is given, where N is equal to the number of lines.</span>
<span class="sd">        Then every line is coloured with a different RGB color.</span>
<span class="sd">        If a list of RGB arrays is given then every point of every line takes</span>
<span class="sd">        a different color.</span>
<span class="sd">        If an array (K, 3) is given, where K is the number of points of all</span>
<span class="sd">        lines then every point is colored with a different RGB color.</span>
<span class="sd">        If an array (K,) is given, where K is the number of points of all</span>
<span class="sd">        lines then these are considered as the values to be used by the</span>
<span class="sd">        colormap.</span>
<span class="sd">        If an array (L,) is given, where L is the number of streamlines then</span>
<span class="sd">        these are considered as the values to be used by the colormap per</span>
<span class="sd">        streamline.</span>
<span class="sd">        If an array (X, Y, Z) or (X, Y, Z, 3) is given then the values for the</span>
<span class="sd">        colormap are interpolated automatically using trilinear interpolation.</span>
<span class="sd">    opacity : float, optional</span>
<span class="sd">        Takes values from 0 (fully transparent) to 1 (opaque). Default is 1.</span>
<span class="sd">    linewidth : float, optional</span>
<span class="sd">        Line thickness. Default is 1.</span>
<span class="sd">    spline_subdiv : int, optional</span>
<span class="sd">        Number of splines subdivision to smooth streamtubes. Default is None</span>
<span class="sd">        which means no subdivision.</span>
<span class="sd">    lod : bool, optional</span>
<span class="sd">        Use LODActor(level of detail) rather than Actor. Default is True.</span>
<span class="sd">        Level of detail actors do not render the full geometry when the</span>
<span class="sd">        frame rate is low.</span>
<span class="sd">    lod_points : int, optional</span>
<span class="sd">        Number of points to be used when LOD is in effect. Default is 10000.</span>
<span class="sd">    lod_points_size : int</span>
<span class="sd">        Size of points when lod is in effect. Default is 3.</span>
<span class="sd">    lookup_colormap : vtkLookupTable, optional</span>
<span class="sd">        Add a default lookup table to the colormap. Default is None which calls</span>
<span class="sd">        :func:`fury.actor.colormap_lookup_table`.</span>
<span class="sd">    depth_cue : boolean, optional</span>
<span class="sd">        Add a size depth cue so that lines shrink with distance to the camera.</span>
<span class="sd">        Works best with linewidth &lt;= 1.</span>
<span class="sd">    fake_tube: boolean, optional</span>
<span class="sd">        Add shading to lines to approximate the look of tubes.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    v : Actor or LODActor object</span>
<span class="sd">        Line.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from fury import actor, window</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; lines = [np.random.rand(10, 3), np.random.rand(20, 3)]</span>
<span class="sd">    &gt;&gt;&gt; colors = np.random.rand(2, 3)</span>
<span class="sd">    &gt;&gt;&gt; c = actor.line(lines, colors)</span>
<span class="sd">    &gt;&gt;&gt; scene.add(c)</span>
<span class="sd">    &gt;&gt;&gt; #window.show(scene)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Poly data with lines and colors</span>
    <span class="n">poly_data</span><span class="p">,</span> <span class="n">color_is_scalar</span> <span class="o">=</span> <span class="n">lines_to_vtk_polydata</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>
    <span class="n">next_input</span> <span class="o">=</span> <span class="n">poly_data</span>

    <span class="c1"># set primitives count</span>
    <span class="n">prim_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
    <span class="n">set_polydata_primitives_count</span><span class="p">(</span><span class="n">poly_data</span><span class="p">,</span> <span class="n">prim_count</span><span class="p">)</span>

    <span class="c1"># use spline interpolation</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">spline_subdiv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">spline_subdiv</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
        <span class="n">spline_filter</span> <span class="o">=</span> <span class="n">set_input</span><span class="p">(</span><span class="n">SplineFilter</span><span class="p">(),</span> <span class="n">next_input</span><span class="p">)</span>
        <span class="n">spline_filter</span><span class="o">.</span><span class="n">SetSubdivideToSpecified</span><span class="p">()</span>
        <span class="n">spline_filter</span><span class="o">.</span><span class="n">SetNumberOfSubdivisions</span><span class="p">(</span><span class="n">spline_subdiv</span><span class="p">)</span>
        <span class="n">spline_filter</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>
        <span class="n">next_input</span> <span class="o">=</span> <span class="n">spline_filter</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">()</span>

    <span class="n">poly_mapper</span> <span class="o">=</span> <span class="n">set_input</span><span class="p">(</span><span class="n">PolyDataMapper</span><span class="p">(),</span> <span class="n">next_input</span><span class="p">)</span>
    <span class="n">poly_mapper</span><span class="o">.</span><span class="n">ScalarVisibilityOn</span><span class="p">()</span>
    <span class="n">poly_mapper</span><span class="o">.</span><span class="n">SetScalarModeToUsePointFieldData</span><span class="p">()</span>
    <span class="n">poly_mapper</span><span class="o">.</span><span class="n">SelectColorArray</span><span class="p">(</span><span class="s1">&#39;colors&#39;</span><span class="p">)</span>
    <span class="n">poly_mapper</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>

    <span class="c1"># Color Scale with a lookup table</span>
    <span class="k">if</span> <span class="n">color_is_scalar</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">lookup_colormap</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">lookup_colormap</span> <span class="o">=</span> <span class="n">colormap_lookup_table</span><span class="p">()</span>

        <span class="n">poly_mapper</span><span class="o">.</span><span class="n">SetLookupTable</span><span class="p">(</span><span class="n">lookup_colormap</span><span class="p">)</span>
        <span class="n">poly_mapper</span><span class="o">.</span><span class="n">UseLookupTableScalarRangeOn</span><span class="p">()</span>
        <span class="n">poly_mapper</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>

    <span class="c1"># Set Actor</span>
    <span class="k">if</span> <span class="n">lod</span><span class="p">:</span>
        <span class="n">actor</span> <span class="o">=</span> <span class="n">LODActor</span><span class="p">()</span>
        <span class="n">actor</span><span class="o">.</span><span class="n">SetNumberOfCloudPoints</span><span class="p">(</span><span class="n">lod_points</span><span class="p">)</span>
        <span class="n">actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetPointSize</span><span class="p">(</span><span class="n">lod_points_size</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">actor</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">()</span>

    <span class="n">actor</span><span class="o">.</span><span class="n">SetMapper</span><span class="p">(</span><span class="n">poly_mapper</span><span class="p">)</span>
    <span class="n">actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetLineWidth</span><span class="p">(</span><span class="n">linewidth</span><span class="p">)</span>
    <span class="n">actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetOpacity</span><span class="p">(</span><span class="n">opacity</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">depth_cue</span><span class="p">:</span>

        <span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">_caller</span><span class="p">,</span> <span class="n">_event</span><span class="p">,</span> <span class="n">calldata</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="n">program</span> <span class="o">=</span> <span class="n">calldata</span>
            <span class="k">if</span> <span class="n">program</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">program</span><span class="o">.</span><span class="n">SetUniformf</span><span class="p">(</span><span class="s1">&#39;linewidth&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="p">)</span>

        <span class="n">replace_shader_in_actor</span><span class="p">(</span><span class="n">actor</span><span class="p">,</span> <span class="s1">&#39;geometry&#39;</span><span class="p">,</span> <span class="n">import_fury_shader</span><span class="p">(</span><span class="s1">&#39;line.geom&#39;</span><span class="p">))</span>
        <span class="n">add_shader_callback</span><span class="p">(</span><span class="n">actor</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">fake_tube</span><span class="p">:</span>
        <span class="n">actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetRenderLinesAsTubes</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">actor</span></div>


<div class="viewcode-block" id="scalar_bar"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.scalar_bar">[docs]</a><span class="k">def</span> <span class="nf">scalar_bar</span><span class="p">(</span><span class="n">lookup_table</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Default scalar bar actor for a given colormap (colorbar).</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    lookup_table : vtkLookupTable or None</span>
<span class="sd">        If None then ``colormap_lookup_table`` is called with default options.</span>
<span class="sd">    title : str</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    scalar_bar : vtkScalarBarActor</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    :func:`fury.actor.colormap_lookup_table`</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lookup_table_copy</span> <span class="o">=</span> <span class="n">LookupTable</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">lookup_table</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">lookup_table</span> <span class="o">=</span> <span class="n">colormap_lookup_table</span><span class="p">()</span>
    <span class="c1"># Deepcopy the lookup_table because sometimes vtkPolyDataMapper deletes it</span>
    <span class="n">lookup_table_copy</span><span class="o">.</span><span class="n">DeepCopy</span><span class="p">(</span><span class="n">lookup_table</span><span class="p">)</span>
    <span class="n">scalar_bar</span> <span class="o">=</span> <span class="n">ScalarBarActor</span><span class="p">()</span>
    <span class="n">scalar_bar</span><span class="o">.</span><span class="n">SetTitle</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">scalar_bar</span><span class="o">.</span><span class="n">SetLookupTable</span><span class="p">(</span><span class="n">lookup_table_copy</span><span class="p">)</span>
    <span class="n">scalar_bar</span><span class="o">.</span><span class="n">SetNumberOfLabels</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">scalar_bar</span></div>


<div class="viewcode-block" id="axes"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.axes">[docs]</a><span class="k">def</span> <span class="nf">axes</span><span class="p">(</span>
    <span class="n">scale</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">colorx</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">colory</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">colorz</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">opacity</span><span class="o">=</span><span class="mi">1</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create an actor with the coordinate&#39;s system axes where</span>
<span class="sd">    red = x, green = y, blue = z.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    scale : tuple (3,)</span>
<span class="sd">        Axes size e.g. (100, 100, 100). Default is (1, 1, 1).</span>
<span class="sd">    colorx : tuple (3,)</span>
<span class="sd">        x-axis color. Default red (1, 0, 0).</span>
<span class="sd">    colory : tuple (3,)</span>
<span class="sd">        y-axis color. Default green (0, 1, 0).</span>
<span class="sd">    colorz : tuple (3,)</span>
<span class="sd">        z-axis color. Default blue (0, 0, 1).</span>
<span class="sd">    opacity : float, optional</span>
<span class="sd">        Takes values from 0 (fully transparent) to 1 (opaque). Default is 1.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    arrow_actor: Actor</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">centers</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
    <span class="n">dirs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">colorx</span> <span class="o">+</span> <span class="p">(</span><span class="n">opacity</span><span class="p">,),</span> <span class="n">colory</span> <span class="o">+</span> <span class="p">(</span><span class="n">opacity</span><span class="p">,),</span> <span class="n">colorz</span> <span class="o">+</span> <span class="p">(</span><span class="n">opacity</span><span class="p">,)])</span>

    <span class="n">scales</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">scale</span><span class="p">)</span>
    <span class="n">arrow_actor</span> <span class="o">=</span> <span class="n">arrow</span><span class="p">(</span><span class="n">centers</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">scales</span><span class="p">,</span> <span class="n">repeat_primitive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">arrow_actor</span></div>


<div class="viewcode-block" id="odf_slicer"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.odf_slicer">[docs]</a><span class="k">def</span> <span class="nf">odf_slicer</span><span class="p">(</span>
    <span class="n">odfs</span><span class="p">,</span>
    <span class="n">affine</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">sphere</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
    <span class="n">norm</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">radial_scale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">global_cm</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">B_matrix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create an actor for rendering a grid of ODFs given an array of</span>
<span class="sd">    spherical function (SF) or spherical harmonics (SH) coefficients.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    odfs : ndarray</span>
<span class="sd">        4D ODFs array in SF or SH coefficients. If SH coefficients,</span>
<span class="sd">        `B_matrix` must be supplied.</span>
<span class="sd">    affine : array</span>
<span class="sd">        4x4 transformation array from native coordinates to world coordinates.</span>
<span class="sd">    mask : ndarray</span>
<span class="sd">        3D mask to apply to ODF field.</span>
<span class="sd">    sphere : dipy Sphere</span>
<span class="sd">        The sphere used for SH to SF projection. If None, a default sphere</span>
<span class="sd">        of 100 vertices will be used.</span>
<span class="sd">    scale : float</span>
<span class="sd">        Multiplicative factor to apply to ODF amplitudes.</span>
<span class="sd">    norm : bool</span>
<span class="sd">        Normalize SF amplitudes so that the maximum</span>
<span class="sd">        ODF amplitude per voxel along a direction is 1.</span>
<span class="sd">    radial_scale : bool</span>
<span class="sd">        Scale sphere points by ODF values.</span>
<span class="sd">    opacity : float</span>
<span class="sd">        Takes values from 0 (fully transparent) to 1 (opaque).</span>
<span class="sd">    colormap : None or str or tuple</span>
<span class="sd">        The name of the colormap to use. Matplotlib colormaps are supported</span>
<span class="sd">        (e.g., &#39;inferno&#39;). A plain color can be supplied as a RGB tuple in</span>
<span class="sd">        range [0, 255]. If None then a RGB colormap is used.</span>
<span class="sd">    global_cm : bool</span>
<span class="sd">        If True the colormap will be applied in all ODFs. If False</span>
<span class="sd">        it will be applied individually at each voxel.</span>
<span class="sd">    B_matrix : ndarray (n_coeffs, n_vertices)</span>
<span class="sd">        Optional SH to SF matrix for projecting `odfs` given in SH</span>
<span class="sd">        coefficients on the `sphere`. If None, then the input is assumed</span>
<span class="sd">        to be expressed in SF coefficients.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    actor : OdfSlicerActor</span>
<span class="sd">        Actor representing the ODF field.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># first we check if the input array is 4D</span>
    <span class="n">n_dims</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">odfs</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n_dims</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s1">&#39;Invalid number of dimensions for odfs. Expected 4 &#39;</span>
            <span class="s1">&#39;dimensions, got </span><span class="si">{0}</span><span class="s1"> dimensions.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n_dims</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="c1"># we generate indices for all nonzero voxels</span>
    <span class="n">valid_odf_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">odfs</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.0</span>
    <span class="k">if</span> <span class="n">mask</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">valid_odf_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="n">valid_odf_mask</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span>
    <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">valid_odf_mask</span><span class="p">)</span>
    <span class="n">shape</span> <span class="o">=</span> <span class="n">odfs</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">sphere</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Use a default sphere with 100 vertices</span>
        <span class="n">vertices</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">prim_sphere</span><span class="p">(</span><span class="s1">&#39;repulsion100&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">vertices</span> <span class="o">=</span> <span class="n">sphere</span><span class="o">.</span><span class="n">vertices</span>
        <span class="n">faces</span> <span class="o">=</span> <span class="n">fix_winding_order</span><span class="p">(</span><span class="n">vertices</span><span class="p">,</span> <span class="n">sphere</span><span class="o">.</span><span class="n">faces</span><span class="p">,</span> <span class="n">clockwise</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">B_matrix</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span> <span class="o">!=</span> <span class="n">odfs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Invalid number of SF coefficients. &#39;</span>
                <span class="s1">&#39;Expected </span><span class="si">{0}</span><span class="s1">, got </span><span class="si">{1}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">),</span> <span class="n">odfs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span> <span class="o">!=</span> <span class="n">B_matrix</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Invalid number of SH coefficients. &#39;</span>
                <span class="s1">&#39;Expected </span><span class="si">{0}</span><span class="s1">, got </span><span class="si">{1}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">),</span> <span class="n">B_matrix</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="p">)</span>

    <span class="c1"># create and return an instance of OdfSlicerActor</span>
    <span class="k">return</span> <span class="n">OdfSlicerActor</span><span class="p">(</span>
        <span class="n">odfs</span><span class="p">[</span><span class="n">indices</span><span class="p">],</span>
        <span class="n">vertices</span><span class="p">,</span>
        <span class="n">faces</span><span class="p">,</span>
        <span class="n">indices</span><span class="p">,</span>
        <span class="n">scale</span><span class="p">,</span>
        <span class="n">norm</span><span class="p">,</span>
        <span class="n">radial_scale</span><span class="p">,</span>
        <span class="n">shape</span><span class="p">,</span>
        <span class="n">global_cm</span><span class="p">,</span>
        <span class="n">colormap</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">,</span>
        <span class="n">affine</span><span class="p">,</span>
        <span class="n">B_matrix</span><span class="p">,</span>
    <span class="p">)</span></div>


<span class="k">def</span> <span class="nf">_makeNd</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">ndim</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Pad as many 1s at the beginning of array&#39;s shape as are need to give</span>
<span class="sd">    array ndim dimensions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">new_shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)</span> <span class="o">*</span> <span class="p">(</span><span class="n">ndim</span> <span class="o">-</span> <span class="n">array</span><span class="o">.</span><span class="n">ndim</span><span class="p">)</span> <span class="o">+</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span>
    <span class="k">return</span> <span class="n">array</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">new_shape</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_roll_evals</span><span class="p">(</span><span class="n">evals</span><span class="p">,</span> <span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check evals shape.</span>

<span class="sd">    Helper function to check that the evals provided to functions calculating</span>
<span class="sd">    tensor statistics have the right shape.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    evals : array-like</span>
<span class="sd">        Eigenvalues of a diffusion tensor. shape should be (...,3).</span>
<span class="sd">    axis : int</span>
<span class="sd">        The axis of the array which contains the 3 eigenvals. Default: -1</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    evals : array-like</span>
<span class="sd">        Eigenvalues of a diffusion tensor, rolled so that the 3 eigenvals are</span>
<span class="sd">        the last axis.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">evals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Expecting 3 eigenvalues, got </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">evals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="n">evals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">rollaxis</span><span class="p">(</span><span class="n">evals</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">evals</span>


<span class="k">def</span> <span class="nf">_fa</span><span class="p">(</span><span class="n">evals</span><span class="p">,</span> <span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Return Fractional anisotropy (FA) of a diffusion tensor.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    evals : array-like</span>
<span class="sd">        Eigenvalues of a diffusion tensor.</span>
<span class="sd">    axis : int</span>
<span class="sd">        Axis of `evals` which contains 3 eigenvalues.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    fa : array</span>
<span class="sd">        Calculated FA. Range is 0 &lt;= FA &lt;= 1.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    FA is calculated using the following equation:</span>

<span class="sd">    .. math::</span>

<span class="sd">        FA = \sqrt{\frac{1}{2}\frac{(\lambda_1-\lambda_2)^2+(\lambda_1-</span>
<span class="sd">                    \lambda_3)^2+(\lambda_2-\lambda_3)^2}{\lambda_1^2+</span>
<span class="sd">                    \lambda_2^2+\lambda_3^2}}</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">evals</span> <span class="o">=</span> <span class="n">_roll_evals</span><span class="p">(</span><span class="n">evals</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
    <span class="c1"># Make sure not to get nans</span>
    <span class="n">all_zero</span> <span class="o">=</span> <span class="p">(</span><span class="n">evals</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ev1</span><span class="p">,</span> <span class="n">ev2</span><span class="p">,</span> <span class="n">ev3</span> <span class="o">=</span> <span class="n">evals</span>
    <span class="n">fa</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span>
        <span class="mf">0.5</span>
        <span class="o">*</span> <span class="p">((</span><span class="n">ev1</span> <span class="o">-</span> <span class="n">ev2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">ev2</span> <span class="o">-</span> <span class="n">ev3</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">ev3</span> <span class="o">-</span> <span class="n">ev1</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
        <span class="o">/</span> <span class="p">((</span><span class="n">evals</span> <span class="o">*</span> <span class="n">evals</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="n">all_zero</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">fa</span>


<span class="k">def</span> <span class="nf">_color_fa</span><span class="p">(</span><span class="n">fa</span><span class="p">,</span> <span class="n">evecs</span><span class="p">):</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Color fractional anisotropy of diffusion tensor.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    fa : array-like</span>
<span class="sd">        Array of the fractional anisotropy (can be 1D, 2D or 3D).</span>
<span class="sd">    evecs : array-like</span>
<span class="sd">        eigen vectors from the tensor model.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    rgb : Array with 3 channels for each color as the last dimension.</span>
<span class="sd">        Colormap of the FA with red for the x value, y for the green</span>
<span class="sd">        value and z for the blue value.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    It is computed from the clipped FA between 0 and 1 using the following</span>
<span class="sd">    formula.</span>

<span class="sd">    .. math::</span>

<span class="sd">        rgb = abs(max(\vec{e})) \times fa</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fa</span><span class="o">.</span><span class="n">shape</span> <span class="o">!=</span> <span class="n">evecs</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="ow">or</span> <span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">!=</span> <span class="n">evecs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Wrong number of dimensions for evecs&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">evecs</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">fa</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="o">...</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>


<div class="viewcode-block" id="tensor_slicer"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.tensor_slicer">[docs]</a><span class="k">def</span> <span class="nf">tensor_slicer</span><span class="p">(</span>
    <span class="n">evals</span><span class="p">,</span>
    <span class="n">evecs</span><span class="p">,</span>
    <span class="n">affine</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">sphere</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="mf">2.2</span><span class="p">,</span>
    <span class="n">norm</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">scalar_colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Slice many tensors as ellipsoids in native or world coordinates.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    evals : (3,) or (X, 3) or (X, Y, 3) or (X, Y, Z, 3) ndarray</span>
<span class="sd">        eigenvalues</span>
<span class="sd">    evecs : (3, 3) or (X, 3, 3) or (X, Y, 3, 3) or (X, Y, Z, 3, 3) ndarray</span>
<span class="sd">        eigenvectors</span>
<span class="sd">    affine : array</span>
<span class="sd">        4x4 transformation array from native coordinates to world coordinates*</span>
<span class="sd">    mask : ndarray</span>
<span class="sd">        3D mask</span>
<span class="sd">    sphere : Sphere</span>
<span class="sd">        a sphere</span>
<span class="sd">    scale : float</span>
<span class="sd">        Distance between spheres.</span>
<span class="sd">    norm : bool</span>
<span class="sd">        Normalize `sphere_values`.</span>
<span class="sd">    opacity : float</span>
<span class="sd">        Takes values from 0 (fully transparent) to 1 (opaque). Default is 1.</span>
<span class="sd">    scalar_colors : (3,) or (X, 3) or (X, Y, 3) or (X, Y, Z, 3) ndarray</span>
<span class="sd">        RGB colors used to show the tensors</span>
<span class="sd">        Default None, color the ellipsoids using ``color_fa``</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    tensor_actor : Actor</span>
<span class="sd">        Ellipsoid</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">evals</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="n">evecs</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;Eigenvalues shape </span><span class="si">{}</span><span class="s2"> is incompatible with eigenvectors&#39; </span><span class="si">{}</span><span class="s2">.&quot;</span>
            <span class="s1">&#39; Please provide eigenvalue and&#39;</span>
            <span class="s1">&#39; eigenvector arrays that have compatible dimensions.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">evals</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">evecs</span><span class="o">.</span><span class="n">shape</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">mask</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">evals</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>

    <span class="n">szx</span><span class="p">,</span> <span class="n">szy</span><span class="p">,</span> <span class="n">szz</span> <span class="o">=</span> <span class="n">evals</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>

    <span class="k">class</span> <span class="nc">TensorSlicerActor</span><span class="p">(</span><span class="n">LODActor</span><span class="p">):</span>
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mapper</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">def</span> <span class="nf">display_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z1</span><span class="p">,</span> <span class="n">z2</span><span class="p">):</span>
            <span class="n">tmp_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">evals</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
            <span class="n">tmp_mask</span><span class="p">[</span><span class="n">x1</span> <span class="p">:</span> <span class="n">x2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y1</span> <span class="p">:</span> <span class="n">y2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">z1</span> <span class="p">:</span> <span class="n">z2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">tmp_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">bitwise_and</span><span class="p">(</span><span class="n">tmp_mask</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">mapper</span> <span class="o">=</span> <span class="n">_tensor_slicer_mapper</span><span class="p">(</span>
                <span class="n">evals</span><span class="o">=</span><span class="n">evals</span><span class="p">,</span>
                <span class="n">evecs</span><span class="o">=</span><span class="n">evecs</span><span class="p">,</span>
                <span class="n">affine</span><span class="o">=</span><span class="n">affine</span><span class="p">,</span>
                <span class="n">mask</span><span class="o">=</span><span class="n">tmp_mask</span><span class="p">,</span>
                <span class="n">sphere</span><span class="o">=</span><span class="n">sphere</span><span class="p">,</span>
                <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
                <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span>
                <span class="n">scalar_colors</span><span class="o">=</span><span class="n">scalar_colors</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SetMapper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapper</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">z</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">display_extent</span><span class="p">(</span>
                    <span class="mi">0</span><span class="p">,</span>
                    <span class="n">szx</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="mi">0</span><span class="p">,</span>
                    <span class="n">szy</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">szz</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)),</span>
                    <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">szz</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)),</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">display_extent</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">szy</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">szz</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">display_extent</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">szx</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">szz</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">z</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">display_extent</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">szx</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">szy</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>

    <span class="n">tensor_actor</span> <span class="o">=</span> <span class="n">TensorSlicerActor</span><span class="p">()</span>
    <span class="n">tensor_actor</span><span class="o">.</span><span class="n">display_extent</span><span class="p">(</span>
        <span class="mi">0</span><span class="p">,</span> <span class="n">szx</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">szy</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">szz</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)),</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">szz</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span>
    <span class="p">)</span>

    <span class="n">tensor_actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetOpacity</span><span class="p">(</span><span class="n">opacity</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">tensor_actor</span></div>


<span class="k">def</span> <span class="nf">_tensor_slicer_mapper</span><span class="p">(</span>
    <span class="n">evals</span><span class="p">,</span>
    <span class="n">evecs</span><span class="p">,</span>
    <span class="n">affine</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">sphere</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="mf">2.2</span><span class="p">,</span>
    <span class="n">norm</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">scalar_colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return Helper function for slicing tensor fields.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    evals : (3,) or (X, 3) or (X, Y, 3) or (X, Y, Z, 3) ndarray</span>
<span class="sd">        eigenvalues.</span>
<span class="sd">    evecs : (3, 3) or (X, 3, 3) or (X, Y, 3, 3) or (X, Y, Z, 3, 3) ndarray</span>
<span class="sd">        eigenvectors.</span>
<span class="sd">    affine : array</span>
<span class="sd">        4x4 transformation array from native coordinates to world coordinates.</span>
<span class="sd">    mask : ndarray</span>
<span class="sd">        3D mask.</span>
<span class="sd">    sphere : Sphere</span>
<span class="sd">        a sphere.</span>
<span class="sd">    scale : float</span>
<span class="sd">        Distance between spheres.</span>
<span class="sd">    norm : bool</span>
<span class="sd">        Normalize `sphere_values`.</span>
<span class="sd">    scalar_colors : (3,) or (X, 3) or (X, Y, 3) or (X, Y, Z, 3) ndarray</span>
<span class="sd">        RGB colors used to show the tensors</span>
<span class="sd">        Default None, color the ellipsoids using ``color_fa``</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    mapper : vtkPolyDataMapper</span>
<span class="sd">        Ellipsoid mapper</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">evals</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span> <span class="k">if</span> <span class="n">mask</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">mask</span>

    <span class="n">ijk</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">mask</span><span class="p">))</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ijk</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">affine</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ijk</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">apply_affine</span><span class="p">(</span><span class="n">affine</span><span class="p">,</span> <span class="n">ijk</span><span class="p">))</span>

    <span class="n">faces</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">sphere</span><span class="o">.</span><span class="n">faces</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">vertices</span> <span class="o">=</span> <span class="n">sphere</span><span class="o">.</span><span class="n">vertices</span>

    <span class="k">if</span> <span class="n">scalar_colors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># from dipy.reconst.dti import color_fa, fractional_anisotropy</span>
        <span class="n">cfa</span> <span class="o">=</span> <span class="n">_color_fa</span><span class="p">(</span><span class="n">_fa</span><span class="p">(</span><span class="n">evals</span><span class="p">),</span> <span class="n">evecs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cfa</span> <span class="o">=</span> <span class="n">_makeNd</span><span class="p">(</span><span class="n">scalar_colors</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

    <span class="n">cols</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">ijk</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],)</span> <span class="o">+</span> <span class="n">sphere</span><span class="o">.</span><span class="n">vertices</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;f4&#39;</span><span class="p">)</span>

    <span class="n">all_xyz</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">all_faces</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">center</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ijk</span><span class="p">):</span>
        <span class="n">ea</span> <span class="o">=</span> <span class="n">evals</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">center</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))]</span>
        <span class="k">if</span> <span class="n">norm</span><span class="p">:</span>
            <span class="n">ea</span> <span class="o">/=</span> <span class="n">ea</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="n">ea</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">ea</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>

        <span class="n">ev</span> <span class="o">=</span> <span class="n">evecs</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">center</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">ev</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">ea</span><span class="p">,</span> <span class="n">vertices</span><span class="o">.</span><span class="n">T</span><span class="p">))</span>

        <span class="n">xyz</span> <span class="o">=</span> <span class="n">xyz</span><span class="o">.</span><span class="n">T</span>
        <span class="n">all_xyz</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">scale</span> <span class="o">*</span> <span class="n">xyz</span> <span class="o">+</span> <span class="n">center</span><span class="p">)</span>
        <span class="n">all_faces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">faces</span> <span class="o">+</span> <span class="n">k</span> <span class="o">*</span> <span class="n">xyz</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="n">cols</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span>
            <span class="n">cfa</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">center</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">))],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">]</span>
        <span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;ubyte&#39;</span><span class="p">)</span>

    <span class="n">all_xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">all_xyz</span><span class="p">))</span>
    <span class="n">all_xyz_vtk</span> <span class="o">=</span> <span class="n">numpy_support</span><span class="o">.</span><span class="n">numpy_to_vtk</span><span class="p">(</span><span class="n">all_xyz</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">points</span> <span class="o">=</span> <span class="n">Points</span><span class="p">()</span>
    <span class="n">points</span><span class="o">.</span><span class="n">SetData</span><span class="p">(</span><span class="n">all_xyz_vtk</span><span class="p">)</span>

    <span class="n">all_faces</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">all_faces</span><span class="p">)</span>

    <span class="n">cols</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span>
        <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">cols</span><span class="p">,</span> <span class="p">(</span><span class="n">cols</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">cols</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">cols</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">])),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;f4&#39;</span>
    <span class="p">)</span>

    <span class="n">vtk_colors</span> <span class="o">=</span> <span class="n">numpy_support</span><span class="o">.</span><span class="n">numpy_to_vtk</span><span class="p">(</span>
        <span class="n">cols</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">array_type</span><span class="o">=</span><span class="n">VTK_UNSIGNED_CHAR</span>
    <span class="p">)</span>

    <span class="n">vtk_colors</span><span class="o">.</span><span class="n">SetName</span><span class="p">(</span><span class="s1">&#39;colors&#39;</span><span class="p">)</span>

    <span class="n">polydata</span> <span class="o">=</span> <span class="n">PolyData</span><span class="p">()</span>
    <span class="n">polydata</span><span class="o">.</span><span class="n">SetPoints</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
    <span class="n">set_polydata_triangles</span><span class="p">(</span><span class="n">polydata</span><span class="p">,</span> <span class="n">all_faces</span><span class="p">)</span>
    <span class="n">polydata</span><span class="o">.</span><span class="n">GetPointData</span><span class="p">()</span><span class="o">.</span><span class="n">SetScalars</span><span class="p">(</span><span class="n">vtk_colors</span><span class="p">)</span>

    <span class="n">mapper</span> <span class="o">=</span> <span class="n">PolyDataMapper</span><span class="p">()</span>
    <span class="n">mapper</span><span class="o">.</span><span class="n">SetInputData</span><span class="p">(</span><span class="n">polydata</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">mapper</span>


<div class="viewcode-block" id="peak_slicer"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.peak_slicer">[docs]</a><span class="k">def</span> <span class="nf">peak_slicer</span><span class="p">(</span>
    <span class="n">peaks_dirs</span><span class="p">,</span>
    <span class="n">peaks_values</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">affine</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">lod</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">lod_points</span><span class="o">=</span><span class="mi">10</span><span class="o">**</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">lod_points_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">symmetric</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visualize peak directions as given from ``peaks_from_model``.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    peaks_dirs : ndarray</span>
<span class="sd">        Peak directions. The shape of the array can be (M, 3) or (X, M, 3) or</span>
<span class="sd">        (X, Y, M, 3) or (X, Y, Z, M, 3).</span>
<span class="sd">    peaks_values : ndarray</span>
<span class="sd">        Peak values. The shape of the array can be (M, ) or (X, M) or</span>
<span class="sd">        (X, Y, M) or (X, Y, Z, M).</span>
<span class="sd">    affine : array</span>
<span class="sd">        4x4 transformation array from native coordinates to world coordinates.</span>
<span class="sd">    mask : ndarray</span>
<span class="sd">        3D mask.</span>
<span class="sd">    colors : tuple or None</span>
<span class="sd">        Default red color. If None then every peak gets an orientation color</span>
<span class="sd">        in similarity to a DEC map.</span>
<span class="sd">    opacity : float, optional</span>
<span class="sd">        Takes values from 0 (fully transparent) to 1 (opaque).</span>
<span class="sd">    linewidth : float, optional</span>
<span class="sd">        Line thickness. Default is 1.</span>
<span class="sd">    lod : bool</span>
<span class="sd">        Use LODActor(level of detail) rather than Actor.</span>
<span class="sd">        Default is False. Level of detail actors do not render the full</span>
<span class="sd">        geometry when the frame rate is low.</span>
<span class="sd">    lod_points : int</span>
<span class="sd">        Number of points to be used when LOD is in effect. Default is 10000.</span>
<span class="sd">    lod_points_size : int</span>
<span class="sd">        Size of points when lod is in effect. Default is 3.</span>
<span class="sd">    symmetric: bool, optional</span>
<span class="sd">        If True, peaks are drawn for both peaks_dirs and -peaks_dirs. Else,</span>
<span class="sd">        peaks are only drawn for directions given by peaks_dirs. Default is</span>
<span class="sd">        True.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    peak_actor: Actor</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    :func:`fury.actor.odf_slice`</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">peaks_dirs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">peaks_dirs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">peaks_dirs</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Wrong shape&#39;</span><span class="p">)</span>

    <span class="n">peaks_dirs</span> <span class="o">=</span> <span class="n">_makeNd</span><span class="p">(</span><span class="n">peaks_dirs</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">peaks_values</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">peaks_values</span> <span class="o">=</span> <span class="n">_makeNd</span><span class="p">(</span><span class="n">peaks_values</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

    <span class="n">grid_shape</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">peaks_dirs</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">mask</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">grid_shape</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">PeakSlicerActor</span><span class="p">(</span><span class="n">LODActor</span><span class="p">):</span>
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">def</span> <span class="nf">display_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z1</span><span class="p">,</span> <span class="n">z2</span><span class="p">):</span>

            <span class="n">tmp_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">grid_shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
            <span class="n">tmp_mask</span><span class="p">[</span><span class="n">x1</span> <span class="p">:</span> <span class="n">x2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y1</span> <span class="p">:</span> <span class="n">y2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">z1</span> <span class="p">:</span> <span class="n">z2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">tmp_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">bitwise_and</span><span class="p">(</span><span class="n">tmp_mask</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span>

            <span class="n">ijk</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">tmp_mask</span><span class="p">))</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ijk</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SetMapper</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="n">affine</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">ijk_trans</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">apply_affine</span><span class="p">(</span><span class="n">affine</span><span class="p">,</span> <span class="n">ijk</span><span class="p">))</span>
            <span class="n">list_dirs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">center</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ijk</span><span class="p">):</span>
                <span class="c1"># center = tuple(center)</span>
                <span class="k">if</span> <span class="n">affine</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">xyz</span> <span class="o">=</span> <span class="n">center</span><span class="p">[:,</span> <span class="kc">None</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">xyz</span> <span class="o">=</span> <span class="n">ijk_trans</span><span class="p">[</span><span class="n">index</span><span class="p">][:,</span> <span class="kc">None</span><span class="p">]</span>
                <span class="n">xyz</span> <span class="o">=</span> <span class="n">xyz</span><span class="o">.</span><span class="n">T</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">peaks_dirs</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">center</span><span class="p">)]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]):</span>

                    <span class="k">if</span> <span class="n">peaks_values</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">pv</span> <span class="o">=</span> <span class="n">peaks_values</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">center</span><span class="p">)][</span><span class="n">i</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">pv</span> <span class="o">=</span> <span class="mf">1.0</span>
                    <span class="k">if</span> <span class="n">symmetric</span><span class="p">:</span>
                        <span class="n">dirs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span>
                            <span class="p">(</span>
                                <span class="o">-</span><span class="n">peaks_dirs</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">center</span><span class="p">)][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">pv</span> <span class="o">+</span> <span class="n">xyz</span><span class="p">,</span>
                                <span class="n">peaks_dirs</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">center</span><span class="p">)][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">pv</span> <span class="o">+</span> <span class="n">xyz</span><span class="p">,</span>
                            <span class="p">)</span>
                        <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">dirs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">xyz</span><span class="p">,</span> <span class="n">peaks_dirs</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">center</span><span class="p">)][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">pv</span> <span class="o">+</span> <span class="n">xyz</span><span class="p">))</span>
                    <span class="n">list_dirs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dirs</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="p">(</span>
                <span class="n">list_dirs</span><span class="p">,</span>
                <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
                <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
                <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
                <span class="n">lod</span><span class="o">=</span><span class="n">lod</span><span class="p">,</span>
                <span class="n">lod_points</span><span class="o">=</span><span class="n">lod_points</span><span class="p">,</span>
                <span class="n">lod_points_size</span><span class="o">=</span><span class="n">lod_points_size</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">SetProperty</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SetMapper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">GetMapper</span><span class="p">())</span>

        <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">z</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">display_extent</span><span class="p">(</span>
                    <span class="mi">0</span><span class="p">,</span>
                    <span class="n">szx</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="mi">0</span><span class="p">,</span>
                    <span class="n">szy</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">szz</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)),</span>
                    <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">szz</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)),</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">display_extent</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">szy</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">szz</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">display_extent</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">szx</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">szz</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">z</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">display_extent</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">szx</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">szy</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>

    <span class="n">peak_actor</span> <span class="o">=</span> <span class="n">PeakSlicerActor</span><span class="p">()</span>

    <span class="n">szx</span><span class="p">,</span> <span class="n">szy</span><span class="p">,</span> <span class="n">szz</span> <span class="o">=</span> <span class="n">grid_shape</span>
    <span class="n">peak_actor</span><span class="o">.</span><span class="n">display_extent</span><span class="p">(</span>
        <span class="mi">0</span><span class="p">,</span> <span class="n">szx</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">szy</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">szz</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)),</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">szz</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">peak_actor</span></div>


<div class="viewcode-block" id="peak"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.peak">[docs]</a><span class="k">def</span> <span class="nf">peak</span><span class="p">(</span>
    <span class="n">peaks_dirs</span><span class="p">,</span>
    <span class="n">peaks_values</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">affine</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">lookup_colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">symmetric</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visualize peak directions as given from ``peaks_from_model``.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    peaks_dirs : ndarray</span>
<span class="sd">        Peak directions. The shape of the array should be (X, Y, Z, D, 3).</span>
<span class="sd">    peaks_values : ndarray, optional</span>
<span class="sd">        Peak values. The shape of the array should be (X, Y, Z, D).</span>
<span class="sd">    affine : array, optional</span>
<span class="sd">        4x4 transformation array from native coordinates to world coordinates.</span>
<span class="sd">    mask : ndarray, optional</span>
<span class="sd">        3D mask</span>
<span class="sd">    colors : tuple or None, optional</span>
<span class="sd">        Default None. If None then every peak gets an orientation color</span>
<span class="sd">        in similarity to a DEC map.</span>
<span class="sd">    lookup_colormap : vtkLookupTable, optional</span>
<span class="sd">        Add a default lookup table to the colormap. Default is None which calls</span>
<span class="sd">        :func:`fury.actor.colormap_lookup_table`.</span>
<span class="sd">    linewidth : float, optional</span>
<span class="sd">        Line thickness. Default is 1.</span>
<span class="sd">    symmetric : bool, optional</span>
<span class="sd">        If True, peaks are drawn for both peaks_dirs and -peaks_dirs. Else,</span>
<span class="sd">        peaks are only drawn for directions given by peaks_dirs. Default is</span>
<span class="sd">        True.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    peak_actor : PeakActor</span>
<span class="sd">        Actor or LODActor representing the peaks directions and/or</span>
<span class="sd">        magnitudes.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from fury import actor, window</span>
<span class="sd">    &gt;&gt;&gt; import numpy as np</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; peak_dirs = np.random.rand(3, 3, 3, 3, 3)</span>
<span class="sd">    &gt;&gt;&gt; c = actor.peak(peak_dirs)</span>
<span class="sd">    &gt;&gt;&gt; scene.add(c)</span>
<span class="sd">    &gt;&gt;&gt; #window.show(scene)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">peaks_dirs</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">5</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s1">&#39;Invalid peak directions. The shape of the structure &#39;</span>
            <span class="s1">&#39;must be (XxYxZxDx3). Your data has </span><span class="si">{}</span><span class="s1"> dimensions.&#39;</span>
            <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">peaks_dirs</span><span class="o">.</span><span class="n">ndim</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">peaks_dirs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s1">&#39;Invalid peak directions. The shape of the last &#39;</span>
            <span class="s1">&#39;dimension must be 3. Your data has a last dimension &#39;</span>
            <span class="s1">&#39;of </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">peaks_dirs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="p">)</span>

    <span class="n">dirs_shape</span> <span class="o">=</span> <span class="n">peaks_dirs</span><span class="o">.</span><span class="n">shape</span>

    <span class="k">if</span> <span class="n">peaks_values</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">peaks_values</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Invalid peak values. The shape of the structure &#39;</span>
                <span class="s1">&#39;must be (XxYxZxD). Your data has </span><span class="si">{}</span><span class="s1"> dimensions.&#39;</span>
                <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">peaks_values</span><span class="o">.</span><span class="n">ndim</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="n">vals_shape</span> <span class="o">=</span> <span class="n">peaks_values</span><span class="o">.</span><span class="n">shape</span>
        <span class="k">if</span> <span class="n">vals_shape</span> <span class="o">!=</span> <span class="n">dirs_shape</span><span class="p">[:</span><span class="mi">4</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Invalid peak values. The shape of the values &#39;</span>
                <span class="s1">&#39;must coincide with the shape of the directions.&#39;</span>
            <span class="p">)</span>

    <span class="n">valid_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">peaks_dirs</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">mask</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">mask</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s1">&#39;Invalid mask. The mask must be a 3D array. The &#39;</span>
                <span class="s1">&#39;passed mask has </span><span class="si">{}</span><span class="s1"> dimensions. Ignoring passed &#39;</span>
                <span class="s1">&#39;mask.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">ndim</span><span class="p">),</span>
                <span class="ne">UserWarning</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">mask</span><span class="o">.</span><span class="n">shape</span> <span class="o">!=</span> <span class="n">dirs_shape</span><span class="p">[:</span><span class="mi">3</span><span class="p">]:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s1">&#39;Invalid mask. The shape of the mask must coincide &#39;</span>
                <span class="s1">&#39;with the shape of the directions. Ignoring passed &#39;</span>
                <span class="s1">&#39;mask.&#39;</span><span class="p">,</span>
                <span class="ne">UserWarning</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">valid_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="n">valid_mask</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span>
    <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">valid_mask</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">PeakActor</span><span class="p">(</span>
        <span class="n">peaks_dirs</span><span class="p">,</span>
        <span class="n">indices</span><span class="p">,</span>
        <span class="n">values</span><span class="o">=</span><span class="n">peaks_values</span><span class="p">,</span>
        <span class="n">affine</span><span class="o">=</span><span class="n">affine</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
        <span class="n">lookup_colormap</span><span class="o">=</span><span class="n">lookup_colormap</span><span class="p">,</span>
        <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
        <span class="n">symmetric</span><span class="o">=</span><span class="n">symmetric</span><span class="p">,</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="dot"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.dot">[docs]</a><span class="k">def</span> <span class="nf">dot</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dot_size</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create one or more 3d points.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    points : ndarray, (N, 3)</span>
<span class="sd">        dots positions.</span>
<span class="sd">    colors : ndarray (N,3) or (N, 4) or tuple (3,) or tuple (4,)</span>
<span class="sd">        RGB or RGBA (for opacity) R, G, B and A should be at the range [0, 1].</span>
<span class="sd">    opacity : float, optional</span>
<span class="sd">        Takes values from 0 (fully transparent) to 1 (opaque).</span>
<span class="sd">        If a value is given, each dot will have the same opacity otherwise</span>
<span class="sd">        opacity is set to 1 by default, or is defined by Alpha parameter</span>
<span class="sd">        in colors if given.</span>
<span class="sd">    dot_size : int</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dot_actor: Actor</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    :func:`fury.actor.point`</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">points</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s1">&#39;Invalid points. The shape of the structure must be &#39;</span>
            <span class="s1">&#39;(Nx3). Your data has </span><span class="si">{}</span><span class="s1"> dimensions.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">points</span><span class="o">.</span><span class="n">ndim</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">points</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s1">&#39;Invalid points. The shape of the last dimension &#39;</span>
            <span class="s1">&#39;must be 3. Your data has a last dimension of </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">points</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="p">)</span>

    <span class="n">vtk_vertices</span> <span class="o">=</span> <span class="n">Points</span><span class="p">()</span>
    <span class="n">vtk_faces</span> <span class="o">=</span> <span class="n">CellArray</span><span class="p">()</span>

    <span class="c1"># Add points</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)):</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">idd</span> <span class="o">=</span> <span class="n">vtk_vertices</span><span class="o">.</span><span class="n">InsertNextPoint</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">vtk_faces</span><span class="o">.</span><span class="n">InsertNextCell</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">vtk_faces</span><span class="o">.</span><span class="n">InsertCellPoint</span><span class="p">(</span><span class="n">idd</span><span class="p">)</span>

    <span class="n">color_tuple</span> <span class="o">=</span> <span class="n">color_check</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">),</span> <span class="n">colors</span><span class="p">)</span>
    <span class="n">color_array</span><span class="p">,</span> <span class="n">global_opacity</span> <span class="o">=</span> <span class="n">color_tuple</span>

    <span class="c1"># Create a polydata object</span>
    <span class="n">polydata</span> <span class="o">=</span> <span class="n">PolyData</span><span class="p">()</span>
    <span class="n">polydata</span><span class="o">.</span><span class="n">SetPoints</span><span class="p">(</span><span class="n">vtk_vertices</span><span class="p">)</span>
    <span class="n">polydata</span><span class="o">.</span><span class="n">SetVerts</span><span class="p">(</span><span class="n">vtk_faces</span><span class="p">)</span>
    <span class="n">polydata</span><span class="o">.</span><span class="n">GetPointData</span><span class="p">()</span><span class="o">.</span><span class="n">SetScalars</span><span class="p">(</span><span class="n">color_array</span><span class="p">)</span>

    <span class="c1"># set primitives count</span>
    <span class="n">prim_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
    <span class="n">set_polydata_primitives_count</span><span class="p">(</span><span class="n">polydata</span><span class="p">,</span> <span class="n">prim_count</span><span class="p">)</span>

    <span class="c1"># Visualize</span>
    <span class="n">mapper</span> <span class="o">=</span> <span class="n">PolyDataMapper</span><span class="p">()</span>
    <span class="n">mapper</span><span class="o">.</span><span class="n">SetInputData</span><span class="p">(</span><span class="n">polydata</span><span class="p">)</span>

    <span class="c1"># Create an actor</span>
    <span class="n">poly_actor</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">()</span>
    <span class="n">poly_actor</span><span class="o">.</span><span class="n">SetMapper</span><span class="p">(</span><span class="n">mapper</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">opacity</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">poly_actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetOpacity</span><span class="p">(</span><span class="n">opacity</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">global_opacity</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">poly_actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetOpacity</span><span class="p">(</span><span class="n">global_opacity</span><span class="p">)</span>
    <span class="n">poly_actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetPointSize</span><span class="p">(</span><span class="n">dot_size</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">poly_actor</span></div>


<span class="n">dots</span> <span class="o">=</span> <span class="n">deprecate_with_version</span><span class="p">(</span>
    <span class="n">message</span><span class="o">=</span><span class="s1">&#39;dots function has been renamed dot&#39;</span><span class="p">,</span> <span class="n">since</span><span class="o">=</span><span class="s1">&#39;0.8.1&#39;</span><span class="p">,</span> <span class="n">until</span><span class="o">=</span><span class="s1">&#39;0.9.0&#39;</span>
<span class="p">)(</span><span class="n">dot</span><span class="p">)</span>


<div class="viewcode-block" id="point"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.point">[docs]</a><span class="k">def</span> <span class="nf">point</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">point_radius</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">phi</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visualize points as sphere glyphs.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    points : ndarray, shape (N, 3)</span>
<span class="sd">    colors : ndarray (N,3) or tuple (3,)</span>
<span class="sd">    point_radius : float</span>
<span class="sd">    phi : int</span>
<span class="sd">    theta : int</span>
<span class="sd">    opacity : float, optional</span>
<span class="sd">        Takes values from 0 (fully transparent) to 1 (opaque). Default is 1.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    point_actor: Actor</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    :func:`fury.actor.dot`</span>
<span class="sd">    :func:`fury.actor.sphere`</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from fury import window, actor</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; pts = np.random.rand(5, 3)</span>
<span class="sd">    &gt;&gt;&gt; point_actor = actor.point(pts, window.colors.coral)</span>
<span class="sd">    &gt;&gt;&gt; scene.add(point_actor)</span>
<span class="sd">    &gt;&gt;&gt; # window.show(scene)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">sphere</span><span class="p">(</span>
        <span class="n">centers</span><span class="o">=</span><span class="n">points</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
        <span class="n">radii</span><span class="o">=</span><span class="n">point_radius</span><span class="p">,</span>
        <span class="n">phi</span><span class="o">=</span><span class="n">phi</span><span class="p">,</span>
        <span class="n">theta</span><span class="o">=</span><span class="n">theta</span><span class="p">,</span>
        <span class="n">vertices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">faces</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="sphere"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.sphere">[docs]</a><span class="k">def</span> <span class="nf">sphere</span><span class="p">(</span>
    <span class="n">centers</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">,</span>
    <span class="n">radii</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">phi</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
    <span class="n">theta</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
    <span class="n">vertices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">faces</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">use_primitive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visualize one or many spheres with different colors and radii.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    centers : ndarray, shape (N, 3)</span>
<span class="sd">        Spheres positions.</span>
<span class="sd">    colors : ndarray (N,3) or (N, 4) or tuple (3,) or tuple (4,)</span>
<span class="sd">        RGB or RGBA (for opacity) R, G, B and A should be at the range [0, 1].</span>
<span class="sd">    radii : float or ndarray, shape (N,)</span>
<span class="sd">        Sphere radius.</span>
<span class="sd">    phi : int, optional</span>
<span class="sd">        Set the number of points in the latitude direction.</span>
<span class="sd">    theta : int, optional</span>
<span class="sd">        Set the number of points in the longitude direction.</span>
<span class="sd">    vertices : ndarray, shape (N, 3)</span>
<span class="sd">        The point cloud defining the sphere.</span>
<span class="sd">    faces : ndarray, shape (M, 3)</span>
<span class="sd">        If faces is None then a sphere is created based on theta and phi angles</span>
<span class="sd">        If not then a sphere is created with the provided vertices and faces.</span>
<span class="sd">    opacity : float, optional</span>
<span class="sd">        Takes values from 0 (fully transparent) to 1 (opaque). Default is 1.</span>
<span class="sd">    use_primitive : boolean, optional</span>
<span class="sd">        If True, uses primitives to create an actor.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    sphere_actor: Actor</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from fury import window, actor</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; centers = np.random.rand(5, 3)</span>
<span class="sd">    &gt;&gt;&gt; sphere_actor = actor.sphere(centers, window.colors.coral)</span>
<span class="sd">    &gt;&gt;&gt; scene.add(sphere_actor)</span>
<span class="sd">    &gt;&gt;&gt; # window.show(scene)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">use_primitive</span><span class="p">:</span>
        <span class="n">src</span> <span class="o">=</span> <span class="n">SphereSource</span><span class="p">()</span> <span class="k">if</span> <span class="n">faces</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">src</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">src</span><span class="o">.</span><span class="n">SetRadius</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">src</span><span class="o">.</span><span class="n">SetThetaResolution</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
            <span class="n">src</span><span class="o">.</span><span class="n">SetPhiResolution</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>

        <span class="n">sphere_actor</span> <span class="o">=</span> <span class="n">repeat_sources</span><span class="p">(</span>
            <span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span>
            <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
            <span class="n">active_scalars</span><span class="o">=</span><span class="n">radii</span><span class="p">,</span>
            <span class="n">source</span><span class="o">=</span><span class="n">src</span><span class="p">,</span>
            <span class="n">vertices</span><span class="o">=</span><span class="n">vertices</span><span class="p">,</span>
            <span class="n">faces</span><span class="o">=</span><span class="n">faces</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">sphere_actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetOpacity</span><span class="p">(</span><span class="n">opacity</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sphere_actor</span>

    <span class="n">scales</span> <span class="o">=</span> <span class="n">radii</span>
    <span class="n">directions</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">faces</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">vertices</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">vertices</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">prim_sphere</span><span class="p">(</span><span class="n">phi</span><span class="o">=</span><span class="n">phi</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="n">theta</span><span class="p">)</span>

    <span class="n">res</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">repeat_primitive</span><span class="p">(</span>
        <span class="n">vertices</span><span class="p">,</span>
        <span class="n">faces</span><span class="p">,</span>
        <span class="n">directions</span><span class="o">=</span><span class="n">directions</span><span class="p">,</span>
        <span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
        <span class="n">scales</span><span class="o">=</span><span class="n">scales</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">res</span>
    <span class="n">prim_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">centers</span><span class="p">)</span>
    <span class="n">sphere_actor</span> <span class="o">=</span> <span class="n">get_actor_from_primitive</span><span class="p">(</span>
        <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">prim_count</span><span class="o">=</span><span class="n">prim_count</span>
    <span class="p">)</span>
    <span class="n">sphere_actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetOpacity</span><span class="p">(</span><span class="n">opacity</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">sphere_actor</span></div>


<div class="viewcode-block" id="cylinder"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.cylinder">[docs]</a><span class="k">def</span> <span class="nf">cylinder</span><span class="p">(</span>
    <span class="n">centers</span><span class="p">,</span>
    <span class="n">directions</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">,</span>
    <span class="n">radius</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span>
    <span class="n">heights</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">capped</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">resolution</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
    <span class="n">vertices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">faces</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">repeat_primitive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visualize one or many cylinder with different features.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    centers : ndarray, shape (N, 3)</span>
<span class="sd">        Cylinder positions.</span>
<span class="sd">    directions : ndarray, shape (N, 3)</span>
<span class="sd">        The orientation vector of the cylinder.</span>
<span class="sd">    colors : ndarray (N,3) or (N, 4) or tuple (3,) or tuple (4,)</span>
<span class="sd">        RGB or RGBA (for opacity) R, G, B and A should be at the range [0, 1].</span>
<span class="sd">    radius : float</span>
<span class="sd">        cylinder radius.</span>
<span class="sd">    heights : ndarray, shape (N)</span>
<span class="sd">        The height of the cylinder.</span>
<span class="sd">    capped : bool</span>
<span class="sd">        Turn on/off whether to cap cylinder with polygons. Default (False).</span>
<span class="sd">    resolution: int</span>
<span class="sd">        Number of facets/sectors used to define cylinder.</span>
<span class="sd">    vertices : ndarray, shape (N, 3)</span>
<span class="sd">        The point cloud defining the sphere.</span>
<span class="sd">    faces : ndarray, shape (M, 3)</span>
<span class="sd">        If faces is None then a sphere is created based on theta and phi angles.</span>
<span class="sd">        If not then a sphere is created with the provided vertices and faces.</span>
<span class="sd">    repeat_primitive: bool</span>
<span class="sd">        If True, cylinder will be generated with primitives</span>
<span class="sd">        If False, repeat_sources will be invoked to use VTK filters for cylinder.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    cylinder_actor: Actor</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from fury import window, actor</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; centers = np.random.rand(5, 3)</span>
<span class="sd">    &gt;&gt;&gt; dirs = np.random.rand(5, 3)</span>
<span class="sd">    &gt;&gt;&gt; heights = np.random.rand(5)</span>
<span class="sd">    &gt;&gt;&gt; actor = actor.cylinder(centers, dirs, (1, 1, 1), heights=heights)</span>
<span class="sd">    &gt;&gt;&gt; scene.add(actor)</span>
<span class="sd">    &gt;&gt;&gt; # window.show(scene)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">repeat_primitive</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">resolution</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">:</span>
            <span class="c1"># Sectors parameter should be greater than 7 in fp.prim_cylinder()</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;resolution parameter should be greater than 7&#39;</span><span class="p">)</span>

        <span class="n">verts</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">prim_cylinder</span><span class="p">(</span>
            <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span>
            <span class="n">sectors</span><span class="o">=</span><span class="n">resolution</span><span class="p">,</span>
            <span class="n">capped</span><span class="o">=</span><span class="n">capped</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">repeat_primitive</span><span class="p">(</span>
            <span class="n">verts</span><span class="p">,</span>
            <span class="n">faces</span><span class="p">,</span>
            <span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span>
            <span class="n">directions</span><span class="o">=</span><span class="n">directions</span><span class="p">,</span>
            <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
            <span class="n">scales</span><span class="o">=</span><span class="n">heights</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">res</span>
        <span class="n">prim_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">centers</span><span class="p">)</span>
        <span class="n">cylinder_actor</span> <span class="o">=</span> <span class="n">get_actor_from_primitive</span><span class="p">(</span>
            <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">prim_count</span><span class="o">=</span><span class="n">prim_count</span>
        <span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">faces</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">src</span> <span class="o">=</span> <span class="n">CylinderSource</span><span class="p">()</span>
            <span class="n">src</span><span class="o">.</span><span class="n">SetCapping</span><span class="p">(</span><span class="n">capped</span><span class="p">)</span>
            <span class="n">src</span><span class="o">.</span><span class="n">SetResolution</span><span class="p">(</span><span class="n">resolution</span><span class="p">)</span>
            <span class="n">src</span><span class="o">.</span><span class="n">SetRadius</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span>
            <span class="n">rotate</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">src</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">rotate</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">cylinder_actor</span> <span class="o">=</span> <span class="n">repeat_sources</span><span class="p">(</span>
            <span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span>
            <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
            <span class="n">directions</span><span class="o">=</span><span class="n">directions</span><span class="p">,</span>
            <span class="n">active_scalars</span><span class="o">=</span><span class="n">heights</span><span class="p">,</span>
            <span class="n">source</span><span class="o">=</span><span class="n">src</span><span class="p">,</span>
            <span class="n">vertices</span><span class="o">=</span><span class="n">vertices</span><span class="p">,</span>
            <span class="n">faces</span><span class="o">=</span><span class="n">faces</span><span class="p">,</span>
            <span class="n">orientation</span><span class="o">=</span><span class="n">rotate</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">cylinder_actor</span></div>


<div class="viewcode-block" id="disk"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.disk">[docs]</a><span class="k">def</span> <span class="nf">disk</span><span class="p">(</span>
    <span class="n">centers</span><span class="p">,</span>
    <span class="n">directions</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">,</span>
    <span class="n">rinner</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
    <span class="n">router</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
    <span class="n">cresolution</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
    <span class="n">rresolution</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">vertices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">faces</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visualize one or many disks with different features.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    centers : ndarray, shape (N, 3)</span>
<span class="sd">        Disk positions.</span>
<span class="sd">    directions : ndarray, shape (N, 3)</span>
<span class="sd">        The orientation vector of the disk.</span>
<span class="sd">    colors : ndarray (N,3) or (N, 4) or tuple (3,) or tuple (4,)</span>
<span class="sd">        RGB or RGBA (for opacity) R, G, B and A should be at the range [0, 1].</span>
<span class="sd">    rinner : float</span>
<span class="sd">        disk inner radius, default: 0.3</span>
<span class="sd">    router : float</span>
<span class="sd">        disk outer radius, default: 0.5</span>
<span class="sd">    cresolution: int, optional</span>
<span class="sd">        Number of facets used to define perimeter of disk, default: 6</span>
<span class="sd">    rresolution: int, optional</span>
<span class="sd">        Number of facets used radially, default: 2</span>
<span class="sd">    vertices : ndarray, shape (N, 3)</span>
<span class="sd">        The point cloud defining the disk.</span>
<span class="sd">    faces : ndarray, shape (M, 3)</span>
<span class="sd">        If faces is None then a disk is created based on theta and phi angles.</span>
<span class="sd">        If not then a disk is created with the provided vertices and faces.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    disk_actor: Actor</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from fury import window, actor</span>
<span class="sd">    &gt;&gt;&gt; import numpy as np</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; centers = np.random.rand(5, 3)</span>
<span class="sd">    &gt;&gt;&gt; dirs = np.random.rand(5, 3)</span>
<span class="sd">    &gt;&gt;&gt; colors = np.random.rand(5, 4)</span>
<span class="sd">    &gt;&gt;&gt; actor = actor.disk(centers, dirs, colors,</span>
<span class="sd">    &gt;&gt;&gt;                    rinner=.1, router=.8, cresolution=30)</span>
<span class="sd">    &gt;&gt;&gt; scene.add(actor)</span>
<span class="sd">    &gt;&gt;&gt; window.show(scene)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">faces</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">src</span> <span class="o">=</span> <span class="n">DiskSource</span><span class="p">()</span>
        <span class="n">src</span><span class="o">.</span><span class="n">SetCircumferentialResolution</span><span class="p">(</span><span class="n">cresolution</span><span class="p">)</span>
        <span class="n">src</span><span class="o">.</span><span class="n">SetRadialResolution</span><span class="p">(</span><span class="n">rresolution</span><span class="p">)</span>
        <span class="n">src</span><span class="o">.</span><span class="n">SetInnerRadius</span><span class="p">(</span><span class="n">rinner</span><span class="p">)</span>
        <span class="n">src</span><span class="o">.</span><span class="n">SetOuterRadius</span><span class="p">(</span><span class="n">router</span><span class="p">)</span>
        <span class="n">rotate</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">src</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">rotate</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">disk_actor</span> <span class="o">=</span> <span class="n">repeat_sources</span><span class="p">(</span>
        <span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
        <span class="n">directions</span><span class="o">=</span><span class="n">directions</span><span class="p">,</span>
        <span class="n">source</span><span class="o">=</span><span class="n">src</span><span class="p">,</span>
        <span class="n">vertices</span><span class="o">=</span><span class="n">vertices</span><span class="p">,</span>
        <span class="n">faces</span><span class="o">=</span><span class="n">faces</span><span class="p">,</span>
        <span class="n">orientation</span><span class="o">=</span><span class="n">rotate</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">disk_actor</span></div>


<div class="viewcode-block" id="square"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.square">[docs]</a><span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">centers</span><span class="p">,</span> <span class="n">directions</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">colors</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">scales</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visualize one or many squares with different features.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    centers : ndarray, shape (N, 3)</span>
<span class="sd">        Square positions.</span>
<span class="sd">    directions : ndarray, shape (N, 3), optional</span>
<span class="sd">        The orientation vector of the square.</span>
<span class="sd">    colors : ndarray (N,3) or (N, 4) or tuple (3,) or tuple (4,), optional</span>
<span class="sd">        RGB or RGBA (for opacity) R, G, B and A should be at the range [0, 1].</span>
<span class="sd">    scales : int or ndarray (N,3) or tuple (3,), optional</span>
<span class="sd">        Square size on each direction (x, y), default(1)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    sq_actor: Actor</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from fury import window, actor</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; centers = np.random.rand(5, 3)</span>
<span class="sd">    &gt;&gt;&gt; dirs = np.random.rand(5, 3)</span>
<span class="sd">    &gt;&gt;&gt; sq_actor = actor.square(centers, dirs)</span>
<span class="sd">    &gt;&gt;&gt; scene.add(sq_actor)</span>
<span class="sd">    &gt;&gt;&gt; # window.show(scene)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verts</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">prim_square</span><span class="p">()</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">repeat_primitive</span><span class="p">(</span>
        <span class="n">verts</span><span class="p">,</span>
        <span class="n">faces</span><span class="p">,</span>
        <span class="n">directions</span><span class="o">=</span><span class="n">directions</span><span class="p">,</span>
        <span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
        <span class="n">scales</span><span class="o">=</span><span class="n">scales</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">res</span>
    <span class="n">prim_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">centers</span><span class="p">)</span>
    <span class="n">sq_actor</span> <span class="o">=</span> <span class="n">get_actor_from_primitive</span><span class="p">(</span>
        <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">prim_count</span><span class="o">=</span><span class="n">prim_count</span>
    <span class="p">)</span>
    <span class="n">sq_actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">BackfaceCullingOff</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">sq_actor</span></div>


<div class="viewcode-block" id="rectangle"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.rectangle">[docs]</a><span class="k">def</span> <span class="nf">rectangle</span><span class="p">(</span><span class="n">centers</span><span class="p">,</span> <span class="n">directions</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">colors</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">scales</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visualize one or many rectangles with different features.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    centers : ndarray, shape (N, 3)</span>
<span class="sd">        Rectangle positions.</span>
<span class="sd">    directions : ndarray, shape (N, 3), optional</span>
<span class="sd">        The orientation vector of the rectangle.</span>
<span class="sd">    colors : ndarray (N,3) or (N, 4) or tuple (3,) or tuple (4,), optional</span>
<span class="sd">        RGB or RGBA (for opacity) R, G, B and A should be at the range [0, 1].</span>
<span class="sd">    scales : int or ndarray (N,3) or tuple (3,), optional</span>
<span class="sd">        Rectangle size on each direction (x, y), default(1)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    rect_actor: Actor</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    :func:`fury.actor.square`</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from fury import window, actor</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; centers = np.random.rand(5, 3)</span>
<span class="sd">    &gt;&gt;&gt; dirs = np.random.rand(5, 3)</span>
<span class="sd">    &gt;&gt;&gt; rect_actor = actor.rectangle(centers, dirs)</span>
<span class="sd">    &gt;&gt;&gt; scene.add(rect_actor)</span>
<span class="sd">    &gt;&gt;&gt; # window.show(scene)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">square</span><span class="p">(</span><span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span> <span class="n">directions</span><span class="o">=</span><span class="n">directions</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">scales</span><span class="o">=</span><span class="n">scales</span><span class="p">)</span></div>


<div class="viewcode-block" id="box"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.box">[docs]</a><span class="nd">@deprecated_params</span><span class="p">([</span><span class="s1">&#39;size&#39;</span><span class="p">,</span> <span class="s1">&#39;heights&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;scales&#39;</span><span class="p">,</span> <span class="s1">&#39;scales&#39;</span><span class="p">],</span> <span class="n">since</span><span class="o">=</span><span class="s1">&#39;0.6&#39;</span><span class="p">,</span> <span class="n">until</span><span class="o">=</span><span class="s1">&#39;0.8&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">box</span><span class="p">(</span><span class="n">centers</span><span class="p">,</span> <span class="n">directions</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">colors</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">scales</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visualize one or many boxes with different features.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    centers : ndarray, shape (N, 3)</span>
<span class="sd">        Box positions.</span>
<span class="sd">    directions : ndarray, shape (N, 3), optional</span>
<span class="sd">        The orientation vector of the box.</span>
<span class="sd">    colors : ndarray (N,3) or (N, 4) or tuple (3,) or tuple (4,), optional</span>
<span class="sd">        RGB or RGBA (for opacity) R, G, B and A should be at the range [0, 1].</span>
<span class="sd">    scales : int or ndarray (N,3) or tuple (3,), optional</span>
<span class="sd">        Box size on each direction (x, y), default(1)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    box_actor: Actor</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from fury import window, actor</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; centers = np.random.rand(5, 3)</span>
<span class="sd">    &gt;&gt;&gt; dirs = np.random.rand(5, 3)</span>
<span class="sd">    &gt;&gt;&gt; box_actor = actor.box(centers, dirs, (1, 1, 1))</span>
<span class="sd">    &gt;&gt;&gt; scene.add(box_actor)</span>
<span class="sd">    &gt;&gt;&gt; # window.show(scene)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verts</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">prim_box</span><span class="p">()</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">repeat_primitive</span><span class="p">(</span>
        <span class="n">verts</span><span class="p">,</span>
        <span class="n">faces</span><span class="p">,</span>
        <span class="n">directions</span><span class="o">=</span><span class="n">directions</span><span class="p">,</span>
        <span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
        <span class="n">scales</span><span class="o">=</span><span class="n">scales</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">res</span>
    <span class="n">prim_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">centers</span><span class="p">)</span>
    <span class="n">box_actor</span> <span class="o">=</span> <span class="n">get_actor_from_primitive</span><span class="p">(</span>
        <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">prim_count</span><span class="o">=</span><span class="n">prim_count</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">box_actor</span></div>


<div class="viewcode-block" id="cube"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.cube">[docs]</a><span class="nd">@deprecated_params</span><span class="p">(</span><span class="s1">&#39;heights&#39;</span><span class="p">,</span> <span class="s1">&#39;scales&#39;</span><span class="p">,</span> <span class="n">since</span><span class="o">=</span><span class="s1">&#39;0.6&#39;</span><span class="p">,</span> <span class="n">until</span><span class="o">=</span><span class="s1">&#39;0.8&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">cube</span><span class="p">(</span><span class="n">centers</span><span class="p">,</span> <span class="n">directions</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">colors</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">scales</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visualize one or many cubes with different features.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    centers : ndarray, shape (N, 3)</span>
<span class="sd">        Cube positions.</span>
<span class="sd">    directions : ndarray, shape (N, 3), optional</span>
<span class="sd">        The orientation vector of the cube.</span>
<span class="sd">    colors : ndarray (N,3) or (N, 4) or tuple (3,) or tuple (4,), optional</span>
<span class="sd">        RGB or RGBA (for opacity) R, G, B and A should be at the range [0, 1].</span>
<span class="sd">    scales : int or ndarray (N,3) or tuple (3,), optional</span>
<span class="sd">        Cube size, default: 1</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    cube_actor: Actor</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from fury import window, actor</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; centers = np.random.rand(5, 3)</span>
<span class="sd">    &gt;&gt;&gt; dirs = np.random.rand(5, 3)</span>
<span class="sd">    &gt;&gt;&gt; cube_actor = actor.cube(centers, dirs)</span>
<span class="sd">    &gt;&gt;&gt; scene.add(cube_actor)</span>
<span class="sd">    &gt;&gt;&gt; # window.show(scene)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">box</span><span class="p">(</span><span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span> <span class="n">directions</span><span class="o">=</span><span class="n">directions</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">scales</span><span class="o">=</span><span class="n">scales</span><span class="p">)</span></div>


<div class="viewcode-block" id="arrow"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.arrow">[docs]</a><span class="k">def</span> <span class="nf">arrow</span><span class="p">(</span>
    <span class="n">centers</span><span class="p">,</span>
    <span class="n">directions</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">,</span>
    <span class="n">heights</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">resolution</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">tip_length</span><span class="o">=</span><span class="mf">0.35</span><span class="p">,</span>
    <span class="n">tip_radius</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
    <span class="n">shaft_radius</span><span class="o">=</span><span class="mf">0.03</span><span class="p">,</span>
    <span class="n">scales</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">vertices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">faces</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">repeat_primitive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visualize one or many arrows with different features.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    centers : ndarray, shape (N, 3)</span>
<span class="sd">        Arrow positions.</span>
<span class="sd">    directions : ndarray, shape (N, 3)</span>
<span class="sd">        The orientation vector of the arrow.</span>
<span class="sd">    colors : ndarray (N,3) or (N, 4) or tuple (3,) or tuple (4,)</span>
<span class="sd">        RGB or RGBA (for opacity) R, G, B and A should be at the range [0, 1].</span>
<span class="sd">    heights : ndarray, shape (N)</span>
<span class="sd">        The height of the arrow.</span>
<span class="sd">    resolution : int</span>
<span class="sd">        The resolution of the arrow.</span>
<span class="sd">    tip_length : float</span>
<span class="sd">        The tip size of the arrow (default: 0.35)</span>
<span class="sd">    tip_radius : float</span>
<span class="sd">        the tip radius of the arrow (default: 0.1)</span>
<span class="sd">    shaft_radius : float</span>
<span class="sd">        The shaft radius of the arrow (default: 0.03)</span>
<span class="sd">    vertices : ndarray, shape (N, 3)</span>
<span class="sd">        The point cloud defining the arrow.</span>
<span class="sd">    faces : ndarray, shape (M, 3)</span>
<span class="sd">        If faces is None then a arrow is created based on directions, heights</span>
<span class="sd">        and resolution. If not then a arrow is created with the provided</span>
<span class="sd">        vertices and faces.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    arrow_actor: Actor</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from fury import window, actor</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; centers = np.random.rand(5, 3)</span>
<span class="sd">    &gt;&gt;&gt; directions = np.random.rand(5, 3)</span>
<span class="sd">    &gt;&gt;&gt; heights = np.random.rand(5)</span>
<span class="sd">    &gt;&gt;&gt; arrow_actor = actor.arrow(centers, directions, (1, 1, 1), heights)</span>
<span class="sd">    &gt;&gt;&gt; scene.add(arrow_actor)</span>
<span class="sd">    &gt;&gt;&gt; # window.show(scene)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">repeat_primitive</span><span class="p">:</span>
        <span class="n">vertices</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">prim_arrow</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">repeat_primitive</span><span class="p">(</span>
            <span class="n">vertices</span><span class="p">,</span>
            <span class="n">faces</span><span class="p">,</span>
            <span class="n">directions</span><span class="o">=</span><span class="n">directions</span><span class="p">,</span>
            <span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span>
            <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
            <span class="n">scales</span><span class="o">=</span><span class="n">scales</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">big_vertices</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">res</span>
        <span class="n">prim_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">centers</span><span class="p">)</span>
        <span class="n">arrow_actor</span> <span class="o">=</span> <span class="n">get_actor_from_primitive</span><span class="p">(</span>
            <span class="n">big_vertices</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">prim_count</span><span class="o">=</span><span class="n">prim_count</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">arrow_actor</span>

    <span class="n">src</span> <span class="o">=</span> <span class="n">ArrowSource</span><span class="p">()</span> <span class="k">if</span> <span class="n">faces</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">src</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">src</span><span class="o">.</span><span class="n">SetTipResolution</span><span class="p">(</span><span class="n">resolution</span><span class="p">)</span>
        <span class="n">src</span><span class="o">.</span><span class="n">SetShaftResolution</span><span class="p">(</span><span class="n">resolution</span><span class="p">)</span>
        <span class="n">src</span><span class="o">.</span><span class="n">SetTipLength</span><span class="p">(</span><span class="n">tip_length</span><span class="p">)</span>
        <span class="n">src</span><span class="o">.</span><span class="n">SetTipRadius</span><span class="p">(</span><span class="n">tip_radius</span><span class="p">)</span>
        <span class="n">src</span><span class="o">.</span><span class="n">SetShaftRadius</span><span class="p">(</span><span class="n">shaft_radius</span><span class="p">)</span>

    <span class="n">arrow_actor</span> <span class="o">=</span> <span class="n">repeat_sources</span><span class="p">(</span>
        <span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span>
        <span class="n">directions</span><span class="o">=</span><span class="n">directions</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
        <span class="n">active_scalars</span><span class="o">=</span><span class="n">heights</span><span class="p">,</span>
        <span class="n">source</span><span class="o">=</span><span class="n">src</span><span class="p">,</span>
        <span class="n">vertices</span><span class="o">=</span><span class="n">vertices</span><span class="p">,</span>
        <span class="n">faces</span><span class="o">=</span><span class="n">faces</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">arrow_actor</span></div>


<div class="viewcode-block" id="cone"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.cone">[docs]</a><span class="k">def</span> <span class="nf">cone</span><span class="p">(</span>
    <span class="n">centers</span><span class="p">,</span>
    <span class="n">directions</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">,</span>
    <span class="n">heights</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">resolution</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">vertices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">faces</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">use_primitive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visualize one or many cones with different features.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    centers : ndarray, shape (N, 3)</span>
<span class="sd">        Cone positions.</span>
<span class="sd">    directions : ndarray, shape (N, 3)</span>
<span class="sd">        The orientation vector of the cone.</span>
<span class="sd">    colors : ndarray (N,3) or (N, 4) or tuple (3,) or tuple (4,)</span>
<span class="sd">        RGB or RGBA (for opacity) R, G, B and A should be at the range [0, 1].</span>
<span class="sd">    heights : ndarray, shape (N)</span>
<span class="sd">        The height of the cone.</span>
<span class="sd">    resolution : int</span>
<span class="sd">        The resolution of the cone.</span>
<span class="sd">    vertices : ndarray, shape (N, 3)</span>
<span class="sd">        The point cloud defining the cone.</span>
<span class="sd">    faces : ndarray, shape (M, 3)</span>
<span class="sd">        If faces is None then a cone is created based on directions, heights</span>
<span class="sd">        and resolution. If not then a cone is created with the provided.</span>
<span class="sd">        vertices and faces.</span>
<span class="sd">    use_primitive : boolean, optional</span>
<span class="sd">        If True uses primitives to create the cone actor.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    cone_actor: Actor</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from fury import window, actor</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; centers = np.random.rand(5, 3)</span>
<span class="sd">    &gt;&gt;&gt; directions = np.random.rand(5, 3)</span>
<span class="sd">    &gt;&gt;&gt; heights = np.random.rand(5)</span>
<span class="sd">    &gt;&gt;&gt; cone_actor = actor.cone(centers, directions, (1, 1, 1), heights)</span>
<span class="sd">    &gt;&gt;&gt; scene.add(cone_actor)</span>
<span class="sd">    &gt;&gt;&gt; # window.show(scene)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">use_primitive</span><span class="p">:</span>
        <span class="n">src</span> <span class="o">=</span> <span class="n">ConeSource</span><span class="p">()</span> <span class="k">if</span> <span class="n">faces</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">src</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">src</span><span class="o">.</span><span class="n">SetResolution</span><span class="p">(</span><span class="n">resolution</span><span class="p">)</span>

        <span class="n">cone_actor</span> <span class="o">=</span> <span class="n">repeat_sources</span><span class="p">(</span>
            <span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span>
            <span class="n">directions</span><span class="o">=</span><span class="n">directions</span><span class="p">,</span>
            <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
            <span class="n">active_scalars</span><span class="o">=</span><span class="n">heights</span><span class="p">,</span>
            <span class="n">source</span><span class="o">=</span><span class="n">src</span><span class="p">,</span>
            <span class="n">vertices</span><span class="o">=</span><span class="n">vertices</span><span class="p">,</span>
            <span class="n">faces</span><span class="o">=</span><span class="n">faces</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">cone_actor</span>

    <span class="k">if</span> <span class="n">faces</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">vertices</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">vertices</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">prim_cone</span><span class="p">(</span><span class="n">sectors</span><span class="o">=</span><span class="n">resolution</span><span class="p">)</span>

    <span class="n">res</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">repeat_primitive</span><span class="p">(</span>
        <span class="n">vertices</span><span class="p">,</span> <span class="n">faces</span><span class="p">,</span> <span class="n">centers</span><span class="p">,</span> <span class="n">directions</span><span class="o">=</span><span class="n">directions</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">scales</span><span class="o">=</span><span class="n">heights</span>
    <span class="p">)</span>

    <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">res</span>
    <span class="n">prim_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">centers</span><span class="p">)</span>
    <span class="n">cone_actor</span> <span class="o">=</span> <span class="n">get_actor_from_primitive</span><span class="p">(</span>
        <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">prim_count</span><span class="o">=</span><span class="n">prim_count</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">cone_actor</span></div>


<div class="viewcode-block" id="triangularprism"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.triangularprism">[docs]</a><span class="k">def</span> <span class="nf">triangularprism</span><span class="p">(</span><span class="n">centers</span><span class="p">,</span> <span class="n">directions</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">colors</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">scales</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visualize one or many regular triangular prisms with different features.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    centers : ndarray, shape (N, 3)</span>
<span class="sd">        Triangular prism positions.</span>
<span class="sd">    directions : ndarray, shape (N, 3)</span>
<span class="sd">        The orientation vector(s) of the triangular prism(s).</span>
<span class="sd">    colors : ndarray (N,3) or (N, 4) or tuple (3,) or tuple (4,)</span>
<span class="sd">        RGB or RGBA (for opacity) R, G, B and A should be at the range [0, 1].</span>
<span class="sd">    scales : int or ndarray (N,3) or tuple (3,), optional</span>
<span class="sd">        Triangular prism size on each direction (x, y), default(1)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    tprism_actor: Actor</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from fury import window, actor</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; centers = np.random.rand(3, 3)</span>
<span class="sd">    &gt;&gt;&gt; dirs = np.random.rand(3, 3)</span>
<span class="sd">    &gt;&gt;&gt; colors = np.random.rand(3, 3)</span>
<span class="sd">    &gt;&gt;&gt; scales = np.random.rand(3, 1)</span>
<span class="sd">    &gt;&gt;&gt; actor = actor.triangularprism(centers, dirs, colors, scales)</span>
<span class="sd">    &gt;&gt;&gt; scene.add(actor)</span>
<span class="sd">    &gt;&gt;&gt; # window.show(scene)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verts</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">prim_triangularprism</span><span class="p">()</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">repeat_primitive</span><span class="p">(</span>
        <span class="n">verts</span><span class="p">,</span>
        <span class="n">faces</span><span class="p">,</span>
        <span class="n">directions</span><span class="o">=</span><span class="n">directions</span><span class="p">,</span>
        <span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
        <span class="n">scales</span><span class="o">=</span><span class="n">scales</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">res</span>
    <span class="n">prim_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">centers</span><span class="p">)</span>
    <span class="n">tprism_actor</span> <span class="o">=</span> <span class="n">get_actor_from_primitive</span><span class="p">(</span>
        <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">prim_count</span><span class="o">=</span><span class="n">prim_count</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">tprism_actor</span></div>


<div class="viewcode-block" id="rhombicuboctahedron"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.rhombicuboctahedron">[docs]</a><span class="k">def</span> <span class="nf">rhombicuboctahedron</span><span class="p">(</span><span class="n">centers</span><span class="p">,</span> <span class="n">directions</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">colors</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">scales</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visualize one or many rhombicuboctahedron with different features.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    centers : ndarray, shape (N, 3)</span>
<span class="sd">        Rhombicuboctahedron positions.</span>
<span class="sd">    directions : ndarray, shape (N, 3)</span>
<span class="sd">        The orientation vector(s) of the Rhombicuboctahedron(s).</span>
<span class="sd">    colors : ndarray (N,3) or (N, 4) or tuple (3,) or tuple (4,)</span>
<span class="sd">        RGB or RGBA (for opacity) R, G, B and A should be at the range [0, 1].</span>
<span class="sd">    scales : int or ndarray (N,3) or tuple (3,), optional</span>
<span class="sd">        Rhombicuboctahedron size on each direction (x, y), default(1)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    rcoh_actor: Actor</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from fury import window, actor</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; centers = np.random.rand(3, 3)</span>
<span class="sd">    &gt;&gt;&gt; dirs = np.random.rand(3, 3)</span>
<span class="sd">    &gt;&gt;&gt; colors = np.random.rand(3, 3)</span>
<span class="sd">    &gt;&gt;&gt; scales = np.random.rand(3, 1)</span>
<span class="sd">    &gt;&gt;&gt; actor = actor.rhombicuboctahedron(centers, dirs, colors, scales)</span>
<span class="sd">    &gt;&gt;&gt; scene.add(actor)</span>
<span class="sd">    &gt;&gt;&gt; # window.show(scene)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verts</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">prim_rhombicuboctahedron</span><span class="p">()</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">repeat_primitive</span><span class="p">(</span>
        <span class="n">verts</span><span class="p">,</span>
        <span class="n">faces</span><span class="p">,</span>
        <span class="n">directions</span><span class="o">=</span><span class="n">directions</span><span class="p">,</span>
        <span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
        <span class="n">scales</span><span class="o">=</span><span class="n">scales</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">res</span>
    <span class="n">prim_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">centers</span><span class="p">)</span>
    <span class="n">rcoh_actor</span> <span class="o">=</span> <span class="n">get_actor_from_primitive</span><span class="p">(</span>
        <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">prim_count</span><span class="o">=</span><span class="n">prim_count</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">rcoh_actor</span></div>


<div class="viewcode-block" id="pentagonalprism"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.pentagonalprism">[docs]</a><span class="k">def</span> <span class="nf">pentagonalprism</span><span class="p">(</span><span class="n">centers</span><span class="p">,</span> <span class="n">directions</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">colors</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">scales</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visualize one or many pentagonal prisms with different features.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    centers : ndarray, shape (N, 3), optional</span>
<span class="sd">        Pentagonal prism positions.</span>
<span class="sd">    directions : ndarray, shape (N, 3), optional</span>
<span class="sd">        The orientation vector of the pentagonal prism.</span>
<span class="sd">    colors : ndarray (N,3) or (N, 4) or tuple (3,) or tuple (4,), optional</span>
<span class="sd">        RGB or RGBA (for opacity) R, G, B and A should be at the range [0, 1].</span>
<span class="sd">    scales : int or ndarray (N,3) or tuple (3,), optional</span>
<span class="sd">        Pentagonal prism size on each direction (x, y), default(1)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pent_actor: Actor</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; import numpy as np</span>
<span class="sd">    &gt;&gt;&gt; from fury import window, actor</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; centers = np.random.rand(3, 3)</span>
<span class="sd">    &gt;&gt;&gt; dirs = np.random.rand(3, 3)</span>
<span class="sd">    &gt;&gt;&gt; colors = np.random.rand(3, 3)</span>
<span class="sd">    &gt;&gt;&gt; scales = np.random.rand(3, 1)</span>
<span class="sd">    &gt;&gt;&gt; actor_pentagonal = actor.pentagonalprism(centers, dirs, colors, scales)</span>
<span class="sd">    &gt;&gt;&gt; scene.add(actor_pentagonal)</span>
<span class="sd">    &gt;&gt;&gt; # window.show(scene)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verts</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">prim_pentagonalprism</span><span class="p">()</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">repeat_primitive</span><span class="p">(</span>
        <span class="n">verts</span><span class="p">,</span>
        <span class="n">faces</span><span class="p">,</span>
        <span class="n">directions</span><span class="o">=</span><span class="n">directions</span><span class="p">,</span>
        <span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
        <span class="n">scales</span><span class="o">=</span><span class="n">scales</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">res</span>
    <span class="n">prim_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">centers</span><span class="p">)</span>
    <span class="n">pent_actor</span> <span class="o">=</span> <span class="n">get_actor_from_primitive</span><span class="p">(</span>
        <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">prim_count</span><span class="o">=</span><span class="n">prim_count</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">pent_actor</span></div>


<div class="viewcode-block" id="octagonalprism"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.octagonalprism">[docs]</a><span class="k">def</span> <span class="nf">octagonalprism</span><span class="p">(</span><span class="n">centers</span><span class="p">,</span> <span class="n">directions</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">colors</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">scales</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visualize one or many octagonal prisms with different features.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    centers : ndarray, shape (N, 3)</span>
<span class="sd">        Octagonal prism positions.</span>
<span class="sd">    directions : ndarray, shape (N, 3)</span>
<span class="sd">        The orientation vector of the octagonal prism.</span>
<span class="sd">    colors : ndarray (N,3) or (N, 4) or tuple (3,) or tuple (4,)</span>
<span class="sd">        RGB or RGBA (for opacity) R, G, B and A should be at the range [0, 1].</span>
<span class="sd">    scales : int or ndarray (N,3) or tuple (3,), optional</span>
<span class="sd">        Octagonal prism size on each direction (x, y), default(1)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    oct_actor: Actor</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from fury import window, actor</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; centers = np.random.rand(3, 3)</span>
<span class="sd">    &gt;&gt;&gt; dirs = np.random.rand(3, 3)</span>
<span class="sd">    &gt;&gt;&gt; colors = np.random.rand(3, 3)</span>
<span class="sd">    &gt;&gt;&gt; scales = np.random.rand(3, 1)</span>
<span class="sd">    &gt;&gt;&gt; actor = actor.octagonalprism(centers, dirs, colors, scales)</span>
<span class="sd">    &gt;&gt;&gt; scene.add(actor)</span>
<span class="sd">    &gt;&gt;&gt; # window.show(scene)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verts</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">prim_octagonalprism</span><span class="p">()</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">repeat_primitive</span><span class="p">(</span>
        <span class="n">verts</span><span class="p">,</span>
        <span class="n">faces</span><span class="p">,</span>
        <span class="n">directions</span><span class="o">=</span><span class="n">directions</span><span class="p">,</span>
        <span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
        <span class="n">scales</span><span class="o">=</span><span class="n">scales</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">res</span>
    <span class="n">prim_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">centers</span><span class="p">)</span>
    <span class="n">oct_actor</span> <span class="o">=</span> <span class="n">get_actor_from_primitive</span><span class="p">(</span>
        <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">prim_count</span><span class="o">=</span><span class="n">prim_count</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">oct_actor</span></div>


<div class="viewcode-block" id="frustum"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.frustum">[docs]</a><span class="k">def</span> <span class="nf">frustum</span><span class="p">(</span><span class="n">centers</span><span class="p">,</span> <span class="n">directions</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">colors</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">scales</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visualize one or many frustum pyramids with different features.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    centers : ndarray, shape (N, 3)</span>
<span class="sd">        Frustum pyramid positions.</span>
<span class="sd">    directions : ndarray, shape (N, 3)</span>
<span class="sd">        The orientation vector of the frustum pyramid.</span>
<span class="sd">    colors : ndarray (N,3) or (N, 4) or tuple (3,) or tuple (4,)</span>
<span class="sd">        RGB or RGBA (for opacity) R, G, B and A should be at the range [0, 1].</span>
<span class="sd">    scales : int or ndarray (N,3) or tuple (3,), optional</span>
<span class="sd">        Frustum pyramid size on each direction (x, y), default(1)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    frustum_actor: Actor</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from fury import window, actor</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; centers = np.random.rand(4, 3)</span>
<span class="sd">    &gt;&gt;&gt; dirs = np.random.rand(4, 3)</span>
<span class="sd">    &gt;&gt;&gt; colors = np.random.rand(4, 3)</span>
<span class="sd">    &gt;&gt;&gt; scales = np.random.rand(4, 1)</span>
<span class="sd">    &gt;&gt;&gt; actor = actor.frustum(centers, dirs, colors, scales)</span>
<span class="sd">    &gt;&gt;&gt; scene.add(actor)</span>
<span class="sd">    &gt;&gt;&gt; # window.show(scene)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verts</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">prim_frustum</span><span class="p">()</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">repeat_primitive</span><span class="p">(</span>
        <span class="n">verts</span><span class="p">,</span>
        <span class="n">faces</span><span class="p">,</span>
        <span class="n">directions</span><span class="o">=</span><span class="n">directions</span><span class="p">,</span>
        <span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
        <span class="n">scales</span><span class="o">=</span><span class="n">scales</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">res</span>
    <span class="n">prim_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">centers</span><span class="p">)</span>
    <span class="n">frustum_actor</span> <span class="o">=</span> <span class="n">get_actor_from_primitive</span><span class="p">(</span>
        <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">prim_count</span><span class="o">=</span><span class="n">prim_count</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">frustum_actor</span></div>


<div class="viewcode-block" id="superquadric"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.superquadric">[docs]</a><span class="k">def</span> <span class="nf">superquadric</span><span class="p">(</span>
    <span class="n">centers</span><span class="p">,</span> <span class="n">roundness</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">directions</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">colors</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">scales</span><span class="o">=</span><span class="mi">1</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Visualize one or many superquadrics with different features.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    centers : ndarray, shape (N, 3)</span>
<span class="sd">        Superquadrics positions.</span>
<span class="sd">    roundness : ndarray, shape (N, 2) or tuple/list (2,), optional</span>
<span class="sd">        parameters (Phi and Theta) that control the shape of the superquadric.</span>
<span class="sd">    directions : ndarray, shape (N, 3) or tuple (3,), optional</span>
<span class="sd">        The orientation vector of the cone.</span>
<span class="sd">    colors : ndarray (N,3) or (N, 4) or tuple (3,) or tuple (4,)</span>
<span class="sd">        RGB or RGBA (for opacity) R, G, B and A should be at the range [0, 1].</span>
<span class="sd">    scales : ndarray, shape (N) or (N,3) or float or int, optional</span>
<span class="sd">        The height of the cone.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    spq_actor: Actor</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from fury import window, actor</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; centers = np.random.rand(3, 3) * 10</span>
<span class="sd">    &gt;&gt;&gt; directions = np.random.rand(3, 3)</span>
<span class="sd">    &gt;&gt;&gt; scales = np.random.rand(3)</span>
<span class="sd">    &gt;&gt;&gt; colors = np.random.rand(3, 3)</span>
<span class="sd">    &gt;&gt;&gt; roundness = np.array([[1, 1], [1, 2], [2, 1]])</span>
<span class="sd">    &gt;&gt;&gt; sq_actor = actor.superquadric(centers, roundness=roundness,</span>
<span class="sd">    ...                               directions=directions,</span>
<span class="sd">    ...                               colors=colors, scales=scales)</span>
<span class="sd">    &gt;&gt;&gt; scene.add(sq_actor)</span>
<span class="sd">    &gt;&gt;&gt; # window.show(scene)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">have_2_dimensions</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">)</span>

    <span class="c1"># reshape roundness to a valid numpy array</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="nb">isinstance</span><span class="p">(</span><span class="n">roundness</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">))</span>
        <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">roundness</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
        <span class="ow">and</span> <span class="ow">not</span> <span class="n">have_2_dimensions</span><span class="p">(</span><span class="n">roundness</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="n">roundness</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">roundness</span><span class="p">]</span> <span class="o">*</span> <span class="n">centers</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roundness</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">roundness</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">roundness</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">roundness</span><span class="p">,</span> <span class="n">centers</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">roundness</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">roundness</span><span class="p">)</span>

    <span class="n">res</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">repeat_primitive_function</span><span class="p">(</span>
        <span class="n">func</span><span class="o">=</span><span class="n">fp</span><span class="o">.</span><span class="n">prim_superquadric</span><span class="p">,</span>
        <span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span>
        <span class="n">func_args</span><span class="o">=</span><span class="n">roundness</span><span class="p">,</span>
        <span class="n">directions</span><span class="o">=</span><span class="n">directions</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
        <span class="n">scales</span><span class="o">=</span><span class="n">scales</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">res</span>
    <span class="n">prim_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">centers</span><span class="p">)</span>
    <span class="n">spq_actor</span> <span class="o">=</span> <span class="n">get_actor_from_primitive</span><span class="p">(</span>
        <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">prim_count</span><span class="o">=</span><span class="n">prim_count</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">spq_actor</span></div>


<div class="viewcode-block" id="billboard"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.billboard">[docs]</a><span class="k">def</span> <span class="nf">billboard</span><span class="p">(</span>
    <span class="n">centers</span><span class="p">,</span>
    <span class="n">colors</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">scales</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">vs_dec</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vs_impl</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">gs_prog</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fs_dec</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fs_impl</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">bb_type</span><span class="o">=</span><span class="s1">&#39;spherical&#39;</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a billboard actor.</span>
<span class="sd">-</span>
<span class="sd">    Billboards are 2D elements placed in a 3D world. They offer possibility to</span>
<span class="sd">    draw different shapes/elements at the fragment shader level.</span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    centers : ndarray, shape (N, 3)</span>
<span class="sd">        Billboard positions.</span>
<span class="sd">    colors : ndarray (N,3) or (N, 4) or tuple (3,) or tuple (4,)</span>
<span class="sd">        RGB or RGBA (for opacity) R, G, B and A should be at the range [0, 1].</span>
<span class="sd">    scales : ndarray, shape (N) or (N,3) or float or int, optional</span>
<span class="sd">        The scale of the billboards.</span>
<span class="sd">    vs_dec : str or list of str, optional</span>
<span class="sd">        Vertex Shader code that contains all variable/function declarations.</span>
<span class="sd">    vs_impl : str or list of str, optional</span>
<span class="sd">        Vertex Shaders code that contains all variable/function</span>
<span class="sd">        implementations.</span>
<span class="sd">    gs_prog : str, optional</span>
<span class="sd">        Geometry Shader program.</span>
<span class="sd">    fs_dec : str or list of str, optional</span>
<span class="sd">        Fragment Shaders code that contains all variable/function declarations.</span>
<span class="sd">    fs_impl : str or list of str, optional</span>
<span class="sd">        Fragment Shaders code that contains all variable/function</span>
<span class="sd">        implementation.</span>
<span class="sd">    bb_type : str, optional</span>
<span class="sd">        Type of billboard (spherical, cylindrical_x, cylindrical_y).</span>
<span class="sd">        If spherical, billboard will always face the camera.</span>
<span class="sd">        If cylindrical_x or cylindrical_y, billboard will face the camera only</span>
<span class="sd">        when rotating around x-axis and y-axis respectively.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    billboard_actor: Actor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">verts</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">prim_square</span><span class="p">()</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">repeat_primitive</span><span class="p">(</span>
        <span class="n">verts</span><span class="p">,</span> <span class="n">faces</span><span class="p">,</span> <span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">scales</span><span class="o">=</span><span class="n">scales</span>
    <span class="p">)</span>

    <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">big_centers</span> <span class="o">=</span> <span class="n">res</span>

    <span class="n">prim_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">centers</span><span class="p">)</span>
    <span class="n">bb_actor</span> <span class="o">=</span> <span class="n">get_actor_from_primitive</span><span class="p">(</span>
        <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">prim_count</span><span class="o">=</span><span class="n">prim_count</span>
    <span class="p">)</span>
    <span class="n">bb_actor</span><span class="o">.</span><span class="n">GetMapper</span><span class="p">()</span><span class="o">.</span><span class="n">SetVBOShiftScaleMethod</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">bb_actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">BackfaceCullingOff</span><span class="p">()</span>
    <span class="n">attribute_to_actor</span><span class="p">(</span><span class="n">bb_actor</span><span class="p">,</span> <span class="n">big_centers</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span><span class="p">)</span>

    <span class="n">bb_norm</span> <span class="o">=</span> <span class="n">import_fury_shader</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;utils&#39;</span><span class="p">,</span>
                                              <span class="s1">&#39;billboard_normalization.glsl&#39;</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">bb_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;cylindrical_x&#39;</span><span class="p">:</span>
        <span class="n">bb_type_sd</span> <span class="o">=</span> <span class="n">import_fury_shader</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;billboard&#39;</span><span class="p">,</span>
                                                     <span class="s1">&#39;cylindrical_x.glsl&#39;</span><span class="p">)</span>
                                        <span class="p">)</span>
        <span class="n">v_pos_mc</span> <span class="o">=</span> \
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            vec3 vertexPositionMC = cylindricalXVertexPos(center, MCVCMatrix,</span>
<span class="sd">                                        normalizedVertexMCVSOutput, shape);</span>
<span class="sd">            &quot;&quot;&quot;</span>
    <span class="k">elif</span> <span class="n">bb_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;cylindrical_y&#39;</span><span class="p">:</span>
        <span class="n">bb_type_sd</span> <span class="o">=</span> <span class="n">import_fury_shader</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;billboard&#39;</span><span class="p">,</span>
                                                     <span class="s1">&#39;cylindrical_y.glsl&#39;</span><span class="p">)</span>
                                        <span class="p">)</span>
        <span class="n">v_pos_mc</span> <span class="o">=</span> \
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            vec3 vertexPositionMC = cylindricalYVertexPos(center,MCVCMatrix,</span>
<span class="sd">                                        normalizedVertexMCVSOutput, shape);</span>
<span class="sd">            &quot;&quot;&quot;</span>
    <span class="k">elif</span> <span class="n">bb_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;spherical&#39;</span><span class="p">:</span>
        <span class="n">bb_type_sd</span> <span class="o">=</span> <span class="n">import_fury_shader</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;billboard&#39;</span><span class="p">,</span>
                                                     <span class="s1">&#39;spherical.glsl&#39;</span><span class="p">))</span>
        <span class="n">v_pos_mc</span> <span class="o">=</span> \
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            vec3 vertexPositionMC = sphericalVertexPos(center, MCVCMatrix,</span>
<span class="sd">                                        normalizedVertexMCVSOutput, shape);</span>
<span class="sd">            &quot;&quot;&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">bb_type_sd</span> <span class="o">=</span> <span class="n">import_fury_shader</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;billboard&#39;</span><span class="p">,</span>
                                                     <span class="s1">&#39;spherical.glsl&#39;</span><span class="p">))</span>
        <span class="n">v_pos_mc</span> <span class="o">=</span> \
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            vec3 vertexPositionMC = sphericalVertexPos(center, MCVCMatrix,</span>
<span class="sd">                                        normalizedVertexMCVSOutput, shape);</span>
<span class="sd">            &quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;Invalid option. The billboard will be generated &#39;</span>
                      <span class="s1">&#39;with the default spherical option. &#39;</span><span class="p">,</span> <span class="ne">UserWarning</span><span class="p">)</span>

    <span class="n">gl_position</span> <span class="o">=</span> \
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        gl_Position = MCDCMatrix * vec4(vertexPositionMC, 1.);</span>
<span class="sd">        &#39;&#39;&#39;</span>

    <span class="n">billboard_dec_vert</span> <span class="o">=</span> \
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        /* Billboard  vertex shader declaration */</span>
<span class="sd">        in vec3 center;</span>

<span class="sd">        out vec3 centerVertexMCVSOutput;</span>
<span class="sd">        out vec3 normalizedVertexMCVSOutput;</span>
<span class="sd">        &#39;&#39;&#39;</span>

    <span class="n">billboard_impl_vert</span> <span class="o">=</span> \
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        /* Billboard  vertex shader implementation */</span>
<span class="sd">        centerVertexMCVSOutput = center;</span>
<span class="sd">        normalizedVertexMCVSOutput = bbNorm(vertexMC.xyz, center);</span>
<span class="sd">        float scalingFactor = 1. / abs(normalizedVertexMCVSOutput.x);</span>
<span class="sd">        float size = abs((vertexMC.xyz - center).x) * 2;</span>
<span class="sd">        vec2 shape = vec2(size, size); // Fixes the scaling issue</span>
<span class="sd">        &#39;&#39;&#39;</span>

    <span class="n">billboard_dec_frag</span> <span class="o">=</span> \
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        /* Billboard  fragment shader declaration */</span>
<span class="sd">        in vec3 centerVertexMCVSOutput;</span>
<span class="sd">        in vec3 normalizedVertexMCVSOutput;</span>
<span class="sd">        &#39;&#39;&#39;</span>

    <span class="n">billboard_impl_frag</span> <span class="o">=</span> \
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        /* Billboard  Fragment shader implementation */</span>
<span class="sd">        // Renaming variables passed from the Vertex Shader</span>
<span class="sd">        vec3 color = vertexColorVSOutput.rgb;</span>
<span class="sd">        vec3 point = normalizedVertexMCVSOutput;</span>
<span class="sd">        fragOutput0 = vec4(color, 1.);</span>
<span class="sd">        &#39;&#39;&#39;</span>

    <span class="n">billboard_vert_impl</span> <span class="o">=</span> <span class="n">compose_shader</span><span class="p">(</span>
        <span class="p">[</span><span class="n">billboard_impl_vert</span><span class="p">,</span> <span class="n">v_pos_mc</span><span class="p">,</span> <span class="n">gl_position</span><span class="p">])</span>

    <span class="n">vs_dec_code</span> <span class="o">=</span> <span class="n">compose_shader</span><span class="p">(</span>
        <span class="p">[</span><span class="n">billboard_dec_vert</span><span class="p">,</span> <span class="n">compose_shader</span><span class="p">(</span><span class="n">vs_dec</span><span class="p">),</span> <span class="n">bb_norm</span><span class="p">,</span> <span class="n">bb_type_sd</span><span class="p">])</span>
    <span class="n">vs_impl_code</span> <span class="o">=</span> <span class="n">compose_shader</span><span class="p">(</span>
        <span class="p">[</span><span class="n">compose_shader</span><span class="p">(</span><span class="n">vs_impl</span><span class="p">),</span> <span class="n">billboard_vert_impl</span><span class="p">])</span>

    <span class="n">gs_code</span> <span class="o">=</span> <span class="n">compose_shader</span><span class="p">(</span><span class="n">gs_prog</span><span class="p">)</span>
    <span class="n">fs_dec_code</span> <span class="o">=</span> <span class="n">compose_shader</span><span class="p">(</span>
        <span class="p">[</span><span class="n">billboard_dec_frag</span><span class="p">,</span> <span class="n">compose_shader</span><span class="p">(</span><span class="n">fs_dec</span><span class="p">)]</span>
    <span class="p">)</span>
    <span class="n">fs_impl_code</span> <span class="o">=</span> <span class="n">compose_shader</span><span class="p">(</span>
        <span class="p">[</span><span class="n">billboard_impl_frag</span><span class="p">,</span> <span class="n">compose_shader</span><span class="p">(</span><span class="n">fs_impl</span><span class="p">)]</span>
    <span class="p">)</span>

    <span class="n">shader_to_actor</span><span class="p">(</span><span class="n">bb_actor</span><span class="p">,</span> <span class="s1">&#39;vertex&#39;</span><span class="p">,</span> <span class="n">impl_code</span><span class="o">=</span><span class="n">vs_impl_code</span><span class="p">,</span>
                    <span class="n">decl_code</span><span class="o">=</span><span class="n">vs_dec_code</span><span class="p">)</span>
    <span class="n">replace_shader_in_actor</span><span class="p">(</span><span class="n">bb_actor</span><span class="p">,</span> <span class="s1">&#39;geometry&#39;</span><span class="p">,</span> <span class="n">gs_code</span><span class="p">)</span>
    <span class="n">shader_to_actor</span><span class="p">(</span><span class="n">bb_actor</span><span class="p">,</span> <span class="s1">&#39;fragment&#39;</span><span class="p">,</span> <span class="n">decl_code</span><span class="o">=</span><span class="n">fs_dec_code</span><span class="p">)</span>
    <span class="n">shader_to_actor</span><span class="p">(</span><span class="n">bb_actor</span><span class="p">,</span> <span class="s1">&#39;fragment&#39;</span><span class="p">,</span> <span class="n">impl_code</span><span class="o">=</span><span class="n">fs_impl_code</span><span class="p">,</span>
                    <span class="n">block</span><span class="o">=</span><span class="s1">&#39;light&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">bb_actor</span></div>


<div class="viewcode-block" id="vector_text"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.vector_text">[docs]</a><span class="k">def</span> <span class="nf">vector_text</span><span class="p">(</span>
    <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Origin&#39;</span><span class="p">,</span>
    <span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">scale</span><span class="o">=</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">),</span>
    <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="n">direction</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="n">extrusion</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
    <span class="n">align_center</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a label actor.</span>

<span class="sd">    This actor will always face the camera.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    text : str</span>
<span class="sd">        Text for the label.</span>
<span class="sd">    pos : (3,) array_like, optional</span>
<span class="sd">        Left down position of the label.</span>
<span class="sd">    scale : (3,) array_like</span>
<span class="sd">        Changes the size of the label.</span>
<span class="sd">    color : (3,) array_like</span>
<span class="sd">        Label color as ``(r,g,b)`` tuple.</span>
<span class="sd">    direction : (3,) array_like, optional, default: (0, 0, 1)</span>
<span class="sd">        The direction of the label. If None, label will follow the camera.</span>
<span class="sd">    extrusion : float, optional</span>
<span class="sd">        The extrusion amount of the text in Z axis.</span>
<span class="sd">    align_center : bool, optional, default: True</span>
<span class="sd">        If `True`, the anchor of the actor will be the center of the text.</span>
<span class="sd">        If `False`, the anchor will be at the left bottom of the text.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    l : Actor object</span>
<span class="sd">        Label.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from fury import window, actor</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; l = actor.vector_text(text=&#39;Hello&#39;)</span>
<span class="sd">    &gt;&gt;&gt; scene.add(l)</span>
<span class="sd">    &gt;&gt;&gt; # window.show(scene)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">atext</span> <span class="o">=</span> <span class="n">VectorText</span><span class="p">()</span>
    <span class="n">atext</span><span class="o">.</span><span class="n">SetText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="n">textm</span> <span class="o">=</span> <span class="n">PolyDataMapper</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">extrusion</span><span class="p">:</span>
        <span class="n">extruded_text</span> <span class="o">=</span> <span class="n">LinearExtrusionFilter</span><span class="p">()</span>
        <span class="n">extruded_text</span><span class="o">.</span><span class="n">SetInputConnection</span><span class="p">(</span><span class="n">atext</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">())</span>
        <span class="n">extruded_text</span><span class="o">.</span><span class="n">SetExtrusionTypeToNormalExtrusion</span><span class="p">()</span>
        <span class="n">extruded_text</span><span class="o">.</span><span class="n">SetVector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">extrusion</span><span class="p">)</span>
        <span class="n">atext</span> <span class="o">=</span> <span class="n">extruded_text</span>

    <span class="n">trans_matrix</span> <span class="o">=</span> <span class="n">Transform</span><span class="p">()</span>
    <span class="n">trans_matrix</span><span class="o">.</span><span class="n">PostMultiply</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">direction</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># set text to follow the camera if direction is None.</span>
        <span class="n">texta</span> <span class="o">=</span> <span class="n">Follower</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">add_to_scene</span><span class="p">(</span><span class="n">scene</span><span class="p">):</span>
            <span class="n">texta</span><span class="o">.</span><span class="n">SetCamera</span><span class="p">(</span><span class="n">scene</span><span class="o">.</span><span class="n">GetActiveCamera</span><span class="p">())</span>
            <span class="n">scene</span><span class="o">.</span><span class="n">AddActor</span><span class="p">(</span><span class="n">texta</span><span class="p">)</span>

        <span class="n">texta</span><span class="o">.</span><span class="n">add_to_scene</span> <span class="o">=</span> <span class="n">add_to_scene</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">texta</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">()</span>
        <span class="n">textm</span><span class="o">.</span><span class="n">SetInputConnection</span><span class="p">(</span><span class="n">atext</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">())</span>

        <span class="n">orig_dir</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">direction</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">direction</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">direction</span> <span class="o">/=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">direction</span><span class="p">)</span>
        <span class="n">normal_vec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">orig_dir</span><span class="p">,</span> <span class="n">direction</span><span class="p">)</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arccos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">orig_dir</span><span class="p">,</span> <span class="n">direction</span><span class="p">))</span>
        <span class="n">trans_matrix</span><span class="o">.</span><span class="n">RotateWXYZ</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="o">*</span><span class="n">normal_vec</span><span class="p">)</span>

    <span class="n">trans_matrix</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="o">*</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>

    <span class="n">plan</span> <span class="o">=</span> <span class="n">TransformPolyDataFilter</span><span class="p">()</span>
    <span class="n">plan</span><span class="o">.</span><span class="n">SetInputConnection</span><span class="p">(</span><span class="n">atext</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">())</span>
    <span class="n">plan</span><span class="o">.</span><span class="n">SetTransform</span><span class="p">(</span><span class="n">trans_matrix</span><span class="p">)</span>
    <span class="n">textm</span><span class="o">.</span><span class="n">SetInputConnection</span><span class="p">(</span><span class="n">plan</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">())</span>

    <span class="n">texta</span><span class="o">.</span><span class="n">SetMapper</span><span class="p">(</span><span class="n">textm</span><span class="p">)</span>

    <span class="n">texta</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetColor</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

    <span class="c1"># Set rotation origin to the center of the text is following the camera</span>
    <span class="k">if</span> <span class="n">align_center</span> <span class="ow">or</span> <span class="n">direction</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">trans_matrix</span><span class="o">.</span><span class="n">Translate</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">textm</span><span class="o">.</span><span class="n">GetCenter</span><span class="p">()))</span>

    <span class="n">texta</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="o">*</span><span class="n">pos</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">texta</span></div>


<span class="n">label</span> <span class="o">=</span> <span class="n">deprecate_with_version</span><span class="p">(</span>
    <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Label function has been renamed&#39;</span> <span class="s1">&#39; vector_text&#39;</span><span class="p">,</span>
    <span class="n">since</span><span class="o">=</span><span class="s1">&#39;0.7.1&#39;</span><span class="p">,</span>
    <span class="n">until</span><span class="o">=</span><span class="s1">&#39;0.9.0&#39;</span><span class="p">,</span>
<span class="p">)(</span><span class="n">vector_text</span><span class="p">)</span>


<div class="viewcode-block" id="text_3d"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.text_3d">[docs]</a><span class="k">def</span> <span class="nf">text_3d</span><span class="p">(</span>
    <span class="n">text</span><span class="p">,</span>
    <span class="n">position</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="n">font_size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
    <span class="n">font_family</span><span class="o">=</span><span class="s1">&#39;Arial&#39;</span><span class="p">,</span>
    <span class="n">justification</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span>
    <span class="n">vertical_justification</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span>
    <span class="n">bold</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">italic</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">shadow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate 2D text that lives in the 3D world.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    text : str</span>
<span class="sd">    position : tuple</span>
<span class="sd">    color : tuple</span>
<span class="sd">    font_size : int</span>
<span class="sd">    font_family : str</span>
<span class="sd">    justification : str</span>
<span class="sd">        Left, center or right (default left).</span>
<span class="sd">    vertical_justification : str</span>
<span class="sd">        Bottom, middle or top (default bottom).</span>
<span class="sd">    bold : bool</span>
<span class="sd">    italic : bool</span>
<span class="sd">    shadow : bool</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Text3D</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">class</span> <span class="nc">Text3D</span><span class="p">(</span><span class="n">TextActor3D</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_message</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">set_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SetInput</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">get_message</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetInput</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">font_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">GetTextProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetFontSize</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
            <span class="n">text_actor</span><span class="o">.</span><span class="n">SetScale</span><span class="p">((</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mf">24.0</span> <span class="o">*</span> <span class="n">size</span><span class="p">,)</span> <span class="o">*</span> <span class="mi">3</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">font_family</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_family</span><span class="o">=</span><span class="s1">&#39;Arial&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">GetTextProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetFontFamilyToArial</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">justification</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">justification</span><span class="p">):</span>
            <span class="n">tprop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetTextProperty</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">justification</span> <span class="o">==</span> <span class="s1">&#39;left&#39;</span><span class="p">:</span>
                <span class="n">tprop</span><span class="o">.</span><span class="n">SetJustificationToLeft</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">justification</span> <span class="o">==</span> <span class="s1">&#39;center&#39;</span><span class="p">:</span>
                <span class="n">tprop</span><span class="o">.</span><span class="n">SetJustificationToCentered</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">justification</span> <span class="o">==</span> <span class="s1">&#39;right&#39;</span><span class="p">:</span>
                <span class="n">tprop</span><span class="o">.</span><span class="n">SetJustificationToRight</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unknown justification: &#39;</span><span class="si">{}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">justification</span><span class="p">))</span>

        <span class="k">def</span> <span class="nf">vertical_justification</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">justification</span><span class="p">):</span>
            <span class="n">tprop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetTextProperty</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">justification</span> <span class="o">==</span> <span class="s1">&#39;top&#39;</span><span class="p">:</span>
                <span class="n">tprop</span><span class="o">.</span><span class="n">SetVerticalJustificationToTop</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">justification</span> <span class="o">==</span> <span class="s1">&#39;middle&#39;</span><span class="p">:</span>
                <span class="n">tprop</span><span class="o">.</span><span class="n">SetVerticalJustificationToCentered</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">justification</span> <span class="o">==</span> <span class="s1">&#39;bottom&#39;</span><span class="p">:</span>
                <span class="n">tprop</span><span class="o">.</span><span class="n">SetVerticalJustificationToBottom</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Unknown vertical justification: &#39;</span><span class="si">{}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">justification</span><span class="p">)</span>
                <span class="p">)</span>

        <span class="k">def</span> <span class="nf">font_style</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">italic</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">shadow</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="n">tprop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetTextProperty</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">bold</span><span class="p">:</span>
                <span class="n">tprop</span><span class="o">.</span><span class="n">BoldOn</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tprop</span><span class="o">.</span><span class="n">BoldOff</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">italic</span><span class="p">:</span>
                <span class="n">tprop</span><span class="o">.</span><span class="n">ItalicOn</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tprop</span><span class="o">.</span><span class="n">ItalicOff</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">shadow</span><span class="p">:</span>
                <span class="n">tprop</span><span class="o">.</span><span class="n">ShadowOn</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tprop</span><span class="o">.</span><span class="n">ShadowOff</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">GetTextProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetColor</span><span class="p">(</span><span class="o">*</span><span class="n">color</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">set_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">get_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetPosition</span><span class="p">()</span>

    <span class="n">text_actor</span> <span class="o">=</span> <span class="n">Text3D</span><span class="p">()</span>
    <span class="n">text_actor</span><span class="o">.</span><span class="n">message</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="n">text_actor</span><span class="o">.</span><span class="n">font_size</span><span class="p">(</span><span class="n">font_size</span><span class="p">)</span>
    <span class="n">text_actor</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
    <span class="n">text_actor</span><span class="o">.</span><span class="n">font_family</span><span class="p">(</span><span class="n">font_family</span><span class="p">)</span>
    <span class="n">text_actor</span><span class="o">.</span><span class="n">font_style</span><span class="p">(</span><span class="n">bold</span><span class="p">,</span> <span class="n">italic</span><span class="p">,</span> <span class="n">shadow</span><span class="p">)</span>
    <span class="n">text_actor</span><span class="o">.</span><span class="n">color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="n">text_actor</span><span class="o">.</span><span class="n">justification</span><span class="p">(</span><span class="n">justification</span><span class="p">)</span>
    <span class="n">text_actor</span><span class="o">.</span><span class="n">vertical_justification</span><span class="p">(</span><span class="n">vertical_justification</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">text_actor</span></div>


<div class="viewcode-block" id="Container"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.Container">[docs]</a><span class="k">class</span> <span class="nc">Container</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Provides functionalities for grouping multiple actors using a given</span>
<span class="sd">    layout.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    anchor : 3-tuple of float</span>
<span class="sd">        Anchor of this container used when laying out items in a container.</span>
<span class="sd">        The anchor point is relative to the center of the container.</span>
<span class="sd">        Default: (0, 0, 0).</span>

<span class="sd">    padding : 6-tuple of float</span>
<span class="sd">        Padding around this container bounding box. The 6-tuple represents</span>
<span class="sd">        (pad_x_neg, pad_x_pos, pad_y_neg, pad_y_pos, pad_z_neg, pad_z_pos).</span>
<span class="sd">        Default: (0, 0, 0, 0, 0, 0).</span>

<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Container.__init__"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.Container.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="o">.</span><span class="n">Layout</span><span class="p">()):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        layout : ``fury.layout.Layout`` object</span>
<span class="sd">            Items of this container will be arranged according to `layout`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">layout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_items</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_need_update</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_visibility</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">padding</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_need_update</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_items</span>

<div class="viewcode-block" id="Container.add"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.Container.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">items</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds some items to this container.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        items : `vtkProp3D` objects</span>
<span class="sd">            Items to add to this container.</span>
<span class="sd">        borrow : bool</span>
<span class="sd">            If True the items are added as-is, otherwise a shallow copy is</span>
<span class="sd">            made first. If you intend to reuse the items elsewhere you</span>
<span class="sd">            should set `borrow=False`. Default: True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_need_update</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;borrow&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">shallow_copy</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span></div>

<div class="viewcode-block" id="Container.clear"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.Container.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clears all items of this container.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_need_update</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="p">[:]</span></div>

<div class="viewcode-block" id="Container.update"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.Container.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates the position of the items of this container.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_need_update</span> <span class="o">=</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Container.add_to_scene"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.Container.add_to_scene">[docs]</a>    <span class="k">def</span> <span class="nf">add_to_scene</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scene</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds the items of this container to a given scene.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Container</span><span class="p">):</span>
                <span class="n">item</span><span class="o">.</span><span class="n">add_to_scene</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">scene</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">item</span><span class="p">)</span></div>

<div class="viewcode-block" id="Container.remove_from_scene"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.Container.remove_from_scene">[docs]</a>    <span class="k">def</span> <span class="nf">remove_from_scene</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scene</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes the items of this container from a given scene.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Container</span><span class="p">):</span>
                <span class="n">item</span><span class="o">.</span><span class="n">remove_from_scene</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">scene</span><span class="o">.</span><span class="n">rm</span><span class="p">(</span><span class="n">item</span><span class="p">)</span></div>

<div class="viewcode-block" id="Container.GetBounds"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.Container.GetBounds">[docs]</a>    <span class="k">def</span> <span class="nf">GetBounds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the bounds of the container.&quot;&quot;&quot;</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>    <span class="c1"># x1, x2, y1, y2, z1, z2</span>
        <span class="n">bounds</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>    <span class="c1"># x1, y1, z1</span>
        <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span>  <span class="c1"># x2, y2, z2</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
            <span class="n">item_bounds</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">GetBounds</span><span class="p">()</span>
            <span class="n">bounds</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">minimum</span><span class="p">(</span><span class="n">bounds</span><span class="p">[::</span><span class="mi">2</span><span class="p">],</span> <span class="n">item_bounds</span><span class="p">[::</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">],</span> <span class="n">item_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">])</span>

        <span class="c1"># Add padding, if any.</span>
        <span class="n">bounds</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">padding</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">padding</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]</span>

        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span></div>

<div class="viewcode-block" id="Container.GetVisibility"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.Container.GetVisibility">[docs]</a>    <span class="k">def</span> <span class="nf">GetVisibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visibility</span></div>

<div class="viewcode-block" id="Container.SetVisibility"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.Container.SetVisibility">[docs]</a>    <span class="k">def</span> <span class="nf">SetVisibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">visibility</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_visibility</span> <span class="o">=</span> <span class="n">visibility</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
            <span class="n">item</span><span class="o">.</span><span class="n">SetVisibility</span><span class="p">(</span><span class="n">visibility</span><span class="p">)</span></div>

<div class="viewcode-block" id="Container.GetPosition"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.Container.GetPosition">[docs]</a>    <span class="k">def</span> <span class="nf">GetPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span></div>

<div class="viewcode-block" id="Container.AddPosition"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.Container.AddPosition">[docs]</a>    <span class="k">def</span> <span class="nf">AddPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">+=</span> <span class="n">position</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
            <span class="n">item</span><span class="o">.</span><span class="n">AddPosition</span><span class="p">(</span><span class="n">position</span><span class="p">)</span></div>

<div class="viewcode-block" id="Container.SetPosition"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.Container.SetPosition">[docs]</a>    <span class="k">def</span> <span class="nf">SetPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">AddPosition</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">position</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="p">)</span></div>

<div class="viewcode-block" id="Container.GetCenter"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.Container.GetCenter">[docs]</a>    <span class="k">def</span> <span class="nf">GetCenter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the center of the bounding box.&quot;&quot;&quot;</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z1</span><span class="p">,</span> <span class="n">z2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetBounds</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">((</span><span class="n">x1</span> <span class="o">+</span> <span class="n">x2</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span> <span class="p">(</span><span class="n">y1</span> <span class="o">+</span> <span class="n">y2</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span> <span class="p">(</span><span class="n">z1</span> <span class="o">+</span> <span class="n">z2</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span></div>

<div class="viewcode-block" id="Container.GetLength"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.Container.GetLength">[docs]</a>    <span class="k">def</span> <span class="nf">GetLength</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the length of bounding box diagonal.&quot;&quot;&quot;</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z1</span><span class="p">,</span> <span class="n">z2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetBounds</span><span class="p">()</span>
        <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">depth</span> <span class="o">=</span> <span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z2</span> <span class="o">-</span> <span class="n">z1</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="n">width</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">depth</span><span class="o">**</span><span class="mi">2</span><span class="p">]))</span></div>

<div class="viewcode-block" id="Container.NewInstance"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.Container.NewInstance">[docs]</a>    <span class="k">def</span> <span class="nf">NewInstance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Container</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">)</span></div>

<div class="viewcode-block" id="Container.ShallowCopy"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.Container.ShallowCopy">[docs]</a>    <span class="k">def</span> <span class="nf">ShallowCopy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">anchor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="o">*</span><span class="n">other</span><span class="o">.</span><span class="n">_items</span><span class="p">,</span> <span class="n">borrow</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="p">)</span></div>


<div class="viewcode-block" id="grid"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.grid">[docs]</a><span class="k">def</span> <span class="nf">grid</span><span class="p">(</span>
    <span class="n">actors</span><span class="p">,</span>
    <span class="n">captions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">caption_offset</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">cell_padding</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">cell_shape</span><span class="o">=</span><span class="s1">&#39;rect&#39;</span><span class="p">,</span>
    <span class="n">aspect_ratio</span><span class="o">=</span><span class="mi">16</span> <span class="o">/</span> <span class="mf">9.0</span><span class="p">,</span>
    <span class="n">dim</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a grid of actors that lies in the xy-plane.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    actors : list of `vtkProp3D` objects</span>
<span class="sd">        Actors to be layout in a grid manner.</span>
<span class="sd">    captions : list of `vtkProp3D` objects or list of str</span>
<span class="sd">        Objects serving as captions (can be any `vtkProp3D` object, not</span>
<span class="sd">        necessarily text). There should be one caption per actor. By</span>
<span class="sd">        default, there are no captions.</span>
<span class="sd">    caption_offset : tuple of float (optional)</span>
<span class="sd">        Tells where to position the caption w.r.t. the center of its</span>
<span class="sd">        associated actor. Default: (0, -100, 0).</span>
<span class="sd">    cell_padding : tuple of 2 floats or float</span>
<span class="sd">        Each grid cell will be padded according to (pad_x, pad_y) i.e.</span>
<span class="sd">        horizontally and vertically. Padding is evenly distributed on each</span>
<span class="sd">        side of the cell. If a single float is provided then both pad_x and</span>
<span class="sd">        pad_y will have the same value.</span>
<span class="sd">    cell_shape : str</span>
<span class="sd">        Specifies the desired shape of every grid cell.</span>
<span class="sd">        &#39;rect&#39; ensures the cells are the tightest.</span>
<span class="sd">        &#39;square&#39; ensures the cells are as wide as high.</span>
<span class="sd">        &#39;diagonal&#39; ensures the content of the cells can be rotated without</span>
<span class="sd">        colliding with content of the neighboring cells.</span>
<span class="sd">    aspect_ratio : float</span>
<span class="sd">        Aspect ratio of the grid (width/height). Default: 16:9.</span>
<span class="sd">    dim : tuple of int</span>
<span class="sd">        Dimension (nb_rows, nb_cols) of the grid. If provided,</span>
<span class="sd">        `aspect_ratio` will be ignored.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    ``fury.actor.Container`` object</span>
<span class="sd">        Object that represents the grid containing all the actors and</span>
<span class="sd">        captions, if any.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">grid_layout</span> <span class="o">=</span> <span class="n">layout</span><span class="o">.</span><span class="n">GridLayout</span><span class="p">(</span>
        <span class="n">cell_padding</span><span class="o">=</span><span class="n">cell_padding</span><span class="p">,</span>
        <span class="n">cell_shape</span><span class="o">=</span><span class="n">cell_shape</span><span class="p">,</span>
        <span class="n">aspect_ratio</span><span class="o">=</span><span class="n">aspect_ratio</span><span class="p">,</span>
        <span class="n">dim</span><span class="o">=</span><span class="n">dim</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">grid</span> <span class="o">=</span> <span class="n">Container</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="n">grid_layout</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">captions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">actors_with_caption</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">actor</span><span class="p">,</span> <span class="n">caption</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">actors</span><span class="p">,</span> <span class="n">captions</span><span class="p">):</span>

            <span class="n">actor_center</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">actor</span><span class="o">.</span><span class="n">GetCenter</span><span class="p">())</span>

            <span class="c1"># Offset accordingly the caption w.r.t.</span>
            <span class="c1"># the center of the associated actor.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">caption</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">caption</span> <span class="o">=</span> <span class="n">text_3d</span><span class="p">(</span><span class="n">caption</span><span class="p">,</span> <span class="n">justification</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">caption</span> <span class="o">=</span> <span class="n">shallow_copy</span><span class="p">(</span><span class="n">caption</span><span class="p">)</span>
            <span class="n">caption</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="n">actor_center</span> <span class="o">+</span> <span class="n">caption_offset</span><span class="p">)</span>

            <span class="n">actor_with_caption</span> <span class="o">=</span> <span class="n">Container</span><span class="p">()</span>
            <span class="n">actor_with_caption</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">actor</span><span class="p">,</span> <span class="n">caption</span><span class="p">)</span>

            <span class="c1"># We change the anchor of the container so</span>
            <span class="c1"># the actor will be centered in the</span>
            <span class="c1"># grid cell.</span>
            <span class="n">actor_with_caption</span><span class="o">.</span><span class="n">anchor</span> <span class="o">=</span> <span class="n">actor_center</span> <span class="o">-</span> <span class="n">actor_with_caption</span><span class="o">.</span><span class="n">GetCenter</span><span class="p">()</span>
            <span class="n">actors_with_caption</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">actor_with_caption</span><span class="p">)</span>

        <span class="n">actors</span> <span class="o">=</span> <span class="n">actors_with_caption</span>

    <span class="n">grid</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="o">*</span><span class="n">actors</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">grid</span></div>


<div class="viewcode-block" id="figure"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.figure">[docs]</a><span class="k">def</span> <span class="nf">figure</span><span class="p">(</span><span class="n">pic</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a figure as an image actor.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    pic : filename or numpy RGBA array</span>
<span class="sd">    interpolation : str</span>
<span class="sd">        Options are nearest, linear or cubic. Default is nearest.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    image_actor : vtkImageActor</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pic</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">vtk_image_data</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="n">pic</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">pic</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">pic</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>

            <span class="n">vtk_image_data</span> <span class="o">=</span> <span class="n">ImageData</span><span class="p">()</span>
            <span class="n">vtk_image_data</span><span class="o">.</span><span class="n">AllocateScalars</span><span class="p">(</span><span class="n">VTK_UNSIGNED_CHAR</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

            <span class="c1"># width, height</span>
            <span class="n">vtk_image_data</span><span class="o">.</span><span class="n">SetDimensions</span><span class="p">(</span><span class="n">pic</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">pic</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">vtk_image_data</span><span class="o">.</span><span class="n">SetExtent</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pic</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pic</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">pic_tmp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="n">pic</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">pic_tmp</span> <span class="o">=</span> <span class="n">pic</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">pic</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">pic</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">4</span><span class="p">)</span>
            <span class="n">pic_tmp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">pic_tmp</span><span class="p">)</span>
            <span class="n">uchar_array</span> <span class="o">=</span> <span class="n">numpy_support</span><span class="o">.</span><span class="n">numpy_to_vtk</span><span class="p">(</span><span class="n">pic_tmp</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">vtk_image_data</span><span class="o">.</span><span class="n">GetPointData</span><span class="p">()</span><span class="o">.</span><span class="n">SetScalars</span><span class="p">(</span><span class="n">uchar_array</span><span class="p">)</span>

    <span class="n">image_actor</span> <span class="o">=</span> <span class="n">ImageActor</span><span class="p">()</span>
    <span class="n">image_actor</span><span class="o">.</span><span class="n">SetInputData</span><span class="p">(</span><span class="n">vtk_image_data</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">interpolation</span> <span class="o">==</span> <span class="s1">&#39;nearest&#39;</span><span class="p">:</span>
        <span class="n">image_actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetInterpolationTypeToNearest</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">interpolation</span> <span class="o">==</span> <span class="s1">&#39;linear&#39;</span><span class="p">:</span>
        <span class="n">image_actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetInterpolationTypeToLinear</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">interpolation</span> <span class="o">==</span> <span class="s1">&#39;cubic&#39;</span><span class="p">:</span>
        <span class="n">image_actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">SetInterpolationTypeToCubic</span><span class="p">()</span>

    <span class="n">image_actor</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">image_actor</span></div>


<div class="viewcode-block" id="texture"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.texture">[docs]</a><span class="k">def</span> <span class="nf">texture</span><span class="p">(</span><span class="n">rgb</span><span class="p">,</span> <span class="n">interp</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Map an RGB or RGBA texture on a plane.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    rgb : ndarray</span>
<span class="sd">        Input 2D RGB or RGBA array. Dtype should be uint8.</span>
<span class="sd">    interp : bool</span>
<span class="sd">        Interpolate between grid centers. Default True.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    act: Actor</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="n">rgb</span>
    <span class="n">grid</span> <span class="o">=</span> <span class="n">rgb_to_vtk</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">arr</span><span class="p">))</span>

    <span class="n">Y</span><span class="p">,</span> <span class="n">X</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

    <span class="c1"># Get vertices and triangles, then scale it</span>
    <span class="n">vertices</span><span class="p">,</span> <span class="n">triangles</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">prim_square</span><span class="p">()</span>
    <span class="n">vertices</span> <span class="o">*=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>

    <span class="c1"># Create a polydata</span>
    <span class="n">my_polydata</span> <span class="o">=</span> <span class="n">PolyData</span><span class="p">()</span>
    <span class="n">set_polydata_vertices</span><span class="p">(</span><span class="n">my_polydata</span><span class="p">,</span> <span class="n">vertices</span><span class="p">)</span>
    <span class="n">set_polydata_triangles</span><span class="p">(</span><span class="n">my_polydata</span><span class="p">,</span> <span class="n">triangles</span><span class="p">)</span>

    <span class="c1"># Create texture object</span>
    <span class="n">texture</span> <span class="o">=</span> <span class="n">Texture</span><span class="p">()</span>
    <span class="n">texture</span><span class="o">.</span><span class="n">SetInputDataObject</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span>
    <span class="c1"># texture.UseSRGBColorSpaceOn()</span>
    <span class="c1"># texture.SetPremultipliedAlpha(True)</span>
    <span class="k">if</span> <span class="n">interp</span><span class="p">:</span>
        <span class="n">texture</span><span class="o">.</span><span class="n">InterpolateOn</span><span class="p">()</span>

    <span class="c1"># Map texture coordinates</span>
    <span class="n">map_to_sphere</span> <span class="o">=</span> <span class="n">TextureMapToPlane</span><span class="p">()</span>
    <span class="n">map_to_sphere</span><span class="o">.</span><span class="n">SetInputData</span><span class="p">(</span><span class="n">my_polydata</span><span class="p">)</span>

    <span class="c1"># Create mapper and set the mapped texture as input</span>
    <span class="n">mapper</span> <span class="o">=</span> <span class="n">PolyDataMapper</span><span class="p">()</span>
    <span class="n">mapper</span><span class="o">.</span><span class="n">SetInputConnection</span><span class="p">(</span><span class="n">map_to_sphere</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">())</span>
    <span class="n">mapper</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>

    <span class="c1"># Create actor and set the mapper and the texture</span>
    <span class="n">act</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">()</span>
    <span class="n">act</span><span class="o">.</span><span class="n">SetMapper</span><span class="p">(</span><span class="n">mapper</span><span class="p">)</span>
    <span class="n">act</span><span class="o">.</span><span class="n">SetTexture</span><span class="p">(</span><span class="n">texture</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">act</span></div>


<div class="viewcode-block" id="texture_update"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.texture_update">[docs]</a><span class="k">def</span> <span class="nf">texture_update</span><span class="p">(</span><span class="n">texture_actor</span><span class="p">,</span> <span class="n">arr</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates texture of an actor by updating the vtkImageData</span>
<span class="sd">    assigned to the vtkTexture object.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    texture_actor: Actor</span>
<span class="sd">        Actor whose texture is to be updated.</span>
<span class="sd">    arr : ndarray</span>
<span class="sd">        Input 2D image in the form of RGB or RGBA array.</span>
<span class="sd">        This is the new image to be rendered on the actor.</span>
<span class="sd">        Dtype should be uint8.</span>

<span class="sd">    Implementation</span>
<span class="sd">    --------------</span>
<span class="sd">    Check docs/examples/viz_video_on_plane.py</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">grid</span> <span class="o">=</span> <span class="n">texture_actor</span><span class="o">.</span><span class="n">GetTexture</span><span class="p">()</span><span class="o">.</span><span class="n">GetInput</span><span class="p">()</span>
    <span class="n">dim</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">img_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">dim</span><span class="p">),</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;F&#39;</span><span class="p">)</span>
    <span class="n">vtkarr</span> <span class="o">=</span> <span class="n">numpy_support</span><span class="o">.</span><span class="n">numpy_to_vtk</span><span class="p">(</span><span class="n">img_data</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">grid</span><span class="o">.</span><span class="n">GetPointData</span><span class="p">()</span><span class="o">.</span><span class="n">SetScalars</span><span class="p">(</span><span class="n">vtkarr</span><span class="p">)</span></div>


<span class="k">def</span> <span class="nf">_textured_sphere_source</span><span class="p">(</span><span class="n">theta</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">phi</span><span class="o">=</span><span class="mi">60</span><span class="p">):</span>
    <span class="n">tss</span> <span class="o">=</span> <span class="n">TexturedSphereSource</span><span class="p">()</span>
    <span class="n">tss</span><span class="o">.</span><span class="n">SetThetaResolution</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
    <span class="n">tss</span><span class="o">.</span><span class="n">SetPhiResolution</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">tss</span>


<div class="viewcode-block" id="texture_on_sphere"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.texture_on_sphere">[docs]</a><span class="k">def</span> <span class="nf">texture_on_sphere</span><span class="p">(</span><span class="n">rgb</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">phi</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">interpolate</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>

    <span class="n">tss</span> <span class="o">=</span> <span class="n">_textured_sphere_source</span><span class="p">(</span><span class="n">theta</span><span class="o">=</span><span class="n">theta</span><span class="p">,</span> <span class="n">phi</span><span class="o">=</span><span class="n">phi</span><span class="p">)</span>
    <span class="n">earthMapper</span> <span class="o">=</span> <span class="n">PolyDataMapper</span><span class="p">()</span>
    <span class="n">earthMapper</span><span class="o">.</span><span class="n">SetInputConnection</span><span class="p">(</span><span class="n">tss</span><span class="o">.</span><span class="n">GetOutputPort</span><span class="p">())</span>

    <span class="n">earthActor</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">()</span>
    <span class="n">earthActor</span><span class="o">.</span><span class="n">SetMapper</span><span class="p">(</span><span class="n">earthMapper</span><span class="p">)</span>

    <span class="n">atext</span> <span class="o">=</span> <span class="n">Texture</span><span class="p">()</span>
    <span class="n">grid</span> <span class="o">=</span> <span class="n">rgb_to_vtk</span><span class="p">(</span><span class="n">rgb</span><span class="p">)</span>
    <span class="n">atext</span><span class="o">.</span><span class="n">SetInputDataObject</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">interpolate</span><span class="p">:</span>
        <span class="n">atext</span><span class="o">.</span><span class="n">InterpolateOn</span><span class="p">()</span>
    <span class="n">earthActor</span><span class="o">.</span><span class="n">SetTexture</span><span class="p">(</span><span class="n">atext</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">earthActor</span></div>


<div class="viewcode-block" id="texture_2d"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.texture_2d">[docs]</a><span class="k">def</span> <span class="nf">texture_2d</span><span class="p">(</span><span class="n">rgb</span><span class="p">,</span> <span class="n">interp</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create 2D texture from array.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    rgb : ndarray</span>
<span class="sd">        Input 2D RGB or RGBA array. Dtype should be uint8.</span>
<span class="sd">    interp : bool</span>
<span class="sd">        Interpolate between grid centers. Default True.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    vtkTexturedActor</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="n">rgb</span>
    <span class="n">Y</span><span class="p">,</span> <span class="n">X</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">)</span>
    <span class="n">grid</span> <span class="o">=</span> <span class="n">rgb_to_vtk</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">arr</span><span class="p">))</span>

    <span class="n">texture_polydata</span> <span class="o">=</span> <span class="n">PolyData</span><span class="p">()</span>
    <span class="n">texture_points</span> <span class="o">=</span> <span class="n">Points</span><span class="p">()</span>
    <span class="n">texture_points</span><span class="o">.</span><span class="n">SetNumberOfPoints</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

    <span class="n">polys</span> <span class="o">=</span> <span class="n">CellArray</span><span class="p">()</span>
    <span class="n">polys</span><span class="o">.</span><span class="n">InsertNextCell</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">polys</span><span class="o">.</span><span class="n">InsertCellPoint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">polys</span><span class="o">.</span><span class="n">InsertCellPoint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">polys</span><span class="o">.</span><span class="n">InsertCellPoint</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">polys</span><span class="o">.</span><span class="n">InsertCellPoint</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">texture_polydata</span><span class="o">.</span><span class="n">SetPolys</span><span class="p">(</span><span class="n">polys</span><span class="p">)</span>

    <span class="n">tc</span> <span class="o">=</span> <span class="n">FloatArray</span><span class="p">()</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">SetNumberOfComponents</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">SetNumberOfTuples</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">InsertComponent</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">InsertComponent</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">InsertComponent</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">InsertComponent</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">InsertComponent</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">InsertComponent</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">InsertComponent</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
    <span class="n">tc</span><span class="o">.</span><span class="n">InsertComponent</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="n">texture_polydata</span><span class="o">.</span><span class="n">GetPointData</span><span class="p">()</span><span class="o">.</span><span class="n">SetTCoords</span><span class="p">(</span><span class="n">tc</span><span class="p">)</span>

    <span class="n">texture_points</span><span class="o">.</span><span class="n">SetPoint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
    <span class="n">texture_points</span><span class="o">.</span><span class="n">SetPoint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
    <span class="n">texture_points</span><span class="o">.</span><span class="n">SetPoint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>
    <span class="n">texture_points</span><span class="o">.</span><span class="n">SetPoint</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>
    <span class="n">texture_polydata</span><span class="o">.</span><span class="n">SetPoints</span><span class="p">(</span><span class="n">texture_points</span><span class="p">)</span>

    <span class="n">texture_mapper</span> <span class="o">=</span> <span class="n">PolyDataMapper2D</span><span class="p">()</span>
    <span class="n">texture_mapper</span> <span class="o">=</span> <span class="n">set_input</span><span class="p">(</span><span class="n">texture_mapper</span><span class="p">,</span> <span class="n">texture_polydata</span><span class="p">)</span>

    <span class="n">act</span> <span class="o">=</span> <span class="n">TexturedActor2D</span><span class="p">()</span>
    <span class="n">act</span><span class="o">.</span><span class="n">SetMapper</span><span class="p">(</span><span class="n">texture_mapper</span><span class="p">)</span>

    <span class="n">tex</span> <span class="o">=</span> <span class="n">Texture</span><span class="p">()</span>
    <span class="n">tex</span><span class="o">.</span><span class="n">SetInputDataObject</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">interp</span><span class="p">:</span>
        <span class="n">tex</span><span class="o">.</span><span class="n">InterpolateOn</span><span class="p">()</span>
    <span class="n">tex</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>
    <span class="n">act</span><span class="o">.</span><span class="n">SetTexture</span><span class="p">(</span><span class="n">tex</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">act</span></div>


<div class="viewcode-block" id="sdf"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.sdf">[docs]</a><span class="k">def</span> <span class="nf">sdf</span><span class="p">(</span><span class="n">centers</span><span class="p">,</span> <span class="n">directions</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">colors</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">primitives</span><span class="o">=</span><span class="s1">&#39;torus&#39;</span><span class="p">,</span> <span class="n">scales</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a SDF primitive based actor.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    centers : ndarray, shape (N, 3)</span>
<span class="sd">        SDF primitive positions.</span>
<span class="sd">    colors : ndarray (N,3) or (N, 4) or tuple (3,) or tuple (4,), optional</span>
<span class="sd">        RGB or RGBA (for opacity) R, G, B and A should be at the range [0, 1].</span>
<span class="sd">    directions : ndarray, shape (N, 3)</span>
<span class="sd">        The orientation vector of the SDF primitive.</span>
<span class="sd">    primitives : str, list, tuple, np.ndarray</span>
<span class="sd">        The primitive of choice to be rendered.</span>
<span class="sd">        Options are sphere, torus and ellipsoid. Default is torus.</span>
<span class="sd">    scales : float</span>
<span class="sd">        The size of the SDF primitive.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    box_actor: Actor</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prims</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sphere&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;torus&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;ellipsoid&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;capsule&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>

    <span class="n">verts</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">prim_box</span><span class="p">()</span>
    <span class="n">repeated</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">repeat_primitive</span><span class="p">(</span>
        <span class="n">verts</span><span class="p">,</span>
        <span class="n">faces</span><span class="p">,</span>
        <span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
        <span class="n">directions</span><span class="o">=</span><span class="n">directions</span><span class="p">,</span>
        <span class="n">scales</span><span class="o">=</span><span class="n">scales</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">rep_verts</span><span class="p">,</span> <span class="n">rep_faces</span><span class="p">,</span> <span class="n">rep_colors</span><span class="p">,</span> <span class="n">rep_centers</span> <span class="o">=</span> <span class="n">repeated</span>
    <span class="n">prim_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">centers</span><span class="p">)</span>
    <span class="n">box_actor</span> <span class="o">=</span> <span class="n">get_actor_from_primitive</span><span class="p">(</span>
        <span class="n">rep_verts</span><span class="p">,</span> <span class="n">rep_faces</span><span class="p">,</span> <span class="n">rep_colors</span><span class="p">,</span> <span class="n">prim_count</span><span class="o">=</span><span class="n">prim_count</span>
    <span class="p">)</span>
    <span class="n">box_actor</span><span class="o">.</span><span class="n">GetMapper</span><span class="p">()</span><span class="o">.</span><span class="n">SetVBOShiftScaleMethod</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">primitives</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
        <span class="n">primlist</span> <span class="o">=</span> <span class="p">[</span><span class="n">prims</span><span class="p">[</span><span class="n">prim</span><span class="p">]</span> <span class="k">for</span> <span class="n">prim</span> <span class="ow">in</span> <span class="n">primitives</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">primitives</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">centers</span><span class="p">):</span>
            <span class="n">primlist</span> <span class="o">=</span> <span class="n">primlist</span> <span class="o">+</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">centers</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">primitives</span><span class="p">))</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s1">&#39;Not enough primitives provided,</span><span class="se">\</span>
<span class="s1">                defaulting to torus&#39;</span><span class="p">,</span>
                <span class="n">category</span><span class="o">=</span><span class="ne">UserWarning</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="n">rep_prims</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">primlist</span><span class="p">,</span> <span class="n">verts</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">rep_prims</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">prims</span><span class="p">[</span><span class="n">primitives</span><span class="p">],</span> <span class="n">rep_centers</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scales</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
        <span class="n">rep_scales</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">scales</span><span class="p">,</span> <span class="n">verts</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">rep_scales</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">scales</span><span class="p">,</span> <span class="n">rep_centers</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">directions</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">directions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">rep_directions</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">directions</span><span class="p">,</span> <span class="n">rep_centers</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">rep_directions</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">directions</span><span class="p">,</span> <span class="n">verts</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">attribute_to_actor</span><span class="p">(</span><span class="n">box_actor</span><span class="p">,</span> <span class="n">rep_centers</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span><span class="p">)</span>
    <span class="n">attribute_to_actor</span><span class="p">(</span><span class="n">box_actor</span><span class="p">,</span> <span class="n">rep_prims</span><span class="p">,</span> <span class="s1">&#39;primitive&#39;</span><span class="p">)</span>
    <span class="n">attribute_to_actor</span><span class="p">(</span><span class="n">box_actor</span><span class="p">,</span> <span class="n">rep_scales</span><span class="p">,</span> <span class="s1">&#39;scale&#39;</span><span class="p">)</span>
    <span class="n">attribute_to_actor</span><span class="p">(</span><span class="n">box_actor</span><span class="p">,</span> <span class="n">rep_directions</span><span class="p">,</span> <span class="s1">&#39;direction&#39;</span><span class="p">)</span>

    <span class="n">vs_dec_code</span> <span class="o">=</span> <span class="n">import_fury_shader</span><span class="p">(</span><span class="s1">&#39;sdf_dec.vert&#39;</span><span class="p">)</span>
    <span class="n">vs_impl_code</span> <span class="o">=</span> <span class="n">import_fury_shader</span><span class="p">(</span><span class="s1">&#39;sdf_impl.vert&#39;</span><span class="p">)</span>
    <span class="n">fs_dec_code</span> <span class="o">=</span> <span class="n">import_fury_shader</span><span class="p">(</span><span class="s1">&#39;sdf_dec.frag&#39;</span><span class="p">)</span>
    <span class="n">fs_impl_code</span> <span class="o">=</span> <span class="n">import_fury_shader</span><span class="p">(</span><span class="s1">&#39;sdf_impl.frag&#39;</span><span class="p">)</span>

    <span class="n">shader_to_actor</span><span class="p">(</span><span class="n">box_actor</span><span class="p">,</span> <span class="s1">&#39;vertex&#39;</span><span class="p">,</span> <span class="n">impl_code</span><span class="o">=</span><span class="n">vs_impl_code</span><span class="p">,</span> <span class="n">decl_code</span><span class="o">=</span><span class="n">vs_dec_code</span><span class="p">)</span>
    <span class="n">shader_to_actor</span><span class="p">(</span><span class="n">box_actor</span><span class="p">,</span> <span class="s1">&#39;fragment&#39;</span><span class="p">,</span> <span class="n">decl_code</span><span class="o">=</span><span class="n">fs_dec_code</span><span class="p">)</span>
    <span class="n">shader_to_actor</span><span class="p">(</span><span class="n">box_actor</span><span class="p">,</span> <span class="s1">&#39;fragment&#39;</span><span class="p">,</span> <span class="n">impl_code</span><span class="o">=</span><span class="n">fs_impl_code</span><span class="p">,</span> <span class="n">block</span><span class="o">=</span><span class="s1">&#39;light&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">box_actor</span></div>


<div class="viewcode-block" id="markers"><a class="viewcode-back" href="../../reference/fury.actor.html#fury.actor.markers">[docs]</a><span class="k">def</span> <span class="nf">markers</span><span class="p">(</span>
    <span class="n">centers</span><span class="p">,</span>
    <span class="n">colors</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">scales</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;3d&#39;</span><span class="p">,</span>
    <span class="n">marker_opacity</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
    <span class="n">edge_width</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
    <span class="n">edge_color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span>
    <span class="n">edge_opacity</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a marker actor with different shapes.</span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    centers : ndarray, shape (N, 3)</span>
<span class="sd">    colors : ndarray (N,3) or (N, 4) or tuple (3,) or tuple (4,)</span>
<span class="sd">        RGB or RGBA (for opacity) R, G, B and A should be at the range [0, 1].</span>
<span class="sd">    scales : ndarray, shape (N) or (N,3) or float or int, optional</span>
<span class="sd">    marker : str or a list</span>
<span class="sd">        Available markers are: &#39;3d&#39;, &#39;o&#39;, &#39;s&#39;, &#39;d&#39;, &#39;^&#39;, &#39;p&#39;, &#39;h&#39;, &#39;s6&#39;,</span>
<span class="sd">        &#39;x&#39;, &#39;+&#39;, optional.</span>
<span class="sd">    marker_opacity : float, optional</span>
<span class="sd">    edge_width : int, optional</span>
<span class="sd">    edge_color : ndarray, shape (3), optional</span>
<span class="sd">    edge_opacity : float, optional</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    sq_actor: Actor</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; import numpy as np</span>
<span class="sd">    &gt;&gt;&gt; from fury import actor, window</span>
<span class="sd">    &gt;&gt;&gt; scene = window.Scene()</span>
<span class="sd">    &gt;&gt;&gt; markers = [&#39;o&#39;, &#39;x&#39;, &#39;^&#39;, &#39;s&#39;]  # some examples</span>
<span class="sd">    &gt;&gt;&gt; n = len(markers)</span>
<span class="sd">    &gt;&gt;&gt; centers = np.random.normal(size=(n, 3), scale=10)</span>
<span class="sd">    &gt;&gt;&gt; colors = np.random.rand(n, 4)</span>
<span class="sd">    &gt;&gt;&gt; nodes_actor = actor.markers(</span>
<span class="sd">            centers,</span>
<span class="sd">            marker=markers,</span>
<span class="sd">            edge_width=.1,</span>
<span class="sd">            edge_color=[255, 255, 0],</span>
<span class="sd">            colors=colors,</span>
<span class="sd">            scales=10,</span>
<span class="sd">        )</span>
<span class="sd">    &gt;&gt;&gt; center = np.random.normal(size=(1, 3), scale=10)</span>
<span class="sd">    &gt;&gt;&gt; nodes_3d_actor = actor.markers(</span>
<span class="sd">            center,</span>
<span class="sd">            marker=&#39;3d&#39;,</span>
<span class="sd">            scales=5,</span>
<span class="sd">        )</span>
<span class="sd">    &gt;&gt;&gt; scene.add(nodes_actor, nodes_3d_actor)</span>
<span class="sd">    &gt;&gt;&gt; # window.show(scene, size=(600, 600))</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">n_markers</span> <span class="o">=</span> <span class="n">centers</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">verts</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">prim_square</span><span class="p">()</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">repeat_primitive</span><span class="p">(</span>
        <span class="n">verts</span><span class="p">,</span> <span class="n">faces</span><span class="p">,</span> <span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">scales</span><span class="o">=</span><span class="n">scales</span>
    <span class="p">)</span>

    <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">big_centers</span> <span class="o">=</span> <span class="n">res</span>
    <span class="n">prim_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">centers</span><span class="p">)</span>
    <span class="n">sq_actor</span> <span class="o">=</span> <span class="n">get_actor_from_primitive</span><span class="p">(</span>
        <span class="n">big_verts</span><span class="p">,</span> <span class="n">big_faces</span><span class="p">,</span> <span class="n">big_colors</span><span class="p">,</span> <span class="n">prim_count</span><span class="o">=</span><span class="n">prim_count</span>
    <span class="p">)</span>
    <span class="n">sq_actor</span><span class="o">.</span><span class="n">GetMapper</span><span class="p">()</span><span class="o">.</span><span class="n">SetVBOShiftScaleMethod</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">sq_actor</span><span class="o">.</span><span class="n">GetProperty</span><span class="p">()</span><span class="o">.</span><span class="n">BackfaceCullingOff</span><span class="p">()</span>

    <span class="n">attribute_to_actor</span><span class="p">(</span><span class="n">sq_actor</span><span class="p">,</span> <span class="n">big_centers</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span><span class="p">)</span>
    <span class="n">marker2id</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;o&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s1">&#39;s&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s1">&#39;^&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s1">&#39;p&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="s1">&#39;h&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
        <span class="s1">&#39;s6&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
        <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
        <span class="s1">&#39;+&#39;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
        <span class="s1">&#39;3d&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">bb_impl</span> <span class="o">=</span> \
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        vec3 vertexPositionMC = sphericalVertexPos(center, MCVCMatrix,</span>
<span class="sd">                                    normalizedVertexMCVSOutput, shape);</span>
<span class="sd">        gl_Position = MCDCMatrix * vec4(vertexPositionMC, 1.);</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="n">vs_dec_code</span> <span class="o">=</span> \
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        /* Billboard  vertex shader declaration */</span>
<span class="sd">        in vec3 center;</span>

<span class="sd">        out vec3 centerVertexMCVSOutput;</span>
<span class="sd">        out vec3 normalizedVertexMCVSOutput;</span>
<span class="sd">        &#39;&#39;&#39;</span>
    <span class="n">vs_dec_code</span> <span class="o">+=</span> \
        <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="n">import_fury_shader</span><span class="p">(</span><span class="s2">&quot;utils/billboard_normalization.glsl&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="n">vs_dec_code</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="n">import_fury_shader</span><span class="p">(</span><span class="s2">&quot;billboard/spherical.glsl&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="n">vs_dec_code</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="n">import_fury_shader</span><span class="p">(</span><span class="s2">&quot;marker_billboard_dec.vert&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="n">vs_impl_code</span> <span class="o">=</span> \
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        /* Billboard  vertex shader implementation */</span>
<span class="sd">        centerVertexMCVSOutput = center;</span>
<span class="sd">        normalizedVertexMCVSOutput = bbNorm(vertexMC.xyz, center);</span>
<span class="sd">        float scalingFactor = 1. / abs(normalizedVertexMCVSOutput.x);</span>
<span class="sd">        float size = abs((vertexMC.xyz - center).x) * 2;</span>
<span class="sd">        vec2 shape = vec2(size, size); // Fixes the scaling issue</span>
<span class="sd">        &#39;&#39;&#39;</span>
    <span class="n">vs_impl_code</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="n">compose_shader</span><span class="p">(</span><span class="n">bb_impl</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="n">vs_impl_code</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="n">import_fury_shader</span><span class="p">(</span><span class="s2">&quot;marker_billboard_impl.vert&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>

    <span class="n">fs_dec_code</span> <span class="o">=</span> \
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        /* Billboard  fragment shader declaration */</span>
<span class="sd">        in vec3 centerVertexMCVSOutput;</span>
<span class="sd">        in vec3 normalizedVertexMCVSOutput;</span>
<span class="sd">        &#39;&#39;&#39;</span>
    <span class="n">fs_dec_code</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="n">import_fury_shader</span><span class="p">(</span><span class="s2">&quot;marker_billboard_dec.frag&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="n">fs_impl_code</span> <span class="o">=</span> \
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        /* Billboard  Fragment shader implementation */</span>
<span class="sd">        // Renaming variables passed from the Vertex Shader</span>
<span class="sd">        vec3 color = vertexColorVSOutput.rgb;</span>
<span class="sd">        vec3 point = normalizedVertexMCVSOutput;</span>
<span class="sd">        fragOutput0 = vec4(color, 1.);</span>
<span class="sd">        &#39;&#39;&#39;</span>

    <span class="k">if</span> <span class="n">marker</span> <span class="o">==</span> <span class="s1">&#39;3d&#39;</span><span class="p">:</span>
        <span class="n">fs_impl_code</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">import_fury_shader</span><span class="p">(</span><span class="s2">&quot;billboard_spheres_impl.frag&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">fs_impl_code</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">import_fury_shader</span><span class="p">(</span><span class="s2">&quot;marker_billboard_impl.frag&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">marker</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">list_of_markers</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">n_markers</span><span class="p">)</span> <span class="o">*</span> <span class="n">marker2id</span><span class="p">[</span><span class="n">marker</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">list_of_markers</span> <span class="o">=</span> <span class="p">[</span><span class="n">marker2id</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">marker</span><span class="p">]</span>

        <span class="n">list_of_markers</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">list_of_markers</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float&#39;</span><span class="p">)</span>
        <span class="n">attribute_to_actor</span><span class="p">(</span><span class="n">sq_actor</span><span class="p">,</span> <span class="n">list_of_markers</span><span class="p">,</span> <span class="s1">&#39;marker&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">callback</span><span class="p">(</span>
        <span class="n">_caller</span><span class="p">,</span> <span class="n">_event</span><span class="p">,</span> <span class="n">calldata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">uniform_type</span><span class="o">=</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="n">uniform_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">):</span>
        <span class="n">program</span> <span class="o">=</span> <span class="n">calldata</span>
        <span class="k">if</span> <span class="n">program</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">program</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;SetUniform</span><span class="si">{</span><span class="n">uniform_type</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)(</span><span class="n">uniform_name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="n">add_shader_callback</span><span class="p">(</span>
        <span class="n">sq_actor</span><span class="p">,</span>
        <span class="n">partial</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span> <span class="n">uniform_type</span><span class="o">=</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="n">uniform_name</span><span class="o">=</span><span class="s1">&#39;edgeWidth&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">edge_width</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">add_shader_callback</span><span class="p">(</span>
        <span class="n">sq_actor</span><span class="p">,</span>
        <span class="n">partial</span><span class="p">(</span>
            <span class="n">callback</span><span class="p">,</span>
            <span class="n">uniform_type</span><span class="o">=</span><span class="s1">&#39;f&#39;</span><span class="p">,</span>
            <span class="n">uniform_name</span><span class="o">=</span><span class="s1">&#39;markerOpacity&#39;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="n">marker_opacity</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">add_shader_callback</span><span class="p">(</span>
        <span class="n">sq_actor</span><span class="p">,</span>
        <span class="n">partial</span><span class="p">(</span>
            <span class="n">callback</span><span class="p">,</span> <span class="n">uniform_type</span><span class="o">=</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="n">uniform_name</span><span class="o">=</span><span class="s1">&#39;edgeOpacity&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">edge_opacity</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">add_shader_callback</span><span class="p">(</span>
        <span class="n">sq_actor</span><span class="p">,</span>
        <span class="n">partial</span><span class="p">(</span>
            <span class="n">callback</span><span class="p">,</span> <span class="n">uniform_type</span><span class="o">=</span><span class="s1">&#39;3f&#39;</span><span class="p">,</span> <span class="n">uniform_name</span><span class="o">=</span><span class="s1">&#39;edgeColor&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">edge_color</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="n">shader_to_actor</span><span class="p">(</span><span class="n">sq_actor</span><span class="p">,</span> <span class="s1">&#39;vertex&#39;</span><span class="p">,</span> <span class="n">impl_code</span><span class="o">=</span><span class="n">vs_impl_code</span><span class="p">,</span> <span class="n">decl_code</span><span class="o">=</span><span class="n">vs_dec_code</span><span class="p">)</span>
    <span class="n">shader_to_actor</span><span class="p">(</span><span class="n">sq_actor</span><span class="p">,</span> <span class="s1">&#39;fragment&#39;</span><span class="p">,</span> <span class="n">decl_code</span><span class="o">=</span><span class="n">fs_dec_code</span><span class="p">)</span>
    <span class="n">shader_to_actor</span><span class="p">(</span><span class="n">sq_actor</span><span class="p">,</span> <span class="s1">&#39;fragment&#39;</span><span class="p">,</span> <span class="n">impl_code</span><span class="o">=</span><span class="n">fs_impl_code</span><span class="p">,</span> <span class="n">block</span><span class="o">=</span><span class="s1">&#39;light&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">sq_actor</span></div>
</pre></div>
<div class="section ablog__blog_comments">
  
  
</div>

            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div id="searchbox"></div>
</div>

<div class="toc-item">
  
</div>

<div class="toc-item">
  
</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>
 
  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <div id="footer-columns" class="footer-columns">
    <div class="footer-logo-column">
        <img id="footer-logo" src="../../_static/images/logo.svg" alt=" logo. ">
    </div>
    <div class="link-column">
        <div class="footer-column">
            <div class="footer-header">
                <h5 class="footer-h5">About</h5>
            </div>
            <ul class="link-list" style="padding-left: 0px;">
                <li class="link-list"><a class="footer-link" href="../../community.html"><i
                            class="fa fa-angle-double-right"></i> Developers</a></li>
                <li class="link-list"><a class="footer-link" href="https://discord.gg/6btFPPj"><i
                            class="fa fa-angle-double-right"></i> Support</a></li>
                <li class="link-list"><a class="footer-link" href="../../installation.html"><i
                            class="fa fa-angle-double-right"></i> Download</a></li>
                <li class="link-list"><a class="footer-link" href="../../auto_tutorials/index.html"><i
                            class="fa fa-angle-double-right"></i> Tutorials</a></li>
            </ul>
        </div>
    </div>
    <div class="link-column">
        <div class="footer-column">
            <div class="footer-header">
                <h5 class="footer-h5">Friends</h5>
            </div>
            <ul class="" style="padding-left: 0px;">
                <li class="link-list"><a class="footer-link" target="_blank" href="https://dipy.org/"><i
                            class="fa fa-angle-double-right"></i> DIPY</a></li>
                <li class="link-list"><a class="footer-link" target="_blank" href="https://heliosnetwork.io/"><i
                            class="fa fa-angle-double-right"></i> Helios</a></li>
                <li class="link-list"><a class="footer-link" target="_blank" href="https://furiousatoms.com/"><i
                            class="fa fa-angle-double-right"></i> Furious Atoms</a></li>
            </ul>
        </div>
    </div>
    <div class="link-column">
        <div class="footer-column">
            <div class="footer-header">
                <h5 class="footer-h5">Support</h5>
            </div>
            <ul class="" style="padding-left: 0px;">
                <li class="link-list"><a class="footer-link" target="_blank" href="https://engineering.indiana.edu/"><i
                            class="fa fa-angle-double-right"></i>
                        The department of Intelligent Systems Engineering of Indiana University
                    </a></li>
                <li class="link-list"><a class="footer-link" target="_blank"
                        href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=1720625"><i
                            class="fa fa-angle-double-right"></i>
                        NSF NCN - Engineered NanoBIO - NSF award #1720625
                    </a></li>
                <li class="link-list"><a class="footer-link" target="_blank"
                        href="https://summerofcode.withgoogle.com/"><i class="fa fa-angle-double-right"></i>
                        Google Summer of Code Program
                    </a></li>
            </ul>
        </div>
    </div>
    <div class="footer-actions">


        <nav class="level is-mobile">
            <div class="social-media-icons">
                <a class="level-item" href="https://github.com/fury-gl/fury"
                    aria-label="https://github.com/fury-gl/fury">
                    <span class="icon"><i class="fab fa-github-alt"
                            style="color: white; margin-right: 0.75rem;"></i></span>
                </a>
                <a class="level-item" href="https://twitter.com/fury_engine"
                    aria-label="https://twitter.com/fury_engine">
                    <span class="icon"><i class="fab fa-twitter"
                            style="color: white; margin-right: 0.75rem;"></i></span>
                </a>
            </div>
        </nav>
        <div class="copyright">&copy; 2018-2023, FURY. All rights reserved.</div>
    </div>
</div>
  </div>
  
</div>
  </footer>
<link rel="stylesheet" href="../../_static/css/blog.css" type="text/css">
<link rel="stylesheet" href="../../_static/vendor/vars.css" />
<link rel="stylesheet" href="../../_static/vendor/styles.css" />
<link rel="stylesheet" href="../../_static/vendor/sphinx-footer.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"
  integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog=="
  crossorigin="anonymous" />
<style>
  /* Sidebar header (and topbar for mobile) */
  .wy-side-nav-search,
  .wy-nav-top {
    background: #990000;
  }

  /* Sidebar */
  .wy-nav-side {
    background: #4A3C31;
  }
</style>
<script src="https://cdn.jsdelivr.net/npm/@widgetbot/crate@3" async defer>
  new Crate({
    server: '695048505902891009',
    channel: '695305679682011217',
    shard: 'https://e.widgetbot.io',
    // glyph: ['https://i0.wp.com/www.puclpodcast.com/wp-content/uploads/2014/03/discord-chat-link-button.jpg?w=681&ssl=1', '100%'],
  })
</script>

  </body>
</html>